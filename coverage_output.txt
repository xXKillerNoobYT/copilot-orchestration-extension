
> copilot-orchestration-extension@0.0.1 test:once
> jest --coverage --silent

PASS tests/agents/custom/executor.test.ts (7.349 s)
  Custom Agent Executor
    substituteVariables
      ΓêÜ Test 1: should replace single variable (7 ms)
      ΓêÜ Test 2: should replace multiple variables
      ΓêÜ Test 3: should keep unmatched variables unchanged (1 ms)
      ΓêÜ Test 4: should auto-fill current_date (1 ms)
      ΓêÜ Test 5: should auto-fill current_time (1 ms)
      ΓêÜ Test 6: should allow overriding auto-filled variables (1 ms)
      ΓêÜ Test 7: should handle template with no variables
      ΓêÜ Test 8: should handle empty template (1 ms)
      ΓêÜ Test 9: should handle multiple occurrences of same variable (1 ms)
      ΓêÜ Test 10: should handle variables at start and end (1 ms)
      ΓêÜ Test 11: should handle nested braces gracefully (1 ms)
      ΓêÜ Test 12: should handle all available variables
    buildSystemPrompt
      ΓêÜ Test 13: should include agent name and description (1 ms)
      ΓêÜ Test 14: should include substituted system prompt (1 ms)
      ΓêÜ Test 15: should include numbered goals (1 ms)
      ΓêÜ Test 16: should handle empty goals
      ΓêÜ Test 17: should include checklist with checkboxes (1 ms)
      ΓêÜ Test 18: should skip checklist section when empty (1 ms)
      ΓêÜ Test 19: should include hardlock policy by default (1 ms)
      ΓêÜ Test 20: should skip hardlock policy when option set
      ΓêÜ Test 21: should include custom lists (1 ms)
      ΓêÜ Test 22: should order custom lists by order field
      ΓêÜ Test 23: should skip custom lists section when empty (4 ms)
    executeCustomAgent
      ΓêÜ Test 24: should execute successfully with valid agent (3 ms)
      ΓêÜ Test 25: should return token usage (1 ms)
      ΓêÜ Test 26: should return timing information (1 ms)
      ΓêÜ Test 27: should return error when no workspace (1 ms)
      ΓêÜ Test 28: should return error when agent not found
      ΓêÜ Test 29: should return error when agent is inactive
      ΓêÜ Test 30: should return error when load fails (1 ms)
      ΓêÜ Test 31: should call completeLLM with correct messages (2 ms)
      ΓêÜ Test 32: should include history in messages (3 ms)
      ΓêÜ Test 33: should use streaming when onStream provided (1 ms)
      ΓêÜ Test 34: should pass variables to system prompt
      ΓêÜ Test 35: should handle LLM errors (2 ms)
      ΓêÜ Test 36: should handle hardlock violations (1 ms)
      ΓêÜ Test 37: should use agent temperature (1 ms)
      ΓêÜ Test 38: should handle storage errors (1 ms)
    CustomAgentExecutor
      ΓêÜ Test 39: should initialize successfully (1 ms)
      ΓêÜ Test 40: should throw AgentNotFoundError when agent missing (74 ms)
      ΓêÜ Test 41: should throw AgentInactiveError when agent inactive (1 ms)
      ΓêÜ Test 42: should throw when no workspace (14 ms)
      ΓêÜ Test 43: should execute queries (1 ms)
      ΓêÜ Test 44: should auto-initialize on first execute (1 ms)
      ΓêÜ Test 45: should maintain conversation history
      ΓêÜ Test 46: should include history in subsequent calls (1 ms)
      ΓêÜ Test 47: should clear history (4 ms)
      ΓêÜ Test 48: should trim history when too long (4 ms)
      ΓêÜ Test 49: should not add to history on failure (1 ms)
      ΓêÜ Test 50: should support streaming
      ΓêÜ Test 51: should validate tools
      ΓêÜ Test 52: should create tool executor
      ΓêÜ Test 53: should pass options to execution (1 ms)
      ΓêÜ Test 54: should return immutable history copy
    quickExecute
      ΓêÜ Test 55: should execute agent with minimal config (1 ms)
      ΓêÜ Test 56: should pass variables (1 ms)
      ΓêÜ Test 57: should handle errors gracefully (1 ms)
    canExecuteAgent
      ΓêÜ Test 58: should return true for active agent
      ΓêÜ Test 59: should return false when no workspace
      ΓêÜ Test 60: should return false when agent not found
      ΓêÜ Test 61: should return false when agent is inactive
      ΓêÜ Test 62: should return false on load error
    previewSystemPrompt
      ΓêÜ Test 63: should return full system prompt (1 ms)
      ΓêÜ Test 64: should substitute variables
      ΓêÜ Test 65: should return null when no workspace (2 ms)
      ΓêÜ Test 66: should return null on load error (1 ms)
      ΓêÜ Test 67: should work with empty variables (4 ms)
    Error Classes
      AgentNotFoundError
        ΓêÜ Test 68: should have correct message
        ΓêÜ Test 69: should have correct name (1 ms)
        ΓêÜ Test 70: should have correct code
        ΓêÜ Test 71: should store agent name
      AgentInactiveError
        ΓêÜ Test 72: should have correct message (1 ms)
        ΓêÜ Test 73: should have correct code
      AgentTimeoutError
        ΓêÜ Test 74: should have correct message
        ΓêÜ Test 75: should have correct code (1 ms)
        ΓêÜ Test 76: should store timeout value
    Edge Cases
      ΓêÜ Test 77: should handle very long system prompts (1 ms)
      ΓêÜ Test 78: should handle agent with many custom lists (1 ms)
      ΓêÜ Test 79: should handle special characters in variables
      ΓêÜ Test 80: should handle unicode in agent config (1 ms)
      ΓêÜ Test 81: should handle concurrent executions (1 ms)
    Agent Activation/Deactivation
      activateAgent
        ΓêÜ Test 82: should activate an inactive agent (4 ms)
        ΓêÜ Test 83: should succeed if agent already active (1 ms)
        ΓêÜ Test 84: should fail if no workspace folder (1 ms)
        ΓêÜ Test 85: should fail if agent not found
      deactivateAgent
        ΓêÜ Test 86: should deactivate an active agent (19 ms)
        ΓêÜ Test 87: should succeed if agent already inactive (1 ms)
        ΓêÜ Test 88: should fail if no workspace folder (1 ms)
        ΓêÜ Test 89: should fail if agent not found
      toggleAgentActivation
        ΓêÜ Test 90: should toggle active to inactive (6 ms)
        ΓêÜ Test 91: should toggle inactive to active (4 ms)
        ΓêÜ Test 92: should fail if no workspace folder (1 ms)
        ΓêÜ Test 93: should fail if agent not found (1 ms)
      isAgentActive
        ΓêÜ Test 94: should return true for active agent (1 ms)
        ΓêÜ Test 95: should return false for inactive agent (29 ms)
        ΓêÜ Test 96: should return false if no workspace (1 ms)
        ΓêÜ Test 97: should return false if agent not found
        ΓêÜ Test 98: should return false if load throws
      getActiveAgents
        ΓêÜ Test 99: should return list of active agent names
        ΓêÜ Test 100: should return empty array if no workspace (1 ms)
        ΓêÜ Test 101: should return empty array on error (2 ms)
      getInactiveAgents
        ΓêÜ Test 102: should return list of inactive agent names (1 ms)
        ΓêÜ Test 103: should return empty array if no workspace (1 ms)
        ΓêÜ Test 104: should return empty array on error
      activateAgents (bulk)
        ΓêÜ Test 105: should activate multiple agents (1 ms)
        ΓêÜ Test 106: should handle partial failures in bulk activate (3 ms)
        ΓêÜ Test 107: should return empty array for empty input (1 ms)
      deactivateAgents (bulk)
        ΓêÜ Test 108: should deactivate multiple agents
        ΓêÜ Test 109: should handle partial failures in bulk deactivate (9 ms)
        ΓêÜ Test 110: should return empty array for empty input (1 ms)
      Error handling
        ΓêÜ Test 111: should catch save errors during activation (1 ms)
        ΓêÜ Test 112: should catch load errors during check (2 ms)

PASS tests/ui/ticketsTreeProvider.test.ts (7.773 s)
  TicketsTreeDataProvider
    constructor
      ΓêÜ should subscribe to ticket changes (11 ms)
      ΓêÜ should handle subscription errors gracefully (1 ms)
    getChildren
      ΓêÜ should return ticket items for open tickets (78 ms)
      ΓêÜ should filter out done tickets (5 ms)
      ΓêÜ should show placeholder when no open tickets (1 ms)
      ΓêÜ should show placeholder when all tickets are done (1 ms)
      ΓêÜ should handle database errors gracefully (2 ms)
      ΓêÜ should return empty array when element is provided (no children) (1 ms)
      ΓêÜ should set correct descriptions with status and date (1 ms)
      ΓêÜ should include full ticket description in tooltip for hover-to-read (1 ms)
      ΓêÜ should use correct icons for different statuses (1 ms)
    getTreeItem
      ΓêÜ should return the element unchanged (1 ms)
    plan preview extraction from description
      ΓêÜ should extract plan preview from ticket.description (3 ms)
      ΓêÜ should truncate plan preview to 200 characters (2 ms)
      ΓêÜ should handle exactly 200 character plan without ellipsis
      ΓêÜ should clean whitespace in plan preview (1 ms)
      ΓêÜ should show "ΓÇö" when no description
      ΓêÜ should show "ΓÇö" when description is empty string
      ΓêÜ should set tooltip to full description for hover-to-read (1 ms)
      ΓêÜ should set tooltip to "No plan stored yet" when no description (1 ms)
      ΓêÜ should handle multiple tickets with different plan lengths
    TreeItem command for clickable tickets
      ΓêÜ should set command property on TreeItem to make it clickable (1 ms)
      ΓêÜ should pass correct ticket ID to command arguments
    refresh
      ΓêÜ should fire onDidChangeTreeData event (1 ms)
    onDidChangeTreeData
      ΓêÜ should expose event emitter (1 ms)
      ΓêÜ should trigger listeners when fired
    auto-refresh on ticket changes
      ΓêÜ should call refresh when ticket change event fires (14 ms)
      ΓêÜ should fire onDidChangeTreeData when ticket change event received (2 ms)
    contextValue for context menus
      ΓêÜ Test 1: should set contextValue to "ticket" on TreeItem when tickets exist (2 ms)
      ΓêÜ Test 2: should set contextValue on all ticket items (4 ms)
      ΓêÜ Test 3: should set pending contextValue on pending tickets (1 ms)
      ΓêÜ Test 4: should not set contextValue on placeholder item when no tickets (1 ms)
    Clarity Score Color Coding
      ΓêÜ Test 1: should display green color for high clarity scores (ΓëÑ85)
      ΓêÜ Test 2: should display yellow color for medium clarity scores (60-84) (1 ms)
      ΓêÜ Test 3: should display red color for low clarity scores (<60) (1 ms)
      ΓêÜ Test 4: should not apply color when clarity score is undefined (1 ms)
      ΓêÜ Test 5: should include clarity score emoji in description (1 ms)
      ΓêÜ Test 6: should include yellow emoji for medium scores (1 ms)
      ΓêÜ Test 7: should include red emoji for low scores (1 ms)
      ΓêÜ Test 8: should exclude clarity display when score is undefined (9 ms)
      ΓêÜ Test 9: should include clarity score in tooltip (1 ms)
      ΓêÜ Test 10: should handle boundary score of 60 as yellow (1 ms)
      ΓêÜ Test 11: should handle boundary score of 85 as green (1 ms)
      ΓêÜ Test 12: should handle score of 59 as red
      ΓêÜ Test 13: should handle score of 84 as yellow (1 ms)
      ΓêÜ Test 14: should handle score of 0 (1 ms)
      ΓêÜ Test 15: should handle score of 100 (2 ms)
      ΓêÜ Test 16: getClarityColor should be accessible for testing (3 ms)
    Performance with 1000+ Tickets
      ΓêÜ Test 1: should handle 1000 tickets without exceeding 100ms (27 ms)
      ΓêÜ Test 2: should handle 2000 tickets without exceeding 200ms (43 ms)
      ΓêÜ Test 3: should correctly format clarity scores for 1000 tickets (190 ms)
      ΓêÜ Test 4: should handle 500 done tickets filtering efficiently (30 ms)
      ΓêÜ Test 5: should handle tickets with long descriptions (76 ms)
      ΓêÜ Test 6: memory efficiency - should not leak on multiple getChildren calls (55 ms)

PASS tests/services/ticketDb/fallback.test.ts
  Fallback & Persistence (MT-008)
    SQLITE_BUSY Detection (MT-008.1)
      ΓêÜ Test 1: should classify SQLITE_BUSY as retryable (24 ms)
      ΓêÜ Test 2: should classify "database is locked" as busy (1 ms)
      ΓêÜ Test 3: should retry busy errors in withFallback (21 ms)
    SQLITE_FULL Detection (MT-008.2)
      ΓêÜ Test 4: should classify SQLITE_FULL as non-retryable, triggers fallback (9 ms)
      ΓêÜ Test 5: should classify "database or disk is full" as full
      ΓêÜ Test 6: should use fallback operation on SQLITE_FULL
      ΓêÜ Test 7: should handle fallback operation failure (1 ms)
    EACCES Permission Handling (MT-008.3)
      ΓêÜ Test 8: should classify EACCES as permission error (1 ms)
      ΓêÜ Test 9: should classify "access denied" as permission error (1 ms)
      ΓêÜ Test 10: should classify corruption errors
      ΓêÜ Test 11: should classify unknown errors (1 ms)
      ΓêÜ Test 12: should handle non-Error objects (2 ms)
    Recovery Persistence (MT-008.4)
      ΓêÜ Test 13: should create recovery manager with default config
      ΓêÜ Test 14: should start and stop recovery manager (5 ms)
      ΓêÜ Test 15: should not start twice
      ΓêÜ Test 16: should perform manual save (1 ms)
      ΓêÜ Test 17: should load recovery tickets from file (1 ms)
      ΓêÜ Test 18: should return empty array when no recovery data
    Automatic Reload from Recovery (MT-008.5)
      ΓêÜ Test 19: should detect usable recovery data
      ΓêÜ Test 20: should reject expired recovery data
      ΓêÜ Test 21: should reject empty recovery data
      ΓêÜ Test 22: should handle missing recovery file
      ΓêÜ Test 23: should load recovery data from manager (1 ms)
    Fallback Mode Indicator (MT-008.6)
      ΓêÜ Test 24: should initialize with sqlite mode
      ΓêÜ Test 25: should transition to memory mode (1 ms)
      ΓêÜ Test 26: should transition to recovery mode (1 ms)
      ΓêÜ Test 27: should not count duplicate transitions (2 ms)
      ΓêÜ Test 28: should notify listeners on transition (1 ms)
      ΓêÜ Test 29: should unsubscribe listeners (2 ms)
      ΓêÜ Test 30: should report feature availability per mode (3 ms)
      ΓêÜ Test 31: should use singleton pattern (1 ms)
      ΓêÜ Test 32: should return status snapshot (not reference) (1 ms)
    Graceful Degradation (MT-008.7)
      ΓêÜ Test 33: should return no degraded features in sqlite mode
      ΓêÜ Test 34: should return degraded features in memory mode
      ΓêÜ Test 35: should check specific feature degradation (1 ms)
      ΓêÜ Test 36: should have degradation rules for all key features
      ΓêÜ Test 37: should provide user-friendly status messages
      ΓêÜ Test 38: should have messages for all degradation rules (1 ms)
    Error Notification Tickets (MT-008.8)
      ΓêÜ Test 39: should create error ticket for SQLITE_FULL (1 ms)
      ΓêÜ Test 40: should create error ticket for permission error (1 ms)
      ΓêÜ Test 41: should increment error ticket IDs (4 ms)
      ΓêÜ Test 42: should generate appropriate titles (3 ms)
      ΓêÜ Test 43: should build detailed descriptions (1 ms)
      ΓêÜ Test 44: should provide suggested actions for all categories (1 ms)
      ΓêÜ Test 45: should determine correct priorities (1 ms)
      ΓêÜ Test 46: should determine when to create tickets (1 ms)
    Restore from Fallback (MT-008.9)
      ΓêÜ Test 47: should check restore eligibility - primary available (2 ms)
      ΓêÜ Test 48: should check restore eligibility - no path available (11 ms)
      ΓêÜ Test 49: should check restore eligibility - alternate available
      ΓêÜ Test 50: should prepare tickets for migration (4 ms)
      ΓêÜ Test 51: should execute restore successfully (2 ms)
      ΓêÜ Test 52: should handle partial restore failures (3 ms)
      ΓêÜ Test 53: should create restore monitor (1 ms)
      ΓêÜ Test 54: should perform immediate check (1 ms)
    Comprehensive Scenarios (MT-008.10)
      ΓêÜ Test 55: should handle full fallback lifecycle (1 ms)
      ΓêÜ Test 56: should determine restore timing
      ΓêÜ Test 57: should not attempt restore for corruption (1 ms)
      ΓêÜ Test 58: should handle non-fallback errors gracefully
      ΓêÜ Test 59: should track multiple transitions (1 ms)
      ΓêÜ Test 60: should handle listener errors gracefully (1 ms)
      ΓêÜ Test 61: should report listener count (1 ms)
      ΓêÜ Test 62: should handle recovery manager cleanup
      ΓêÜ Test 63: should report recovery path (2 ms)
      ΓêÜ Test 64: should handle restore monitor lifecycle (1 ms)
      ΓêÜ Test 65: should not start restore monitor twice
      ΓêÜ Test 66: should perform final save on stop
      ΓêÜ Test 67: should return false when saveNow called without starting (2 ms)
      ΓêÜ Test 68: should handle ticketProvider throwing error (1 ms)
      ΓêÜ Test 69: should return null when loadRecovery has no data
      ΓêÜ Test 70: should return singleton from getRecoveryManager
      ΓêÜ Test 71: should allow config on first getRecoveryManager call
      ΓêÜ Test 72: should reset singleton with resetRecoveryManagerForTests

PASS tests/orchestrator.test.ts (8.017 s)
  Orchestrator Service
    initialization
      ΓêÜ Test 1: should initialize with default timeout when config missing (10 ms)
      ΓêÜ Test 2: should read timeout from config.orchestrator.taskTimeoutSeconds (1 ms)
      ΓêÜ Test 3: should fallback to llm.timeoutSeconds if orchestrator config missing (2 ms)
    manual mode ticket handling
      ΓêÜ Test 4: should set ai_to_human ticket to pending when manual mode enabled (8 ms)
      ΓêÜ Test 5: should skip pending update when auto mode enabled (36 ms)
    queue ordering (FIFO)
      ΓêÜ Test 6: should return tasks in FIFO order (2 ms)
      ΓêÜ Test 7: should return null when queue is empty (2 ms)
      ΓêÜ Test 8: should filter for open and in-progress tickets only (1 ms)
    timeout detection and blocking
      ΓêÜ Test 9: should create blocked ticket when task idle >30s (using fake timers) (6 ms)
      ΓêÜ Test 10: should not create duplicate blocked tickets for same task (3 ms)
    edge cases
      ΓêÜ Test 11: should handle TicketDb errors gracefully (1 ms)
      ΓêÜ Test 12: should throw error if getNextTask called before initialization (112 ms)
      ΓêÜ Test 13: should prevent duplicate initialization (1 ms)
    routeQuestionToAnswer
      ΓêÜ should call LLM with question and return response (2 ms)
      ΓêÜ should include Answer agent system prompt (1 ms)
      ΓêÜ should handle LLM failure and return fallback message
      ΓêÜ should not create duplicate ticket on LLM failure
      ΓêÜ should log question routing and response (1 ms)
    routeToPlanningAgent
      ΓêÜ should log chunks and accumulate full plan (2 ms)
      ΓêÜ should handle empty response gracefully (1 ms)
      ΓêÜ should truncate long plans in logs (1 ms)
    routeToVerificationAgent
      ΓêÜ should call completeLLM with verification system prompt (2 ms)
      ΓêÜ should parse PASS response and avoid ticket creation (6 ms)
      ΓêÜ should parse FAIL response and create blocked ticket (2 ms)
      ΓêÜ should default to FAIL on ambiguous response (1 ms)
      ΓêÜ should truncate long explanations in logs (1 ms)
      ΓêÜ should fail fast when code diff is empty (2 ms)
      ΓêÜ should handle LLM errors without creating duplicate tickets (2 ms)
    Planning Agent
      ΓêÜ should stream plan chunks to logs via callback (3 ms)
      ΓêÜ should handle empty plan response (1 ms)
      ΓêÜ should handle planning timeout by returning fallback message (1 ms)
    Answer Agent
      ΓêÜ should call completeLLM and log response (1 ms)
      ΓêÜ should create ticket when response contains "ticket" keyword (1 ms)
      ΓêÜ should create ticket when response contains "create" keyword (1 ms)
      ΓêÜ should not create ticket for normal response without action keywords (5 ms)
      ΓêÜ should warn and return early for empty question (1 ms)
      ΓêÜ should warn and return early for whitespace-only question (1 ms)
      ΓêÜ should truncate long response in logs (>500 chars) (3 ms)
      ΓêÜ should handle case-insensitive keyword detection (2 ms)
      ΓêÜ should handle completeLLM timeout error gracefully (1 ms)
      ΓêÜ should handle empty LLM response (5 ms)
      ΓêÜ should create ticket with truncated question in title (2 ms)
  getOrchestratorInstance
    ΓêÜ should return an instance of OrchestratorService after initialization (1 ms)
    ΓêÜ should throw an error if the orchestrator is not initialized (2 ms)
    ΓêÜ should return the same instance on multiple calls after initialization
    ΓêÜ should log a warning if initializeOrchestrator is called multiple times (1 ms)
    ΓêÜ should throw an error if getOrchestratorInstance is called after reset (1 ms)
  initializeOrchestrator
    ΓêÜ should initialize orchestrator using centralized config system (1 ms)
    ΓêÜ should read timeout from centralized config system (1 ms)
    ΓêÜ should use validated config from centralized system (validation handled by Zod) (1 ms)
    ΓêÜ should load tasks from TicketDb during initialization (3 ms)
    ΓêÜ should handle errors when loading tasks from TicketDb (1 ms)
    ΓêÜ should warn if orchestrator is already initialized (1 ms)
    ΓêÜ should use taskTimeoutSeconds from centralized config system (1 ms)
    ΓêÜ should use default timeout from centralized config (30s) (2 ms)
    ΓêÜ should register manual mode listener during initialization (2 ms)
    ΓêÜ should register conversation thread listener during initialization (2 ms)
    ΓêÜ should use validated config from centralized config system (1 ms)

PASS tests/agents/answerAgent.test.ts
  AnswerAgent
    createChatId
      ΓêÜ should generate unique chat IDs (3 ms)
      ΓêÜ should generate chat IDs with expected format (1 ms)
    AnswerAgent.ask() - Single Turn
      ΓêÜ should answer a question and return the response (2 ms)
      ΓêÜ should support streaming mode with onStream callback
      ΓêÜ should store question and answer in history after first ask
      ΓêÜ should persist conversation history after each ask (1 ms)
      ΓêÜ should warn when ticket not found during persistence (1 ms)
      ΓêÜ should handle persistence errors gracefully
      ΓêÜ should generate new chatId if none provided (1 ms)
    AnswerAgent.ask() - Multi-Turn
      ΓêÜ should include previous Q&A in messages for follow-up (1 ms)
      ΓêÜ should maintain separate histories for different chatIds (1 ms)
      ΓêÜ should trim history to MAX_HISTORY_EXCHANGES when exceeded (1 ms)
      ΓêÜ should pass complete message history to LLM on each turn
    AnswerAgent.getHistory()
      ΓêÜ should return undefined for non-existent chatId (1 ms)
      ΓêÜ should return empty array equivalent (via getHistory) for new chatId
    AnswerAgent.getActiveConversations()
      ΓêÜ should return active conversation metadata (1 ms)
    AnswerAgent.clearHistory()
      ΓêÜ should remove history for specified chatId
      ΓêÜ should not affect other chatIds when clearing one
    AnswerAgent Error Handling
      ΓêÜ should handle LLM errors gracefully (22 ms)
      ΓêÜ should log error when LLM fails (1 ms)
    Message Format Validation
      ΓêÜ should send messages in correct OpenAI format (1 ms)
      ΓêÜ should always include system prompt as first message (1 ms)
    Edge Cases
      ΓêÜ should handle empty question string (1 ms)
      ΓêÜ should handle very long question text
      ΓêÜ should handle exactly MAX_HISTORY_EXCHANGES exchanges without trimming (1 ms)
    Auto-close inactive conversations
      ΓêÜ should close conversations inactive for >30 days (2 ms)
      ΓêÜ should NOT close conversations active within 30 days (2 ms)
      ΓêÜ should handle exactly 30 days (boundary condition) (1 ms)
      ΓêÜ should handle cleanup with no conversations (1 ms)
      ΓêÜ should handle multiple chats (old and new) (3 ms)
      ΓêÜ should handle cleanup errors gracefully (2 ms)
      ΓêÜ should update lastActivityAt on each ask (1 ms)
      ΓêÜ should log each deleted conversation with details (2 ms)
    Persistence
      ΓêÜ should serialize history into JSON strings (1 ms)
      ΓêÜ should deserialize history back into the Map (1 ms)
      ΓêÜ should support save/load cycle across instances (1 ms)
      ΓêÜ should restore context after reload simulation
      ΓêÜ should warn and skip invalid JSON entries
      ΓêÜ should truncate oversized histories and warn (8 ms)
  AnswerAgent Wrapper Functions
    initializeAnswerAgent
      ΓêÜ should initialize singleton (1 ms)
      ΓêÜ should not reinitialize if already initialized (1 ms)
    answerQuestion
      ΓêÜ should call agent.ask through wrapper
      ΓêÜ should throw if not initialized (9 ms)
    getConversationHistory
      ΓêÜ should return empty array for unknown chatId (1 ms)
      ΓêÜ should return messages for known chatId
    clearConversation
      ΓêÜ should clear conversation history
    getActiveConversations
      ΓêÜ should return all active conversations (1 ms)
    restoreAnswerAgentHistory
      ΓêÜ should restore serialized history (2 ms)
    persistAnswerAgentHistory
      ΓêÜ should persist conversation history (1 ms)
    resetAnswerAgentForTests
      ΓêÜ should reset singleton (2 ms)

PASS tests/agents/custom/routing.test.ts
  Custom Agent Routing
    getPriorityScore
      ΓêÜ Test 1: should return 4 for P0 (highest) (1 ms)
      ΓêÜ Test 2: should return 3 for P1 (1 ms)
      ΓêÜ Test 3: should return 2 for P2
      ΓêÜ Test 4: should return 1 for P3 (lowest)
    calculateScore
      ΓêÜ Test 5: should calculate base score from priority (1 ms)
      ΓêÜ Test 6: should add priority boost
      ΓêÜ Test 7: should add keyword bonus (0.5 each) (1 ms)
      ΓêÜ Test 8: should add pattern bonus (0.8 each)
      ΓêÜ Test 9: should add tag bonus (0.3 each) (1 ms)
      ΓêÜ Test 10: should add ticket type bonus (0.5)
      ΓêÜ Test 11: should give max score for override
    matchKeyword
      ΓêÜ Test 12: should match exact word (1 ms)
      ΓêÜ Test 13: should match case-insensitive
      ΓêÜ Test 14: should match at start of query
      ΓêÜ Test 15: should match at end of query
      ΓêÜ Test 16: should not match partial words (1 ms)
      ΓêÜ Test 17: should handle empty query
      ΓêÜ Test 18: should handle special characters via fuzzy matching
      fuzzy matching
        ΓêÜ Test 19: should fuzzy match skipping characters
        ΓêÜ Test 20: should fuzzy match non-contiguous
        ΓêÜ Test 21: should not fuzzy match wrong order
    matchPattern
      ΓêÜ Test 22: should match simple pattern (1 ms)
      ΓêÜ Test 23: should match regex pattern
      ΓêÜ Test 24: should match case-insensitive (1 ms)
      ΓêÜ Test 25: should handle invalid regex gracefully
      ΓêÜ Test 26: should match anchored pattern (1 ms)
      ΓêÜ Test 27: should not match anchored pattern incorrectly
    matchTag
      ΓêÜ Test 28: should match exact tag (1 ms)
      ΓêÜ Test 29: should match case-insensitive
      ΓêÜ Test 30: should not match non-existent tag (1 ms)
      ΓêÜ Test 31: should handle empty tag list
    matchAgent
      ΓêÜ Test 32: should return match with keywords (2 ms)
      ΓêÜ Test 33: should return match with patterns (1 ms)
      ΓêÜ Test 34: should return match with tags (1 ms)
      ΓêÜ Test 35: should match ticket type (1 ms)
      ΓêÜ Test 36: should apply priority boost
      ΓêÜ Test 37: should detect manual override (1 ms)
      ΓêÜ Test 38: should be case-insensitive for override
    hasAnyMatch
      ΓêÜ Test 39: should return true for override (1 ms)
      ΓêÜ Test 40: should return true for keyword match
      ΓêÜ Test 41: should return false for no matches
    routeTask
      ΓêÜ Test 42: should return error when no workspace (1 ms)
      ΓêÜ Test 43: should return error when no agents (1 ms)
      ΓêÜ Test 44: should find matching agent
      ΓêÜ Test 45: should sort by score (1 ms)
      ΓêÜ Test 46: should skip inactive agents by default (1 ms)
      ΓêÜ Test 47: should include inactive when option set
      ΓêÜ Test 48: should respect maxCandidates (1 ms)
      ΓêÜ Test 49: should respect minScore
      ΓêÜ Test 50: should handle override correctly (1 ms)
    findBestAgent
      ΓêÜ Test 51: should return best agent
      ΓêÜ Test 52: should return null when no match (1 ms)
    getAgentsForTicketType
      ΓêÜ Test 53: should filter by ticket type
      ΓêÜ Test 54: should return empty for no workspace (1 ms)
    getAgentsByKeyword
      ΓêÜ Test 55: should find agents with keyword (1 ms)
      ΓêÜ Test 56: should be case-insensitive
    getAgentsByTag
      ΓêÜ Test 57: should find agents with tag (1 ms)
    analyzeRouting
      ΓêÜ Test 58: should analyze agent routing (1 ms)
      ΓêÜ Test 59: should return null for missing agent
      ΓêÜ Test 60: should return null for no workspace
    getRoutingSummary
      ΓêÜ Test 61: should return summary
      ΓêÜ Test 62: should identify agents without rules
      ΓêÜ Test 63: should return empty summary for no workspace (1 ms)
    findRoutingConflicts
      ΓêÜ Test 64: should find keyword conflicts
      ΓêÜ Test 65: should return empty for no conflicts
      ΓêÜ Test 66: should return empty for no workspace
    Edge Cases
      ΓêÜ Test 67: should handle empty routing rules (1 ms)
      ΓêÜ Test 68: should handle very long query
      ΓêÜ Test 69: should handle special characters in query
      ΓêÜ Test 70: should handle unicode in keywords with fuzzy

PASS tests/agents/custom/storage.test.ts
  Storage Constants
    ΓêÜ Test 1: should export correct directory structure constants (1 ms)
  AgentStorageError
    ΓêÜ Test 2: should create error with agent name and operation
    ΓêÜ Test 3: should create error with cause (1 ms)
    ΓêÜ Test 4: should allow undefined agent name for list operations
  Path Resolution
    ΓêÜ Test 5: should get workspace folder from vscode (1 ms)
    ΓêÜ Test 6: should return undefined when no workspace
    ΓêÜ Test 7: should construct custom agents directory path (1 ms)
    ΓêÜ Test 8: should construct agent directory path (1 ms)
    ΓêÜ Test 9: should construct agent config path (1 ms)
  Directory Management
    ΓêÜ Test 10: should create custom agents directory if not exists (1 ms)
    ΓêÜ Test 11: should not create directory if already exists
    ΓêÜ Test 12: should throw AgentStorageError on directory creation failure (36 ms)
    ΓêÜ Test 13: should create agent-specific directory (1 ms)
  saveCustomAgent
    ΓêÜ Test 14: should save a valid agent configuration (3 ms)
    ΓêÜ Test 15: should create backup before overwriting (1 ms)
    ΓêÜ Test 16: should skip backup when option set (1 ms)
    ΓêÜ Test 17: should throw on invalid agent configuration (1 ms)
    ΓêÜ Test 18: should skip validation when option set
    ΓêÜ Test 19: should throw on write failure (1 ms)
    ΓêÜ Test 20: should serialize agent as JSON (1 ms)
  loadCustomAgent
    ΓêÜ Test 21: should load and validate agent from file (3 ms)
    ΓêÜ Test 22: should throw on invalid agent name format (2 ms)
    ΓêÜ Test 23: should throw on reserved agent name (1 ms)
    ΓêÜ Test 24: should throw when agent not found (1 ms)
    ΓêÜ Test 25: should throw on invalid JSON (1 ms)
    ΓêÜ Test 26: should throw on invalid config schema (1 ms)
    ΓêÜ Test 27: should apply defaults for optional fields (1 ms)
  deleteCustomAgent
    ΓêÜ Test 28: should delete agent directory
    ΓêÜ Test 29: should throw on invalid agent name
    ΓêÜ Test 30: should throw when agent not found
    ΓêÜ Test 31: should create final backup when option set (1 ms)
  customAgentExists
    ΓêÜ Test 32: should return true when config file exists (1 ms)
    ΓêÜ Test 33: should return false when config file missing
  listCustomAgentNames
    ΓêÜ Test 34: should return empty array when no agents directory (1 ms)
    ΓêÜ Test 35: should return agent folder names (1 ms)
    ΓêÜ Test 36: should only include directories with config.json (1 ms)
    ΓêÜ Test 37: should throw AgentStorageError on read failure (1 ms)
  listCustomAgents
    ΓêÜ Test 38: should return items with validation status (2 ms)
    ΓêÜ Test 39: should filter to valid only when option set (1 ms)
    ΓêÜ Test 40: should filter to active only when option set (1 ms)
  loadAllCustomAgents
    ΓêÜ Test 41: should return array of valid agent configs (2 ms)
  exportAgentToString
    ΓêÜ Test 42: should export agent as formatted JSON (1 ms)
    ΓêÜ Test 43: should export compact JSON when pretty=false
  importAgentFromString
    ΓêÜ Test 44: should import and validate agent from JSON string (1 ms)
    ΓêÜ Test 45: should throw on invalid JSON (1 ms)
    ΓêÜ Test 46: should throw on invalid agent config (2 ms)
  restoreAgentFromBackup
    ΓêÜ Test 47: should restore agent from backup file (2 ms)
    ΓêÜ Test 48: should throw when no backup exists (1 ms)
  agentHasBackup
    ΓêÜ Test 49: should return true when backup file exists
    ΓêÜ Test 50: should return false when no backup (1 ms)
  renameCustomAgent
    ΓêÜ Test 51: should rename agent and move folder (2 ms)
    ΓêÜ Test 52: should throw when old agent not found (1 ms)
    ΓêÜ Test 53: should throw when new name is invalid (1 ms)
    ΓêÜ Test 54: should throw when new name already exists (1 ms)
    ΓêÜ Test 55: should update metadata.updatedAt (1 ms)
  getStorageStats
    ΓêÜ Test 56: should return correct statistics (1 ms)
    ΓêÜ Test 57: should handle stat errors gracefully (1 ms)
    ΓêÜ Test 58: should count invalid agents correctly (4 ms)
  Edge Cases
    ΓêÜ Test 59: should handle agents with special characters in content (1 ms)
    ΓêÜ Test 60: should handle empty custom lists array (1 ms)
    ΓêÜ Test 61: should handle max length name (1 ms)
    ΓêÜ Test 62: should reject name over max length (1 ms)
    ΓêÜ Test 63: should handle concurrent saves (atomic write) (1 ms)
  CRUD Workflow Integration
    ΓêÜ Test 64: should complete full create-read-update-delete cycle (2 ms)
    ΓêÜ Test 65: should preserve all fields through save/load cycle (1 ms)

PASS tests/ui/customAgentBuilder.test.ts
  CustomAgentBuilderPanel
    Panel Creation
      ΓêÜ Test 1: should create panel in create mode (40 ms)
      ΓêÜ Test 2: should create panel in edit mode with agent name (1 ms)
      ΓêÜ Test 3: should reuse existing panel if already open (26 ms)
      ΓêÜ Test 4: should set HTML content on panel (2 ms)
      ΓêÜ Test 5: should register message handler (1 ms)
      ΓêÜ Test 6: should register dispose handler (1 ms)
      ΓêÜ Test 7: should send constraints info on initialization (34 ms)
      ΓêÜ Test 8: should send default agent on create mode (51 ms)
    Panel Disposal
      ΓêÜ Test 9: should reset instance on dispose (1 ms)
      ΓêÜ Test 10: should dispose panel resources (13 ms)
      ΓêÜ Test 11: should allow creating new panel after disposal (1 ms)
    Validation Messages
      ΓêÜ Test 12: should validate valid agent config (49 ms)
      ΓêÜ Test 13: should reject invalid agent name (36 ms)
      ΓêÜ Test 14: should reject empty goals (29 ms)
      ΓêÜ Test 15: should reject reserved agent names (15 ms)
      ΓêÜ Test 16: should validate with no config (14 ms)
    Save Messages
      ΓêÜ Test 17: should save valid agent config (61 ms)
      ΓêÜ Test 18: should show success notification on save (61 ms)
      ΓêÜ Test 19: should reject save with no config (15 ms)
      ΓêÜ Test 20: should reject save when agent exists (create mode) (63 ms)
      ΓêÜ Test 21: should create backup when saving in edit mode (122 ms)
      ΓêÜ Test 22: should handle save error gracefully (62 ms)
    Load Messages
      ΓêÜ Test 23: should load existing agent in edit mode (60 ms)
      ΓêÜ Test 24: should handle load error for non-existent agent (64 ms)
      ΓêÜ Test 25: should load agent by message (75 ms)
      ΓêÜ Test 26: should handle load failure gracefully (62 ms)
    Cancel Messages
      ΓêÜ Test 27: should dispose panel on cancel (1 ms)
      ΓêÜ Test 28: should clear instance on cancel (1 ms)
    Template Messages
      ΓêÜ Test 29: should load template (33 ms)
      ΓêÜ Test 30: should set template description (41 ms)
    Field Change Messages
      ΓêÜ Test 31: should handle fieldChanged message (40 ms)
      ΓêÜ Test 32: should handle nested field changes (27 ms)
      ΓêÜ Test 33: should ignore fieldChanged with no fieldName (29 ms)
    HTML Content
      ΓêÜ Test 34: should include all form sections (2 ms)
      ΓêÜ Test 35: should include CSP meta tag (2 ms)
      ΓêÜ Test 36: should include form action buttons (1 ms)
      ΓêÜ Test 37: should include variable helper (4 ms)
      ΓêÜ Test 38: should include character count displays (1 ms)
      ΓêÜ Test 39: should include priority dropdown (1 ms)
      ΓêÜ Test 40: should include routing ticket type checkboxes (2 ms)
    Agent List Updates
      ΓêÜ Test 41: should send agent list on initialization (64 ms)
      ΓêÜ Test 42: should update agent list after save (170 ms)
      ΓêÜ Test 43: should handle list error gracefully (61 ms)
    Static Methods
      ΓêÜ Test 44: should return null from getInstance when no panel (1 ms)
      ΓêÜ Test 45: should return panel from getInstance when open (1 ms)
      ΓêÜ Test 46: openCustomAgentBuilder should use create mode (1 ms)
      ΓêÜ Test 47: openCustomAgentEditor should use edit mode (1 ms)
    Unknown Messages
      ΓêÜ Test 48: should handle unknown message type gracefully (12 ms)
    Panel Title
      ΓêÜ Test 49: should update title when switching from create to edit (64 ms)
      ΓêÜ Test 50: should set title for existing agent (78 ms)
    Validation Edge Cases
      ΓêÜ Test 51: should validate system prompt minimum length (14 ms)
      ΓêÜ Test 52: should validate custom list has unique names (17 ms)
      ΓêÜ Test 53: should validate temperature range (15 ms)
      ΓêÜ Test 54: should validate timeout range (15 ms)
    Insert Variable
      ΓêÜ Test 55: should handle insertVariable message without error (15 ms)

PASS tests/extension.test.ts (9.775 s)
  Extension Commands
    ΓêÜ should register the COE: Plan Task command (19 ms)
    ΓêÜ should register the COE: Verify Task command (32 ms)
    ΓêÜ should register the COE: Ask Answer Agent command (18 ms)
    ΓêÜ should register the COE: Open Ticket command (4 ms)
    ΓêÜ should open a ticket with description when clicked (6 ms)
    ΓêÜ should show fallback content when ticket has no description (9 ms)
    ΓêÜ should show warning when ticket not found (9 ms)
    Orchestration Flow
      ΓêÜ should register the COE: Verify Last Ticket command (4 ms)
      ΓêÜ should handle verify last ticket with PASS result (13 ms)
      ΓêÜ should handle verify last ticket with FAIL result (6 ms)
      ΓêÜ should show info message when no open ticket exists (8 ms)
      ΓêÜ should setup auto-planning listener on startup (5 ms)
    Context Menu Commands
      ΓêÜ should register the COE: View Ticket Progress command (29 ms)
      ΓêÜ should register the COE: Update Ticket Status command (7 ms)
      ΓêÜ should register the COE: Add Ticket Comment command (12 ms)
      ΓêÜ should register the COE: Reply Conversation command (18 ms)
      ΓêÜ should execute openTicket when viewTicketProgress is called (3 ms)
      ΓêÜ should show warning when viewTicketProgress called with no ticket ID (5 ms)
      ΓêÜ should update ticket status when updateTicketStatus called with selection (7 ms)
      ΓêÜ should handle user cancellation in updateTicketStatus (20 ms)
      ΓêÜ should show warning when updateTicketStatus ticket not found (4 ms)
      ΓêÜ should add comment to ticket when addTicketComment called (91 ms)
      ΓêÜ should validate comment length in addTicketComment (4 ms)
      ΓêÜ should handle user cancellation in addTicketComment (6 ms)
      ΓêÜ should show warning when addTicketComment ticket not found (7 ms)
    coe.processTicket command
      ΓêÜ should register the COE: Process Ticket command (7 ms)
      ΓêÜ should process ticket by calling planning agent (4 ms)
      ΓêÜ should handle ticket not found error (2 ms)
      ΓêÜ should handle processing errors gracefully (5 ms)
    coe.researchWithAgent command
      ΓêÜ should register the COE: Research with Agent command (8 ms)
      ΓêÜ should show info message when Research Agent is disabled in settings (2 ms)
      ΓêÜ should abort silently when no query is provided (4 ms)
      ΓêÜ should abort silently when empty query is provided (2 ms)
  Extension Helpers
    ΓêÜ should update the status bar text and tooltip (4 ms)
    ΓêÜ should auto-plan for new ai_to_human tickets (707 ms)
    ΓêÜ should skip auto-planning when autoProcessTickets is false (Manual mode) (716 ms)
    ΓêÜ should run Ask Answer Agent continue with active chat (5 ms)
    ΓêÜ should warn when continuing without an active chat (3 ms)
    ΓêÜ should show error when opening a ticket fails (3 ms)
    ΓêÜ should refresh agents and tickets via commands (3 ms)
    ΓêÜ should run Ask Answer Agent with a new question (3 ms)
    ΓêÜ should show error when verify last ticket fails (3 ms)
  Answer Agent Persistence
    ΓêÜ should restore Answer Agent history on activate (2 ms)
    ΓêÜ Test 1: should persist Answer Agent history on deactivate (1 ms)
    ΓêÜ should warn and continue if persistence fails on deactivate
    coe.enableAgent command
      ΓêÜ should register the COE: Enable Agent command (2 ms)
      ΓêÜ should enable a disabled agent and refresh tree view (2 ms)
      ΓêÜ should handle missing tree item gracefully (1 ms)
    coe.disableAgent command
      ΓêÜ should register the COE: Disable Agent command (2 ms)
      ΓêÜ should disable an enabled agent and refresh tree view (3 ms)
      ΓêÜ should handle errors when updating settings (2 ms)
    coe.toggleAutoProcessing command
      ΓêÜ should register the COE: Toggle Auto Processing command (2 ms)
      ΓêÜ should toggle from Manual to Auto mode (runtime override, not persisted) (3 ms)
      ΓêÜ should toggle from Auto to Manual mode (runtime override, not persisted) (2 ms)
      ΓêÜ should reset to setting value after resetAutoModeState (2 ms)

PASS tests/llm/streaming.test.ts
  StreamProcessor
    MT-010.7: Chunk reception
      ΓêÜ Test 1: should create streaming session (6 ms)
      ΓêÜ Test 2: should process string chunk (2 ms)
      ΓêÜ Test 3: should process object chunk (1 ms)
      ΓêÜ Test 4: should reject chunk for unknown session (1 ms)
      ΓêÜ Test 5: should emit chunk event (1 ms)
    Chunk accumulation
      ΓêÜ Test 6: should accumulate content (1 ms)
      ΓêÜ Test 7: should track chunk count (1 ms)
      ΓêÜ Test 8: should reset on new session (4 ms)
    Completion detection
      ΓêÜ Test 9: should detect stop token [DONE] (2 ms)
      ΓêÜ Test 10: should finalize session on complete() call (5 ms)
      ΓêÜ Test 11: should get session result (2 ms)
    Session state
      ΓêÜ Test 12: should track active state (2 ms)
      ΓêÜ Test 13: should track multiple sessions (1 ms)
      ΓêÜ Test 14: should handle session-specific operations (3 ms)
    Error handling
      ΓêÜ Test 15: should reject chunk after session inactive (2 ms)
      ΓêÜ Test 16: should cancel session (1 ms)
      ΓêÜ Test 17: should emit cancelled event (1 ms)
    Cleanup
      ΓêÜ Test 18: should cleanup all sessions (1 ms)
      ΓêÜ Test 19: should be able to create new session after cleanup
    Buffer overflow handling
      ΓêÜ Test 20: should emit error on buffer overflow (1 ms)
      ΓêÜ Test 21: should return false on buffer overflow (2 ms)
    Timeout handling
      ΓêÜ Test 22: should emit timeout when no chunks received (2 ms)
      ΓêÜ Test 23: should mark session inactive on timeout (2 ms)
      ΓêÜ Test 24: should reset timeout on chunk received (3 ms)
      ΓêÜ Test 25: should not timeout if session already inactive (2 ms)
    Stop token handling
      ΓêÜ Test 26: should detect custom stop tokens (1 ms)
      ΓêÜ Test 27: should remove stop token from content (2 ms)
      ΓêÜ Test 28: should detect stop token in raw data string (1 ms)
    OpenAI format parsing
      ΓêÜ Test 29: should extract content from choices[0].delta (1 ms)
      ΓêÜ Test 30: should extract content from choices[0].message (final) (1 ms)
      ΓêÜ Test 31: should detect finish_reason in OpenAI format (1 ms)
      ΓêÜ Test 32: should extract usage data from OpenAI format (1 ms)
      ΓêÜ Test 33: should use chunk id from OpenAI format (5 ms)
      ΓêÜ Test 34: should handle empty choices array (1 ms)
      ΓêÜ Test 35: should handle missing delta content (1 ms)
    SSE format parsing
      ΓêÜ Test 36: should parse SSE data: prefix with JSON (2 ms)
      ΓêÜ Test 37: should handle SSE data: [DONE] (1 ms)
      ΓêÜ Test 38: should handle non-JSON SSE data as raw text (2 ms)
    Session edge cases
      ΓêÜ Test 39: should return false when completing unknown session (1 ms)
      ΓêÜ Test 40: should return false when cancelling unknown session (1 ms)
      ΓêÜ Test 41: should return false when cancelling inactive session (1 ms)
      ΓêÜ Test 42: should return undefined buffer for unknown session (4 ms)
      ΓêÜ Test 43: should return undefined session for unknown id (2 ms)
    Singleton functions
      ΓêÜ Test 44: should return singleton instance (2 ms)
      ΓêÜ Test 45: should reset singleton for tests (1 ms)
      ΓêÜ Test 46: should work with fresh singleton (2 ms)
    Complete with usage from chunks
      ΓêÜ Test 47: should find usage from last chunk with usage data (2 ms)
      ΓêÜ Test 48: should return null usage if no chunks have usage (1 ms)
    Progress events
      ΓêÜ Test 49: should emit chunk events with progress data (2 ms)
    Custom configuration
      ΓêÜ Test 50: should use custom maxBufferSize (1 ms)
      ΓêÜ Test 51: should use custom chunkTimeoutMs (1 ms)
    Chunk ID generation
      ΓêÜ Test 52: should generate sequential chunk IDs (2 ms)
    Session timing
      ΓêÜ Test 53: should track startedAt timestamp (1 ms)
      ΓêÜ Test 54: should track lastChunkAt timestamp (1 ms)
      ΓêÜ Test 55: should calculate duration in result (1 ms)
    Error event handling
      ΓêÜ Test 56: should mark session inactive on error (1 ms)
    Parse chunk error handling
      ΓêÜ Test 57: should handle object that throws on property access (2 ms)
      ΓêÜ Test 58: should handle invalid JSON in SSE data prefix (2 ms)
    Multiple stop token detection
      ΓêÜ Test 59: should handle multiple stop tokens in config (1 ms)

PASS tests/ui/agentsTreeProvider.test.ts
  AgentsTreeDataProvider (Dynamic Status)
    constructor
      ΓêÜ should subscribe to ticket changes on instantiation (3 ms)
      ΓêÜ should handle subscription errors gracefully (1 ms)
    getChildren with dynamic status
      ΓêÜ should return 9 items: 1 toggle + 5 agents + 1 separator + 2 buttons (3 ms)
      ΓêÜ should display Manual mode toggle when getAutoModeEnabled returns false (2 ms)
      ΓêÜ should display Auto mode toggle when getAutoModeEnabled returns true
      ΓêÜ should set command on toggle item to trigger toggleAutoProcessing
      ΓêÜ should display Idle when status is undefined (1 ms)
      ΓêÜ should display Active status with truncated result (2 ms)
      ΓêÜ should use spinning icon for Active agent
      ΓêÜ should use check icon for Waiting agent
      ΓêÜ should use error icon for Failed agent (2 ms)
      ΓêÜ should include timestamp in tooltip (1 ms)
      ΓêÜ should handle result truncation to 50 chars (1 ms)
      ΓêÜ should display all agents with different statuses (1 ms)
      ΓêÜ should not include "Last:" in description when no result (1 ms)
      ΓêÜ should display currentTask in description when available (1 ms)
      ΓêÜ should prioritize currentTask over lastResult in description (1 ms)
      ΓêÜ should truncate currentTask to 50 chars
      ΓêÜ should include currentTask in tooltip (1 ms)
      ΓêÜ should include both currentTask and lastResult in tooltip (1 ms)
      ΓêÜ should show "Idle" with no extra info when agent has no task or result (1 ms)
      ΓêÜ should handle Failed agent with error message in tooltip (1 ms)
      ΓêÜ should display "Disabled" and gray icon for disabled agents (1 ms)
      ΓêÜ should set contextValue to coe-agent-enabled for enabled agents (1 ms)
      ΓêÜ should set contextValue to coe-agent-disabled for disabled agents (1 ms)
      ΓêÜ should include right-click hint in tooltip for enabled agents (1 ms)
      ΓêÜ should include right-click hint in tooltip for disabled agents (3 ms)
      ΓêÜ should check correct setting key for each agent (5 ms)
    tree refresh on ticket change
      ΓêÜ should trigger refresh when listener called (1 ms)
      ΓêÜ should fire onDidChangeTreeData when refresh called (1 ms)
    real-time updates on agent status change
      ΓêÜ should subscribe to agentStatusTracker.onStatusChange on construction (1 ms)
      ΓêÜ should refresh tree when agent status changes
    getTreeItem
      ΓêÜ should return item unchanged (1 ms)
    getChildren with element
      ΓêÜ should return empty array for no children (1 ms)
    edge cases and comprehensive coverage
      ΓêÜ should handle agent with no timestamp gracefully (3 ms)
      ΓêÜ should show all 4 agents with different icons simultaneously (2 ms)
      ΓêÜ should handle very long currentTask and lastResult both present (1 ms)
      ΓêÜ should handle status change subscription error gracefully (1 ms)
      ΓêÜ should format timestamp correctly in tooltip (2 ms)
      ΓêÜ should handle empty string currentTask (1 ms)
      ΓêÜ should handle empty string lastResult (1 ms)

PASS tests/agents/planning/planningAgent.test.ts
  Planning Agent Test Suite
    RequirementAnalyzer
      ΓêÜ Test 1: should return singleton instance (2 ms)
      ΓêÜ Test 2: should analyze requirement and extract features (2 ms)
      ΓêÜ Test 3: should handle LLM failure gracefully (1 ms)
      ΓêÜ Test 4: should detect unclear requirements with quickClarityCheck (1 ms)
      ΓêÜ Test 5: should handle invalid JSON response
    VaguenessDetector
      ΓêÜ Test 6: should return singleton instance
      ΓêÜ Test 7: should detect vague terms (2 ms)
      ΓêÜ Test 8: should pass clear requirements (1 ms)
      ΓêÜ Test 9: should allow threshold adjustment
      ΓêÜ Test 10: should create clarification ticket for vague requirements (2 ms)
    TaskDecomposer
      ΓêÜ Test 11: should return singleton instance
      ΓêÜ Test 12: should decompose feature into atomic tasks (5 ms)
      ΓêÜ Test 13: should build dependency graph (1 ms)
      ΓêÜ Test 14: should detect circular dependencies (2 ms)
      ΓêÜ Test 15: should handle LLM failure (1 ms)
    PRDParser
      ΓêÜ Test 16: should return singleton instance
      ΓêÜ Test 17: should parse valid PRD file (3 ms)
      ΓêÜ Test 18: should handle missing PRD file (1 ms)
      ΓêÜ Test 19: should handle invalid JSON
      ΓêÜ Test 20: should filter features for planning (1 ms)
    HandoffManager
      ΓêÜ Test 21: should return singleton instance (1 ms)
      ΓêÜ Test 22: should create handoff package (2 ms)
      ΓêÜ Test 23: should execute handoff and create tickets (1 ms)
      ΓêÜ Test 24: should prevent planning reentry after handoff (1 ms)
      ΓêÜ Test 25: should detect circular dependencies in handoff (1 ms)
    PlanningAgent (Integration)
      ΓêÜ Test 26: should initialize as singleton (41 ms)
      ΓêÜ Test 27: should plan from requirement (13 ms)
      ΓêÜ Test 28: should request clarification for vague requirements
      ΓêÜ Test 29: should block planning after handoff (1 ms)
      ΓêÜ Test 30: should plan from PRD file (4 ms)
      ΓêÜ Test 31: should handle missing PRD gracefully
      ΓêÜ Test 32: should track total estimate across features (1 ms)
      ΓêÜ Test 33: should use quickClarityCheck (1 ms)

PASS tests/ticketDb.test.ts (10.414 s)
  TicketDb
    initialization
      ΓêÜ should initialize in-memory mode when sqlite3 fails (9 ms)
      ΓêÜ should create .coe directory if missing (3 ms)
    CRUD operations (in-memory)
      ΓêÜ should create a ticket (3 ms)
      ΓêÜ should create a ticket with ai_to_human type (1 ms)
      ΓêÜ should retrieve ticket with type field (1 ms)
      ΓêÜ should handle ticket without type (backward compatibility) (2 ms)
      ΓêÜ should retrieve a ticket by ID (1 ms)
      ΓêÜ should return null for non-existent ticket (1 ms)
      ΓêÜ should list all tickets (2 ms)
      ΓêÜ should throw error if methods called before init (149 ms)
      ΓêÜ Test 1: should filter tickets by status (11 ms)
      ΓêÜ Test 2: should filter tickets by type (2 ms)
      ΓêÜ Test 3: should paginate tickets with limit and offset (9 ms)
      ΓêÜ Test 4: should update all ticket fields correctly (20 ms)
      ΓêÜ Test 5: should delete a ticket by ID (2 ms)
      ΓêÜ Test 6: should throw error when deleting non-existent ticket (1 ms)
      ΓêÜ Test 7: should complete full CRUD round-trip (2 ms)
      ΓêÜ Test 8: should emit change event on delete (1 ms)
      ΓêÜ Test 9: should return empty array when listing with no matches (4 ms)
    SQLite Mode Operations
      ΓêÜ should initialize with SQLite when module loads successfully (569 ms)
      ΓêÜ should create ticket in SQLite mode (176 ms)
      ΓêÜ should retrieve all tickets from SQLite (558 ms)
    updateTicket
      ΓêÜ should update ticket in in-memory mode (30 ms)
      ΓêÜ should update ticket in SQLite mode (212 ms)
      ΓêÜ should return null for non-existent ticket (15 ms)
      ΓêÜ should emit change event on update (7 ms)
    Migration & Backward Compatibility
      ΓêÜ should migrate SQLite table without type column (459 ms)
      ΓêÜ should read old tickets without type field as undefined (478 ms)
    Performance Indexes
      ΓêÜ Test 1: should create performance indexes on tickets table (234 ms)
      ΓêÜ Test 2: should not error when indexes already exist (idempotent) (545 ms)
      ΓêÜ Test 3: should use IF NOT EXISTS clause for safe index creation (391 ms)
    Integration: Full CRUD Flow
      ΓêÜ should complete full CRUD lifecycle: create ΓåÆ read ΓåÆ update ΓåÆ read (28 ms)
      ΓêÜ should handle concurrent updates on same ticket (32 ms)
      ΓêÜ should gracefully fall back to in-memory when SQLite fails (17 ms)
    Error Handling
      ΓêÜ should handle createTicket error in SQLite mode (7 ms)
      ΓêÜ should handle getAllTickets error in SQLite mode (8 ms)
      ΓêÜ should handle getTicket error in SQLite mode (10 ms)
      ΓêÜ should warn when initialize is called twice (6 ms)
  Test 1: should create tickets table with all P0 columns on first init
    ΓêÜ Test 1: should create tickets table with all P0 columns on first init
  Test 2: should add missing P0 columns during migration
    ΓêÜ Test 2: should add missing P0 columns during migration
  Test 3: should not error when schema is already up-to-date
    ΓêÜ Test 3: should not error when schema is already up-to-date
  Test 4: should preserve existing data during migration
    ΓêÜ Test 4: should preserve existing data during migration (1 ms)

PASS tests/agents/custom/schema.test.ts
  Custom Agent Schema
    Basic Validation
      ΓêÜ Test 1: should validate a minimal valid agent (1 ms)
      ΓêÜ Test 2: should validate a complete agent with all fields (1 ms)
      ΓêÜ Test 3: should reject agent without required fields (1 ms)
      ΓêÜ Test 4: should reject agent with empty name (1 ms)
      ΓêÜ Test 5: should apply default values for optional fields (1 ms)
    Name Validation
      ΓêÜ Test 6: should accept valid agent names
      ΓêÜ Test 7: should reject reserved names (1 ms)
      ΓêÜ Test 8: should reject names with uppercase
      ΓêÜ Test 9: should reject names starting with number
      ΓêÜ Test 10: should reject names with spaces (1 ms)
      ΓêÜ Test 11: should reject names with special characters (1 ms)
      ΓêÜ Test 12: should reject names exceeding max length
      ΓêÜ Test 13: should reject empty names (1 ms)
    System Prompt Validation
      ΓêÜ Test 14: should accept valid system prompt
      ΓêÜ Test 15: should reject system prompt shorter than 10 chars (1 ms)
      ΓêÜ Test 16: should reject system prompt exceeding max length
      ΓêÜ Test 17: should accept prompt with variables
    Goals Validation
      ΓêÜ Test 18: should accept valid goals array (1 ms)
      ΓêÜ Test 19: should reject empty goals array
      ΓêÜ Test 20: should reject goals exceeding max count (1 ms)
      ΓêÜ Test 21: should reject goal exceeding max length
      ΓêÜ Test 22: should reject empty goal strings (1 ms)
    Checklist Validation
      ΓêÜ Test 23: should accept valid checklist (1 ms)
      ΓêÜ Test 24: should accept empty checklist
      ΓêÜ Test 25: should reject checklist exceeding max items (1 ms)
      ΓêÜ Test 26: should reject checklist item exceeding max length
    Custom Lists Validation
      ΓêÜ Test 27: should accept valid custom list (1 ms)
      ΓêÜ Test 28: should reject custom list with empty name (1 ms)
      ΓêÜ Test 29: should reject custom list with no items
      ΓêÜ Test 30: should reject duplicate custom list names (2 ms)
      ΓêÜ Test 31: should reject more than 7 custom lists (1 ms)
    Prompt Variables
      ΓêÜ Test 32: should extract variables from prompt (1 ms)
      ΓêÜ Test 33: should deduplicate repeated variables (1 ms)
      ΓêÜ Test 34: should return empty array for no variables
      ΓêÜ Test 35: should validate known variables
      ΓêÜ Test 36: should detect unknown variables (1 ms)
      ΓêÜ Test 37: should recognize all built-in variables (1 ms)
    Tool Type Guards
      ΓêÜ Test 38: should identify allowed tools (1 ms)
      ΓêÜ Test 39: should identify blocked tools (1 ms)
      ΓêÜ Test 40: should return false for unknown tools (1 ms)
    Default Template
      ΓêÜ Test 41: should create valid default template (1 ms)
      ΓêÜ Test 42: should convert spaces to hyphens in name (1 ms)
      ΓêÜ Test 43: should include agent name in system prompt
      ΓêÜ Test 44: should have at least one goal
    Routing Rules
      ΓêÜ Test 45: should accept valid routing rules (1 ms)
      ΓêÜ Test 46: should apply defaults for empty routing
      ΓêÜ Test 47: should reject invalid priority boost
      ΓêÜ Test 48: should reject invalid ticket type (1 ms)
    Metadata
      ΓêÜ Test 49: should accept valid semantic version (1 ms)
      ΓêÜ Test 50: should reject invalid version format (1 ms)
      ΓêÜ Test 51: should default version to 1.0.0
      ΓêÜ Test 52: should accept valid datetime for createdAt (1 ms)
      ΓêÜ Test 53: should limit tags to max count
    Constraint Constants
      ΓêÜ Test 54: should have reasonable constraint values (1 ms)
      ΓêÜ Test 55: should have all reserved names (1 ms)

PASS tests/ui/agentStatusTracker.test.ts
  AgentStatusTracker
    Singleton Instance
      ΓêÜ should return same instance on multiple calls (15 ms)
      ΓêÜ should initialize all agents to Idle status (2 ms)
    setAgentStatus
      ΓêÜ should set agent status to Active with result (3 ms)
      ΓêÜ should set agent status without result (undefined) (1 ms)
      ΓêÜ should update existing agent status (1 ms)
      ΓêÜ should set agent to Failed status with error message (1 ms)
      ΓêÜ should log agent status update
      ΓêÜ should truncate result in logs to 50 chars
      ΓêÜ should not include result in log if undefined (1 ms)
      ΓêÜ should handle empty string result (1 ms)
      ΓêÜ should update timestamp on each call (26 ms)
    getAgentStatus
      ΓêÜ should return agent status when it exists (1 ms)
      ΓêÜ should return undefined for non-existent agent (1 ms)
      ΓêÜ should return Idle status initially for all agents (1 ms)
      ΓêÜ should return same reference after multiple gets (5 ms)
    resetAll
      ΓêÜ should reset all agents to Idle status (1 ms)
      ΓêÜ should clear lastResult on reset (1 ms)
      ΓêÜ should log reset action
      ΓêÜ should reset only to Idle, not remove agents (1 ms)
      ΓêÜ should handle reset when agents already Idle
      ΓêÜ should reset multiple times independently
    getAllStatuses
      ΓêÜ should return map of all agent statuses (3 ms)
      ΓêÜ should return copy of internal map (not reference) (1 ms)
      ΓêÜ should include all four agents with initial Idle status (1 ms)
      ΓêÜ should include updated statuses after set operations (1 ms)
      ΓêÜ should include timestamp in all statuses after setAgentStatus
      ΓêÜ should reflect state after resetAll (1 ms)
    Complex Workflows
      ΓêÜ should handle planning workflow: Idle ΓåÆ Active ΓåÆ Waiting (1 ms)
      ΓêÜ should handle verification workflow: Idle ΓåÆ Active ΓåÆ Waiting with result
      ΓêÜ should handle error workflow: Idle ΓåÆ Active ΓåÆ Failed (1 ms)
      ΓêÜ should track multiple agents independently
    Edge Cases
      ΓêÜ should handle very long result strings
      ΓêÜ should handle special characters in result (1 ms)
      ΓêÜ should handle all valid status types (2 ms)
      ΓêÜ should handle rapid status updates (1 ms)
      ΓêÜ should handle getting status for all agent names (1 ms)
    currentTask field
      ΓêÜ should set currentTask via setAgentTask (1 ms)
      ΓêÜ should preserve currentTask when setAgentStatus is called without clearing it (3 ms)
      ΓêÜ should clear currentTask when set to undefined (2 ms)
      ΓêÜ should update timestamp when setting currentTask (22 ms)
      ΓêÜ should log currentTask changes (1 ms)
      ΓêÜ should truncate currentTask in logs to 50 chars
      ΓêÜ should handle setting task for non-existent agent gracefully (1 ms)
      ΓêÜ should clear currentTask on resetAll (1 ms)
    event emission
      ΓêÜ should expose onStatusChange event emitter
      ΓêÜ should fire event when setAgentStatus is called (1 ms)
      ΓêÜ should fire event when setAgentTask is called
      ΓêÜ should fire events for each agent on resetAll
      ΓêÜ should allow multiple listeners to subscribe
      ΓêÜ should not notify disposed listeners

PASS tests/agents/custom/preview.test.ts
  Custom Agent Preview
    previewAgent
      ΓêÜ Test 1: should execute preview with LLM call (3 ms)
      ΓêÜ Test 2: should include system prompt in result (1 ms)
      ΓêÜ Test 3: should include user message in result (1 ms)
      ΓêÜ Test 4: should return token usage (1 ms)
      ΓêÜ Test 5: should include timing information (1 ms)
      ΓêÜ Test 6: should estimate prompt tokens
      ΓêÜ Test 7: should skip LLM call in dry run mode (1 ms)
      ΓêÜ Test 8: should include mock response in dry run (4 ms)
      ΓêÜ Test 9: should still build system prompt in dry run (1 ms)
      ΓêÜ Test 10: should substitute variables (1 ms)
      ΓêÜ Test 11: should handle LLM errors gracefully (1 ms)
      ΓêÜ Test 12: should use streaming when callback provided (1 ms)
      ΓêÜ Test 13: should skip hardlock when option set (2 ms)
      ΓêÜ Test 14: should include hardlock by default (1 ms)
      ΓêÜ Test 15: should pass agent temperature to LLM (1 ms)
    validateAgentConfig
      ΓêÜ Test 16: should validate correct config (7 ms)
      ΓêÜ Test 17: should detect missing required fields (2 ms)
      ΓêÜ Test 18: should warn about short system prompt (1 ms)
      ΓêÜ Test 19: should warn about very long system prompt (1 ms)
      ΓêÜ Test 20: should warn about no goals (1 ms)
      ΓêÜ Test 21: should warn about too many goals (1 ms)
      ΓêÜ Test 22: should warn about very low temperature (1 ms)
      ΓêÜ Test 23: should warn about very high temperature (1 ms)
      ΓêÜ Test 24: should warn about long checklist (1 ms)
      ΓêÜ Test 25: should estimate token usage (1 ms)
      ΓêÜ Test 26: should detect name too long (1 ms)
      ΓêÜ Test 27: should detect empty name (3 ms)
      ΓêÜ Test 28: should detect invalid priority (1 ms)
    getPromptPreview
      ΓêÜ Test 29: should return complete system prompt (1 ms)
      ΓêÜ Test 30: should substitute variables (1 ms)
      ΓêÜ Test 31: should include checklist
      ΓêÜ Test 32: should include custom lists
    estimateTokenUsage
      ΓêÜ Test 33: should estimate system prompt tokens (1 ms)
      ΓêÜ Test 34: should estimate hardlock policy tokens (1 ms)
      ΓêÜ Test 35: should calculate total base tokens
      ΓêÜ Test 36: should calculate available conversation tokens
      ΓêÜ Test 37: should reduce available tokens for large prompts (1 ms)
    getSuggestedQueries
      ΓêÜ Test 38: should include default queries
      ΓêÜ Test 39: should add research queries for research agents
      ΓêÜ Test 40: should add documentation queries for doc agents (1 ms)
      ΓêÜ Test 41: should add review queries for review agents
      ΓêÜ Test 42: should add planning queries for architect agents (1 ms)
      ΓêÜ Test 43: should add debug queries for debug agents
      ΓêÜ Test 44: should not have duplicates (1 ms)
    generateContextualQuery
      ΓêÜ Test 45: should generate query based on first goal
      ΓêÜ Test 46: should generate contextual query (1 ms)
      ΓêÜ Test 47: should handle agent with no goals (1 ms)
      ΓêÜ Test 48: should return different queries on multiple calls (1 ms)
    DEFAULT_SAMPLE_QUERIES
      ΓêÜ Test 49: should have at least 5 queries (2 ms)
      ΓêÜ Test 50: should all be non-empty strings (2 ms)
      ΓêÜ Test 51: should include capability question (1 ms)
    Edge Cases
      ΓêÜ Test 52: should handle agent with empty custom lists (5 ms)
      ΓêÜ Test 53: should handle agent with many goals (1 ms)
      ΓêÜ Test 54: should handle unicode in agent config (1 ms)
      ΓêÜ Test 55: should handle special characters in query (2 ms)
      ΓêÜ Test 56: should handle null usage from LLM (1 ms)
      ΓêÜ Test 57: should handle validation of unknown fields (1 ms)
      ΓêÜ Test 58: should handle empty string query (1 ms)

PASS tests/agents/verification/verificationTeam.test.ts
  Verification Team
    TestParsers
      JestParser
        Test 1: should detect Jest output
          ΓêÜ detects PASS marker (1 ms)
          ΓêÜ detects FAIL marker (1 ms)
          ΓêÜ detects Test Suites line
        Test 2: should parse Jest summary
          ΓêÜ parses passed/failed counts (2 ms)
          ΓêÜ parses duration (1 ms)
        Test 3: should parse Jest failures
          ΓêÜ extracts failure information (2 ms)
        Test 4: should parse coverage
          ΓêÜ extracts coverage percentage (1 ms)
      MochaParser
        Test 5: should detect Mocha output
          ΓêÜ detects passing/failing
          ΓêÜ detects check marks
        Test 6: should parse Mocha summary
          ΓêÜ parses passing count (1 ms)
          ΓêÜ parses duration from passing line
          ΓêÜ parses pending tests (1 ms)
        Test 7: should parse Mocha test results
          ΓêÜ parses passing tests with checkmarks (1 ms)
          ΓêÜ parses failing tests (1 ms)
      VitestParser
        Test 8: should detect Vitest output
          ΓêÜ detects VITEST marker
      Auto-detection
        Test 9: should auto-detect framework
          ΓêÜ detects Jest (1 ms)
          ΓêÜ detects Mocha
          ΓêÜ returns unknown for unrecognized
      Test 10: formatTestResults
        ΓêÜ creates readable summary (1 ms)
        ΓêÜ shows skipped tests in output (1 ms)
        ΓêÜ shows pending tests in output
        ΓêÜ shows coverage percentage (1 ms)
      VitestParser extended
        ΓêÜ parses Vitest output correctly (1 ms)
      MochaParser extended
        ΓêÜ parses pending tests (1 ms)
        ΓêÜ parses error details for failures (7 ms)
      Parser utilities
        ΓêÜ getParser returns parser by name (1 ms)
        ΓêÜ getParser returns null for unknown parser
        ΓêÜ registerParser adds custom parser (1 ms)
    TaskBlockingManager
      Test 11: should create singleton instance
        ΓêÜ returns same instance on multiple calls (1 ms)
      Test 12: should block task for fix
        ΓêÜ creates block record (1 ms)
        ΓêÜ marks task as blocked (1 ms)
      Test 13: should track blocking relationships
        ΓêÜ tracks tasks blocked by fix
      Test 14: should unblock task
        ΓêÜ removes specific block
        ΓêÜ unblocks completely when last block removed (1 ms)
      Test 15: should unblock all
        ΓêÜ removes all blocks from task
      Test 16: should handle fix task completion
        ΓêÜ auto-unblocks original task
        ΓêÜ emits FIX_COMPLETED event (1 ms)
      Test 17: should handle fix task failure
        ΓêÜ keeps original task blocked (1 ms)
        ΓêÜ updates block reason (2 ms)
      Test 18: should get block status
        ΓêÜ returns complete status
      Test 19: helper functions
        ΓêÜ isTaskBlocked works
        ΓêÜ blockTaskForFix works (1 ms)
      Test 20: should reset properly
        ΓêÜ clears all data
    VerificationWatcher
      Test 21: should create singleton instance
        ΓêÜ returns same instance on multiple calls (1 ms)
      Test 22: should start and stop watching
        ΓêÜ starts watching (1 ms)
        ΓêÜ stops watching
      Test 23: should register watch requests
        ΓêÜ adds watch request for task (1 ms)
        ΓêÜ removes watch request (1 ms)
      Test 24: should get watch requests
        ΓêÜ returns all requests
      Test 25: should update config
        ΓêÜ updates debounce time (4 ms)
      Test 26: should dispose properly
        ΓêÜ cleans up all resources (1 ms)
      Test 27: should reset properly
        ΓêÜ creates new instance after reset
    Integration
      Test 28: test parsing triggers blocking
        ΓêÜ parses failure and creates block (1 ms)
      Test 29: watcher and blocking work together
        ΓêÜ watches for fix and unblocks when complete (1 ms)

PASS tests/mcpServer/tools/scanCodeBase.test.ts
  scanCodeBase
    CodebaseScanner
      Test 1: constructor
        ΓêÜ should create instance with default config (1 ms)
        ΓêÜ should create instance with custom config (1 ms)
      Test 2: scan
        ΓêÜ should return scan result (4 ms)
        ΓêÜ should scan files recursively (1 ms)
        ΓêÜ should exclude node_modules (1 ms)
      Test 3: file categorization
        ΓêÜ should categorize aligned files (1 ms)
        ΓêÜ should identify extra files (1 ms)
      Test 4: statistics
        ΓêÜ should calculate alignment score (7 ms)
        ΓêÜ should count total files (2 ms)
      Test 5: recommendations
        ΓêÜ should generate recommendations for missing files (1 ms)
        ΓêÜ should show success for aligned codebase (4 ms)
      Test 6: pattern matching
        ΓêÜ should include .ts files (1 ms)
        ΓêÜ should exclude .d.ts files by default (1 ms)
      Test 7: error handling
        ΓêÜ should handle non-existent directory (4 ms)
        ΓêÜ should handle PRD read error gracefully (1 ms)
    handleScanCodeBase
      Test 8: output formats
        ΓêÜ should return summary format by default (1 ms)
        ΓêÜ should return JSON format when requested (1 ms)
        ΓêÜ should return markdown format when requested (1 ms)
      Test 9: parameters
        ΓêÜ should use specified directory (1 ms)
        ΓêÜ should use custom include patterns (2 ms)
        ΓêÜ should use custom exclude patterns (1 ms)
    scanCodeBaseTool definition
      Test 10: tool schema
        ΓêÜ should have correct name (1 ms)
        ΓêÜ should have description
        ΓêÜ should have input schema (1 ms)
        ΓêÜ should define all parameters
        ΓêÜ should have no required parameters
    Test 11: markdown output
      ΓêÜ should include summary table (1 ms)
      ΓêÜ should include recommendations section when recommendations exist (2 ms)
    Test 12: file info extraction
      ΓêÜ should extract file size (1 ms)
      ΓêÜ should extract file type
    Test 13: alignment categorization
      ΓêÜ should categorize aligned files when expected files match (1 ms)
      ΓêÜ should categorize mismatched files correctly (1 ms)
    Test 14: markdown PRD parsing
      ΓêÜ should parse markdown PRD for file references (1 ms)
    Test 15: missing files markdown output
      ΓêÜ should include missing files section when files are missing
      ΓêÜ should include mismatched files section when files dont match requirements (22 ms)
    Test 16: summary format recommendations
      ΓêÜ should limit recommendations in summary format (2 ms)
    Test 17: content check option
      ΓêÜ should add content check note when checkContents is true (2 ms)
    Test 18: max depth handling
      ΓêÜ should respect maxDepth configuration (1 ms)
    Test 19: pattern matching edge cases
      ΓêÜ should handle complex glob patterns (1 ms)

PASS tests/agents/clarity/clarityAgent.test.ts
  ClarityScorer
    MT-011.3: 0-100 clarity scoring
      ΓêÜ Test 1: should initialize with default threshold of 85 (1 ms)
      ΓêÜ Test 2: should accept custom threshold
      ΓêÜ Test 3: should score reply and return result (2 ms)
      ΓêÜ Test 4: should emit scored event (2 ms)
    MT-011.7: Threshold detection
      ΓêÜ Test 5: should detect score below threshold
      ΓêÜ Test 6: should set needsFollowUp when below threshold
      ΓêÜ Test 7: should emit threshold-failed event when below threshold (1 ms)
      ΓêÜ Test 8: should allow threshold updates (1 ms)
    MT-011.13: Score color display
      ΓêÜ Test 9: should return red for scores below 60
      ΓêÜ Test 10: should return yellow for scores 60-84
      ΓêÜ Test 11: should return green for scores 85+ (1 ms)
    Weight normalization
      ΓêÜ Test 12: should normalize weights that do not sum to 1
    Threshold boundary cases
      ΓêÜ Test 13: should throw error for negative threshold (34 ms)
      ΓêÜ Test 14: should throw error for threshold over 100 (1 ms)
      ΓêÜ Test 15: should accept boundary values 0 and 100
    Weight updates
      ΓêÜ Test 16: should update weights with setWeights (1 ms)
      ΓêÜ Test 17: should re-normalize after partial weight update
    Scoring history
      ΓêÜ Test 18: should track scoring history (1 ms)
      ΓêÜ Test 19: should return empty array for unknown ticket (1 ms)
      ΓêÜ Test 20: should clear history for specific ticket
    Error handling
      ΓêÜ Test 21: should use fallback score on LLM failure (1 ms)
      ΓêÜ Test 22: should handle malformed JSON response gracefully (1 ms)
      ΓêÜ Test 23: should clamp scores to 0-100 range (14 ms)
      ΓêÜ Test 24: should handle NaN score as 50 (1 ms)
    Config access
      ΓêÜ Test 25: should return copy of config
  ClarityTrigger
    MT-011.2: Ticket reply review trigger
      ΓêÜ Test 12: should queue review after delay (2 ms)
      ΓêÜ Test 13: should skip reviews when disabled (1 ms)
      ΓêÜ Test 14: should track pending reviews
    MT-011.11: Priority boost
      ΓêÜ Test 15: should queue with P1 priority by default
      ΓêÜ Test 16: should boost lower priority to P1 (1 ms)
      ΓêÜ Test 17: should return false when boosting already P1 (1 ms)
    Queue management
      ΓêÜ Test 18: should cancel specific review (1 ms)
      ΓêÜ Test 19: should cancel all reviews (1 ms)
  FollowUpManager
    MT-011.8: Auto-reply generation
      ΓêÜ Test 20: should generate follow-up questions (1 ms)
      ΓêÜ Test 21: should limit questions to maxQuestions (1 ms)
    MT-011.9: Iteration limit
      ΓêÜ Test 22: should track iterations (1 ms)
      ΓêÜ Test 23: should stop at max iterations (1 ms)
      ΓêÜ Test 24: should emit max-iterations-reached event (1 ms)
    MT-011.10: Escalation
      ΓêÜ Test 25: should escalate with summary (1 ms)
      ΓêÜ Test 26: should emit escalated event (1 ms)
    MT-011.12: Ticket thread integration
      ΓêÜ Test 27: should post follow-up to ticket thread (1 ms)
  ClarityAgent
    Initialization
      ΓêÜ Test 28: should initialize all components (4 ms)
      ΓêÜ Test 29: should emit initialized event (1 ms)
      ΓêÜ Test 30: should be active after initialization (1 ms)
    Full review cycle
      ΓêÜ Test 31: should review reply and return scores (1 ms)
      ΓêÜ Test 32: should generate follow-up for low scores (1 ms)
    Shutdown
      ΓêÜ Test 33: should shutdown cleanly (7 ms)

PASS tests/agents/answer/validation.test.ts
  Answer Validation System
    validateAnswer()
      Basic Validation
        ΓêÜ Test 1: should validate non-empty answer (28 ms)
        ΓêÜ Test 2: should reject empty answer (3 ms)
        ΓêÜ Test 3: should reject whitespace-only answer (2 ms)
        ΓêÜ Test 4: should validate answer within length limit (4 ms)
        ΓêÜ Test 5: should warn about answer exceeding length limit (1 ms)
      Citation Validation
        ΓêÜ Test 6: should pass without citations when not required (2 ms)
        ΓêÜ Test 7: should fail when citations required but missing (1 ms)
        ΓêÜ Test 8: should pass with citations when required
        ΓêÜ Test 9: should warn about few citations (4 ms)
        ΓêÜ Test 10: should pass with enough citations (1 ms)
      Confidence Validation
        ΓêÜ Test 11: should pass with high confidence citations (1 ms)
        ΓêÜ Test 12: should warn about low confidence (2 ms)
        ΓêÜ Test 13: should calculate average confidence from multiple citations
        ΓêÜ Test 14: should use default confidence when no citations (1 ms)
      Hallucination Detection
        ΓêÜ Test 15: should detect potential hallucination patterns (4 ms)
        ΓêÜ Test 16: should detect "widely known" patterns (2 ms)
        ΓêÜ Test 17: should detect "studies have shown" without citation (1 ms)
        ΓêÜ Test 18: should not flag hallucination with supporting citation (4 ms)
        ΓêÜ Test 19: should skip hallucination check when disabled (1 ms)
      Unsupported Claims Detection
        ΓêÜ Test 20: should detect definitive statements without support (4 ms)
        ΓêÜ Test 21: should detect "you must always" patterns (2 ms)
        ΓêÜ Test 22: should not flag with authoritative citation (6 ms)
      Score Calculation
        ΓêÜ Test 23: should start at 100 for valid answer (1 ms)
        ΓêÜ Test 24: should deduct points for issues
        ΓêÜ Test 25: should not go below 0 (1 ms)
        ΓêÜ Test 26: should not exceed 100 (1 ms)
      Validity Determination
        ΓêÜ Test 27: should be invalid with errors
        ΓêÜ Test 28: should be valid with only warnings
        ΓêÜ Test 29: should be invalid with score below 50
      Config Defaults
        ΓêÜ Test 30: should use default config values (1 ms)
        ΓêÜ Test 31: should merge partial config (1 ms)
    validateCitedAnswer()
      ΓêÜ Test 32: should validate cited answer structure (1 ms)
      ΓêÜ Test 33: should add warning for unsupported answer with low confidence (8 ms)
      ΓêÜ Test 34: should not add warning for supported answer (1 ms)
      ΓêÜ Test 35: should deduct score for unsupported answer
    quickValidate()
      ΓêÜ Test 36: should return true for valid answer
      ΓêÜ Test 37: should return false for empty answer (5 ms)
      ΓêÜ Test 38: should return false for null-ish answer
      ΓêÜ Test 39: should return false for whitespace-only answer (1 ms)
      ΓêÜ Test 40: should return false for very long answer (1 ms)
      ΓêÜ Test 41: should return false for answer containing [ERROR]
      ΓêÜ Test 42: should return false for answer containing undefined (2 ms)
      ΓêÜ Test 43: should return true for answer at length limit (1 ms)
      ΓêÜ Test 44: should return true for answer with special characters
      ΓêÜ Test 45: should return true for answer with unicode (1 ms)
    Edge Cases
      ΓêÜ Test 46: should handle answer with only numbers (1 ms)
      ΓêÜ Test 47: should handle answer with newlines (1 ms)
      ΓêÜ Test 48: should handle citations with missing optional fields (2 ms)
      ΓêÜ Test 49: should handle empty config object
      ΓêÜ Test 50: should handle extreme config values (1 ms)

PASS tests/agents/orchestrator/loop.test.ts
  OrchestrationLoop
    constructor
      ΓêÜ Test 1: should create loop with default config (5 ms)
      ΓêÜ Test 2: should accept custom config (2 ms)
    start()
      ΓêÜ Test 3: should start the loop (2 ms)
      ΓêÜ Test 4: should not start if already running (1 ms)
      ΓêÜ Test 5: should run tick immediately on start (1 ms)
      ΓêÜ Test 6: should continue ticking at poll interval (1 ms)
    stop()
      ΓêÜ Test 7: should stop the loop (3 ms)
      ΓêÜ Test 8: should stop ticking after stop (2 ms)
    pause() / resume()
      ΓêÜ Test 9: should pause the loop (4 ms)
      ΓêÜ Test 10: should not process tasks while paused (1 ms)
      ΓêÜ Test 11: should resume the loop (1 ms)
    task processing
      ΓêÜ Test 12: should not assign tasks when Coding AI is busy (1 ms)
      ΓêÜ Test 13: should assign ready task to Coding AI (2 ms)
      ΓêÜ Test 14: should check for timed out assignments (4 ms)
      ΓêÜ Test 14b: should handle null task from getTask (1 ms)
      ΓêÜ Test 14c: should log warning when task routing fails (1 ms)
      ΓêÜ Test 14d: should detect potential deadlock (2 ms)
    max iterations
      ΓêÜ Test 15: should stop after max iterations (1 ms)
      ΓêÜ Test 16: should run indefinitely when maxIterations is 0 (2 ms)
    recordCompletion()
      ΓêÜ Test 17: should increment completed count on pass (1 ms)
      ΓêÜ Test 18: should increment failed count on fail (1 ms)
      ΓêÜ Test 19: should update lastProgressAt (1 ms)
    onStateChange()
      ΓêÜ Test 20: should register state change listener (1 ms)
      ΓêÜ Test 21: should unregister listener on dispose (1 ms)
      ΓêÜ Test 22: should handle listener errors (2 ms)
    getSummary()
      ΓêÜ Test 23: should return formatted summary (1 ms)
      ΓêÜ Test 24: should show PAUSED status when paused (1 ms)
      ΓêÜ Test 25: should show STOPPED status when stopped (1 ms)
    Singleton
      ΓêÜ Test 26: initializeOrchestrationLoop() should create new instance (2 ms)
      ΓêÜ Test 27: initializeOrchestrationLoop() should stop existing instance (1 ms)
      ΓêÜ Test 28: getOrchestrationLoop() should return singleton (4 ms)
      ΓêÜ Test 29: resetOrchestrationLoop() should reset singleton (1 ms)
    error handling
      ΓêÜ Test 30: should handle tick errors gracefully (1 ms)
      ΓêÜ Test 31: should record errors in lastErrors (1 ms)
      ΓêÜ Test 32: should limit lastErrors to 10 (2 ms)

PASS tests/agents/answer/handlers/askQuestion.test.ts
  askQuestion Handler
    handleAskQuestion()
      Request Validation
        ΓêÜ Test 1: should accept valid request (45 ms)
        ΓêÜ Test 2: should reject request without agentId (2 ms)
        ΓêÜ Test 3: should reject request with short question (2 ms)
        ΓêÜ Test 4: should reject request without invokeTrigger when required (3 ms)
        ΓêÜ Test 5: should accept request without invokeTrigger when not required (2 ms)
        ΓêÜ Test 6: should reject choice question without options (7 ms)
        ΓêÜ Test 7: should reject choice question with single option (1 ms)
        ΓêÜ Test 8: should accept choice question with valid options (1 ms)
      Pending Question Limit
        ΓêÜ Test 9: should reject when max pending reached (5 ms)
        ΓêÜ Test 10: should allow new questions after limit when old ones expire (2 ms)
      Auto-Answer/Caching
        ΓêÜ Test 11: should auto-answer yes/no question with yes for should questions (1 ms)
        ΓêÜ Test 12: should use default value for proceed questions (2 ms)
        ΓêÜ Test 13: should not auto-answer when disabled (1 ms)
      Timeout Handling
        ΓêÜ Test 14: should use custom timeout (1 ms)
        ΓêÜ Test 15: should use default timeout when not specified (1 ms)
        ΓêÜ Test 16: should clean up question after timeout (1 ms)
      Error Handling
        ΓêÜ Test 17: should handle errors gracefully (5 ms)
    answerQuestion()
      ΓêÜ Test 18: should answer pending question (1 ms)
      ΓêÜ Test 19: should return false for unknown question (1 ms)
      ΓêÜ Test 20: should return false for already answered question (1 ms)
      ΓêÜ Test 21: should store selected index for choice questions (1 ms)
    getQuestionStatus()
      ΓêÜ Test 22: should return null for unknown question (1 ms)
      ΓêÜ Test 23: should return pending status (1 ms)
      ΓêÜ Test 24: should return answered status with answer (1 ms)
      ΓêÜ Test 25: should return null after expiration (question is cleaned up) (1 ms)
    getPendingQuestions()
      ΓêÜ Test 26: should return empty array when no questions (2 ms)
      ΓêÜ Test 27: should return pending questions (1 ms)
      ΓêÜ Test 28: should not include answered questions (1 ms)
      ΓêÜ Test 29: should not include expired questions (2 ms)
    clearPendingQuestions()
      ΓêÜ Test 30: should clear all pending questions (4 ms)
      ΓêÜ Test 31: should reset question counter (2 ms)
    validateAskQuestionRequest()
      ΓêÜ Test 32: should return null for non-object (2 ms)
      ΓêÜ Test 33: should return null without agentId (1 ms)
      ΓêÜ Test 34: should return null without question (1 ms)
      ΓêÜ Test 35: should return valid request with required fields (1 ms)
      ΓêÜ Test 36: should use defaults for optional fields (1 ms)
      ΓêÜ Test 37: should preserve optional fields when provided (1 ms)
      ΓêÜ Test 38: should handle invalid option types (1 ms)
    Question Types
      ΓêÜ Test 39: should handle clarification questions (1 ms)
      ΓêÜ Test 40: should handle approval questions (1 ms)
      ΓêÜ Test 41: should handle information questions (1 ms)
    Priority Levels
      ΓêÜ Test 42: should accept low priority (1 ms)
      ΓêÜ Test 43: should accept high priority (1 ms)
      ΓêÜ Test 44: should accept urgent priority (1 ms)
    Edge Cases
      ΓêÜ Test 45: should handle very long questions (1 ms)
      ΓêÜ Test 46: should handle unicode in questions (1 ms)
      ΓêÜ Test 47: should handle context parameter (33 ms)

PASS tests/agents/orchestrator/deadlock.test.ts
  DeadlockDetector
    detectDeadlock() - empty queue
      ΓêÜ Test 1: should return no deadlock for empty queue (1 ms)
      ΓêÜ Test 2: should check pending, blocked, and ready queues (1 ms)
    detectDeadlock() - no dependencies
      ΓêÜ Test 3: should return no deadlock for tasks without dependencies (3 ms)
      ΓêÜ Test 4: should return no deadlock for undefined dependencies (1 ms)
    detectDeadlock() - linear dependencies
      ΓêÜ Test 5: should return no deadlock for linear dependency chain (7 ms)
      ΓêÜ Test 6: should handle dependencies to non-existent tasks
    detectDeadlock() - simple cycle
      ΓêÜ Test 7: should detect simple A <-> B deadlock (2 ms)
      ΓêÜ Test 8: should detect self-referencing deadlock (2 ms)
    detectDeadlock() - complex cycles
      ΓêÜ Test 9: should detect A -> B -> C -> A cycle (1 ms)
      ΓêÜ Test 10: should detect cycle in larger graph with non-cyclic nodes (2 ms)
    cycle description
      ΓêÜ Test 11: should generate human-readable cycle description
      ΓêÜ Test 12: should use task IDs when titles not available (2 ms)
    suggested fix
      ΓêÜ Test 13: should suggest removing dependency for 2-node cycle (1 ms)
      ΓêÜ Test 14: should provide multiple options for larger cycles (1 ms)
    checkAndNotify()
      ΓêÜ Test 15: should notify boss on deadlock detection (1 ms)
      ΓêÜ Test 16: should not notify boss when no deadlock (1 ms)
      ΓêÜ Test 17: should return detection result (2 ms)
    detectPotentialDeadlock()
      ΓêÜ Test 18: should detect blocked tasks with no resolution path (1 ms)
      ΓêÜ Test 19: should return no deadlock when blocked tasks have resolvable dependencies
      ΓêÜ Test 20: should detect stuck tasks with pending dependencies
    logging
      ΓêÜ Test 21: should log warning when cycle detected (1 ms)
    Singleton
      ΓêÜ Test 22: getDeadlockDetector() should return singleton instance
      ΓêÜ Test 23: resetDeadlockDetectorForTests() should reset singleton
    Edge Cases
      ΓêÜ Test 24: should handle single task with no dependencies
      ΓêÜ Test 25: should handle mixed task sources (pending, blocked, ready) (1 ms)
      ΓêÜ Test 26: should handle tasks with multiple dependencies (3 ms)
      ΓêÜ Test 27: should handle cycle with multiple dependencies per task (3 ms)
      ΓêÜ Test 28: should handle large number of tasks (3 ms)

PASS tests/agents/answer/prdContext.test.ts
  PRD Context Extractor
    Constructor
      ΓêÜ Test 1: should create extractor with workspace path (4 ms)
      ΓêÜ Test 2: should create extractor without workspace path
    extractContext()
      ΓêÜ Test 3: should return empty result when PRD not found (2 ms)
      ΓêÜ Test 4: should extract relevant sections for question (2 ms)
      ΓêÜ Test 5: should prioritize sections with keyword matches (1 ms)
      ΓêÜ Test 6: should find authentication-related sections (1 ms)
      ΓêÜ Test 7: should respect maxTokens limit (1 ms)
      ΓêÜ Test 8: should include at least one section when all are relevant (1 ms)
      ΓêÜ Test 9: should handle read errors gracefully (1 ms)
      ΓêÜ Test 10: should use cached sections on subsequent calls (3 ms)
    Markdown Parsing
      ΓêÜ Test 11: should parse heading levels correctly (1 ms)
      ΓêÜ Test 12: should handle PRD without headings (1 ms)
      ΓêÜ Test 13: should handle empty PRD (1 ms)
      ΓêÜ Test 14: should preserve content between headings (1 ms)
    Keyword Extraction
      ΓêÜ Test 15: should extract meaningful keywords (1 ms)
      ΓêÜ Test 16: should handle questions with special characters (1 ms)
      ΓêÜ Test 17: should limit keyword count (1 ms)
    Section Scoring
      ΓêÜ Test 18: should score heading matches higher (1 ms)
      ΓêÜ Test 19: should boost shorter focused sections (1 ms)
      ΓêÜ Test 20: should handle no matching sections (6 ms)
    formatAsContext()
      ΓêÜ Test 21: should format sections with headings (1 ms)
      ΓêÜ Test 22: should separate sections with dividers (1 ms)
      ΓêÜ Test 23: should handle empty sections array (1 ms)
      ΓêÜ Test 24: should handle section without heading (1 ms)
    Cache Management
      ΓêÜ Test 25: should refresh cache after timeout (14 ms)
      ΓêÜ Test 26: should clear cache on clearCache() (1 ms)
      ΓêÜ Test 27: should clear cache when path changes
    createPRDContextExtractor()
      ΓêÜ Test 28: should create extractor with factory function
      ΓêÜ Test 29: should create extractor without workspace path (2 ms)
    Token Estimation
      ΓêÜ Test 30: should estimate tokens based on content length (1 ms)
    Edge Cases
      ΓêÜ Test 31: should handle PRD with only whitespace (1 ms)
      ΓêÜ Test 32: should handle very long PRD (8 ms)
      ΓêÜ Test 33: should handle question with only stop words (1 ms)
      ΓêÜ Test 34: should handle unicode in PRD (1 ms)
      ΓêÜ Test 35: should truncate very long sections (1 ms)

PASS tests/agents/orchestrator/boss.test.ts
  BossNotificationManager
    constructor
      ΓêÜ Test 1: should create instance with empty notifications (2 ms)
    notify()
      ΓêÜ Test 2: should create notification with unique ID and timestamp (2 ms)
      ΓêÜ Test 3: should not notify after disposal (1 ms)
      ΓêÜ Test 4: should aggregate notifications within delay window (1 ms)
      ΓêÜ Test 5: should sort notifications by priority when flushing (1 ms)
      ΓêÜ Test 6: should suppress notifications beyond max batch size (2 ms)
    VS Code notifications
      ΓêÜ Test 7: should show error message for critical priority (1 ms)
      ΓêÜ Test 8: should show error message for error priority (1 ms)
      ΓêÜ Test 9: should show warning message for warning priority (1 ms)
      ΓêÜ Test 10: should show info message for info priority (1 ms)
      ΓêÜ Test 11: should include taskId prefix when provided (1 ms)
      ΓêÜ Test 12: should include actions for error notifications (1 ms)
    onNotification()
      ΓêÜ Test 13: should register and call callbacks (12 ms)
      ΓêÜ Test 14: should dispose callback registration (2 ms)
      ΓêÜ Test 15: should handle callback errors gracefully (1 ms)
    notifyError()
      ΓêÜ Test 16: should create error notification with actions (5 ms)
    notifyDeadlock()
      ΓêÜ Test 17: should create critical deadlock notification (2 ms)
      ΓêÜ Test 18: should truncate long task lists in deadlock message (8 ms)
    notifyGateFailure()
      ΓêÜ Test 19: should create gate failure notification (3 ms)
    notifyRetryLimitExceeded()
      ΓêÜ Test 20: should create retry limit exceeded notification (15 ms)
    acknowledge()
      ΓêÜ Test 21: should mark notification as acknowledged (2 ms)
      ΓêÜ Test 22: should handle acknowledging non-existent notification (2 ms)
    getUnacknowledged()
      ΓêÜ Test 23: should return only unacknowledged notifications (2 ms)
      ΓêÜ Test 24: should sort by timestamp descending (7 ms)
    getNotification()
      ΓêÜ Test 25: should return notification by ID (9 ms)
      ΓêÜ Test 26: should return undefined for non-existent ID (1 ms)
    clearAll()
      ΓêÜ Test 27: should clear all notifications (4 ms)
    dispose()
      ΓêÜ Test 28: should dispose and clear resources (2 ms)
      ΓêÜ Test 29: should cancel pending aggregation timer (2 ms)
    Singleton
      ΓêÜ Test 30: getBossNotificationManager() should return singleton instance (11 ms)
      ΓêÜ Test 31: resetBossNotificationManagerForTests() should reset singleton (8 ms)
      ΓêÜ Test 32: reset should dispose existing instance (1 ms)
    Edge Cases
      ΓêÜ Test 33: should handle empty message (48 ms)
      ΓêÜ Test 34: should handle special characters in message (4 ms)
      ΓêÜ Test 35: should handle very long messages (8 ms)

PASS tests/cache/cacheManagement.spec.ts
  Cache Management
    Structure - MT-004.1
      ΓêÜ Test 1: should create all required directories (17 ms)
      ΓêÜ Test 2: should handle existing directories gracefully (11 ms)
      ΓêÜ Test 3: should validate cache structure (9 ms)
      ΓêÜ Test 4: should clean up old temp files (14 ms)
    Storage - MT-004.2
      ΓêÜ Test 5: should save and load payloads (15 ms)
      ΓêÜ Test 6: should detect duplicate payloads (17 ms)
      ΓêÜ Test 7: should delete payloads (10 ms)
      ΓêÜ Test 8: should calculate payload size (8 ms)
      ΓêÜ Test 9: should list all payloads (45 ms)
      ΓêÜ Test 10: should generate consistent hashes (6 ms)
    Index - MT-004.3
      ΓêÜ Test 11: should load and save cache index (10 ms)
      ΓêÜ Test 12: should search index with filters (14 ms)
      ΓêÜ Test 13: should update last accessed time (25 ms)
      ΓêÜ Test 14: should calculate cache statistics (11 ms)
    Retention - MT-004.4
      ΓêÜ Test 15: should identify expired items (11 ms)
      ΓêÜ Test 16: should apply retention policy (26 ms)
      ΓêÜ Test 17: should format item age correctly (10 ms)
    Pruning - MT-004.5
      ΓêÜ Test 18: should prune when size exceeds threshold (7 ms)
      ΓêÜ Test 19: should preserve minimum items (11 ms)
      ΓêÜ Test 20: should format bytes correctly (11 ms)
      ΓêÜ Test 21: should get cache size info (42 ms)
    Auto-Refresh - MT-004.6
      ΓêÜ Test 22: should identify stale items (11 ms)
      ΓêÜ Test 23: should calculate refresh priority (6 ms)
      ΓêÜ Test 24: should sort items by priority (7 ms)
    Change Detection - MT-004.7
      ΓêÜ Test 25: should compute file hash (9 ms)
      ΓêÜ Test 26: should register file hash (14 ms)
      ΓêÜ Test 27: should detect file changes (14 ms)
      ΓêÜ Test 28: should untrack files (19 ms)
    Error Recovery
      ΓêÜ Test 29: should handle corrupted index gracefully (9 ms)
      ΓêÜ Test 30: should handle missing files during deletion (26 ms)

PASS tests/agents/orchestrator/state.test.ts
  OrchestratorStateManager
    constructor
      ΓêÜ Test 1: should create manager with session ID (5 ms)
      ΓêÜ Test 2: should use workspace path for state file (1 ms)
    initialize()
      ΓêÜ Test 3: should create new state file if not exists (2 ms)
      ΓêÜ Test 4: should load existing state file (2 ms)
      ΓêÜ Test 5: should warn if in-progress task found (1 ms)
      ΓêÜ Test 6: should start auto-save after initialization (1 ms)
      ΓêÜ Test 7: should handle initialization errors (1 ms)
    saveState()
      ΓêÜ Test 8: should save state atomically (1 ms)
      ΓêÜ Test 9: should create directory if not exists (3 ms)
      ΓêÜ Test 10: should return false on error (1 ms)
      ΓêÜ Test 11: should update timestamp on save (1 ms)
    setCurrentTask() / getCurrentTask()
      ΓêÜ Test 12: should set and get current task (1 ms)
      ΓêÜ Test 13: should allow null task (2 ms)
    verification queue
      ΓêÜ Test 14: should add to verification queue (2 ms)
      ΓêÜ Test 15: should not add duplicate to queue (1 ms)
      ΓêÜ Test 16: should remove from verification queue (1 ms)
      ΓêÜ Test 17: should return copy of queue (3 ms)
    mode
      ΓêÜ Test 18: should set and get mode (1 ms)
      ΓêÜ Test 19: should support auto mode (1 ms)
      ΓêÜ Test 20: should support paused mode (1 ms)
    checkpoints
      ΓêÜ Test 21: should create checkpoint (1 ms)
      ΓêÜ Test 22: should include state snapshot in checkpoint (1 ms)
      ΓêÜ Test 23: should limit checkpoints to maxCheckpoints (2 ms)
      ΓêÜ Test 24: should restore from checkpoint (3 ms)
      ΓêÜ Test 25: should return false for non-existent checkpoint (1 ms)
      ΓêÜ Test 26: should log checkpoint creation (1 ms)
    paused tasks
      ΓêÜ Test 27: should pause a task (2 ms)
      ΓêÜ Test 28: should not duplicate paused task (1 ms)
      ΓêÜ Test 29: should resume a task (13 ms)
      ΓêÜ Test 30: should handle resuming non-paused task (2 ms)
    getState()
      ΓêÜ Test 31: should return copy of state (2 ms)
      ΓêÜ Test 32: should include all state properties (4 ms)
    dispose()
      ΓêÜ Test 33: should stop auto-save on dispose (1 ms)
      ΓêÜ Test 34: should save dirty state on dispose (1 ms)
    auto-save
      ΓêÜ Test 35: should save state periodically when dirty (1 ms)
      ΓêÜ Test 36: should not save when not dirty (11 ms)
      ΓêÜ Test 37: stopAutoSave() should stop auto-save interval (1 ms)
      ΓêÜ Test 37b: should clear existing auto-save interval on re-initialize (1 ms)
    version migration
      ΓêÜ Test 38: should migrate older state versions (3 ms)
    Singleton
      ΓêÜ Test 39: getOrchestratorStateManager() should return singleton (1 ms)
      ΓêÜ Test 40: resetOrchestratorStateManagerForTests() should reset singleton (1 ms)
      ΓêÜ Test 41: initializeOrchestratorState() should initialize singleton (1 ms)
    Edge Cases
      ΓêÜ Test 42: should handle corrupted state file (1 ms)
      ΓêÜ Test 43: should handle empty state file (1 ms)

PASS tests/cache/pruning.test.ts
  Cache Pruning
    ΓêÜ Test 1: should format bytes for display (1 ms)
    ΓêÜ Test 2: should return empty prune list when under threshold (1 ms)
    ΓêÜ Test 3: should calculate cache size info (2 ms)
    ΓêÜ Test 4: should prune least recently used items (7 ms)
    ΓêÜ Test 5: should schedule size pruning (6 ms)
    ΓêÜ Test 6: should return empty prune list on load errors (4 ms)
    ΓêÜ Test 7: should report errors when deletion fails (1 ms)
    ΓêÜ Test 8: should return defaults when size info fails (2 ms)
    ΓêÜ Test 9: should handle deletion throwing an error (1 ms)
    ΓêÜ Test 10: should handle loadCacheIndex throwing in pruneCacheLRU (1 ms)
    ΓêÜ Test 11: should respect MIN_ITEMS_TO_KEEP in pruneCacheLRU (1 ms)
    ΓêÜ Test 12: should respect MIN_ITEMS_TO_KEEP in getPruneableItems (3 ms)
    ΓêÜ Test 13: should format various byte sizes correctly
    ΓêÜ Test 14: should handle no items to delete when minimum reached
    ΓêÜ Test 15: should sort by lastAccessedAt when available
    ΓêÜ Test 16: should use cachedAt when lastAccessedAt is missing
    ΓêÜ Test 17: should handle empty items array in getCacheSizeInfo
    ΓêÜ Test 18: should stop pruning once below threshold (2 ms)
    ΓêÜ Test 19: should handle mixed success/failure in deletion (1 ms)
    ΓêÜ Test 20: should calculate totalMB correctly
    ΓêÜ Test 21: should export MIN_ITEMS_TO_KEEP constant (1 ms)
    ΓêÜ Test 22: should export DEFAULT_SIZE_THRESHOLD constant

PASS tests/agents/orchestrator/recovery.test.ts
  ErrorRecoveryManager
    handleFailure() - basic
      ΓêÜ Test 1: should handle first failure (3 ms)
      ΓêÜ Test 2: should log failure warning (9 ms)
      ΓêÜ Test 3: should track failure in retry state (5 ms)
    handleFailure() - retries
      ΓêÜ Test 4: should retry on first runtime error (1 ms)
      ΓêÜ Test 5: should increment retry count on each failure (1 ms)
      ΓêÜ Test 6: should not retry validation errors (1 ms)
      ΓêÜ Test 7: should not retry dependency errors (1 ms)
      ΓêÜ Test 8: should apply exponential backoff (1 ms)
    handleFailure() - escalation
      ΓêÜ Test 9: should escalate after max retries (3 ms)
      ΓêÜ Test 10: should notify boss on escalation (6 ms)
      ΓêÜ Test 11: should log escalation as error (1 ms)
    handleFailure() - investigation
      ΓêÜ Test 12: should create investigation ticket for validation errors (2 ms)
      ΓêÜ Test 13: should include modified files in investigation (1 ms)
      ΓêÜ Test 14: should include stack trace in investigation (1 ms)
    getRetryCount()
      ΓêÜ Test 15: should return 0 for unknown task (1 ms)
      ΓêÜ Test 16: should return current retry count (2 ms)
    canRetry()
      ΓêÜ Test 17: should return true for new task (1 ms)
      ΓêÜ Test 18: should return true before max retries (1 ms)
      ΓêÜ Test 19: should return false after max retries (1 ms)
    resetRetryCount()
      ΓêÜ Test 20: should reset retry count after successful completion (2 ms)
      ΓêÜ Test 21: should log reset (1 ms)
    getRecoveryHistory()
      ΓêÜ Test 22: should return empty array initially (2 ms)
      ΓêÜ Test 23: should track all recovery actions (2 ms)
    getFailureHistory()
      ΓêÜ Test 24: should return empty array for unknown task (1 ms)
      ΓêÜ Test 25: should return all failures for a task (1 ms)
    clear()
      ΓêÜ Test 26: should clear all recovery state (4 ms)
      ΓêÜ Test 27: should log clear action (1 ms)
    Singleton
      ΓêÜ Test 28: getErrorRecoveryManager() should return singleton (4 ms)
      ΓêÜ Test 29: resetErrorRecoveryManagerForTests() should reset singleton (1 ms)
    Edge Cases
      ΓêÜ Test 30: should handle unknown error type (3 ms)
      ΓêÜ Test 31: should handle empty error message (2 ms)
      ΓêÜ Test 32: should handle multiple tasks independently (1 ms)

PASS tests/llm/queue.test.ts
  LLMQueue
    MT-010.1: Queue data structure
      ΓêÜ Test 1: should initialize with empty queue (5 ms)
      ΓêÜ Test 2: should return promise on enqueue (6 ms)
      ΓêÜ Test 3: should enqueue with priority ordering (1 ms)
      ΓêÜ Test 4: should enqueue with context data (1 ms)
      ΓêÜ Test 5: should enqueue with system prompt (1 ms)
    MT-010.2: Single-threaded execution
      ΓêÜ Test 6: should limit processing to max 1 (1 ms)
      ΓêÜ Test 7: should complete and process next (1 ms)
      ΓêÜ Test 8: should handle complete when no request processing
      ΓêÜ Test 9: should track completion stats (2 ms)
    MT-010.4: Queue statistics
      ΓêÜ Test 10: should have correct stats shape (1 ms)
      ΓêÜ Test 11: should start empty (4 ms)
      ΓêÜ Test 12: should not be empty after enqueue (1 ms)
      ΓêÜ Test 13: should report full when at max capacity (1 ms)
      ΓêÜ Test 14: should calculate average times (2 ms)
      ΓêÜ Test 15: should reset stats (1 ms)
    MT-010.6: Error and timeout handling
      ΓêÜ Test 16: should handle fail when no request processing (3 ms)
      ΓêÜ Test 17: should fail current request (25 ms)
      ΓêÜ Test 18: should handle queue timeout (48 ms)
      ΓêÜ Test 19: should track timeout stats (2 ms)
      ΓêÜ Test 20: should emit timeout event on queue timeout (1 ms)
    MT-010.8: Queue drain and shutdown
      ΓêÜ Test 21: should cancel pending request (2 ms)
      ΓêÜ Test 22: should not cancel processing request (1 ms)
      ΓêÜ Test 23: should return false for non-existent cancel (1 ms)
      ΓêÜ Test 24: should clear all pending requests (3 ms)
      ΓêÜ Test 25: should reject new requests when shutting down (4 ms)
      ΓêÜ Test 26: should reset shutdown state (1 ms)
      ΓêÜ Test 27: should return cancelled requests on shutdown (1 ms)
      ΓêÜ Test 28: should emit full event when queue is full (1 ms)
      ΓêÜ Test 29: should reject on full when option set (2 ms)
      ΓêÜ Test 30: should emit drain when queue empties (1 ms)
    EventEmitter API
      ΓêÜ Test 31: should expose EventEmitter methods (1 ms)
      ΓêÜ Test 32: should emit enqueue event (1 ms)
      ΓêÜ Test 33: should emit dequeue event (1 ms)
      ΓêÜ Test 34: should emit complete event (2 ms)
      ΓêÜ Test 35: should emit error event on fail (1 ms)
    Singleton pattern
      ΓêÜ Test 36: should get singleton instance (2 ms)
      ΓêÜ Test 37: should reset singleton for tests (1 ms)
    Config loading
      ΓêÜ Test 38: should handle config not initialized (3 ms)
    Edge cases
      ΓêÜ Test 39: should handle shutdown with wait for current (4 ms)
      ΓêÜ Test 40: should skip processing timeout if already completed (2 ms)
      ΓêÜ Test 41: should emit cancelled event (1 ms)

PASS tests/services/ticketDb/migrations.test.ts
  Schema Migration System (MT-005.5b)
    Migration Registry
      ΓêÜ Test 1: should have migrations defined (1 ms)
      ΓêÜ Test 2: should have sequential version numbers (1 ms)
      ΓêÜ Test 3: should have descriptions for all migrations (2 ms)
      ΓêÜ Test 4: should have up and down SQL for all migrations (1 ms)
      ΓêÜ Test 5: should have first migration creating tickets table
    ensureVersionTable
      ΓêÜ Test 6: should create schema_versions table
    getCurrentVersion
      ΓêÜ Test 7: should return 0 when no migrations applied
      ΓêÜ Test 8: should return 0 when version table does not exist
      ΓêÜ Test 9: should return highest applied version (1 ms)
    getAppliedVersions
      ΓêÜ Test 10: should return empty array when no migrations applied
      ΓêÜ Test 11: should return applied versions
      ΓêÜ Test 12: should return empty for non-existent table (1 ms)
    migrateUp
      ΓêÜ Test 13: should apply all migrations from version 0 (1 ms)
      ΓêÜ Test 14: should apply migrations up to target version (2 ms)
      ΓêÜ Test 15: should skip already applied migrations (1 ms)
      ΓêÜ Test 16: should handle already up-to-date database
      ΓêÜ Test 17: should stop on migration error
      ΓêÜ Test 18: should record each migration in schema_versions
    migrateDown
      ΓêÜ Test 19: should rollback to target version (1 ms)
      ΓêÜ Test 20: should rollback all migrations to version 0 (1 ms)
      ΓêÜ Test 21: should handle already at target version (1 ms)
      ΓêÜ Test 22: should remove version records on rollback
      ΓêÜ Test 23: should stop on rollback error (2 ms)
    getMigrationStatus
      ΓêÜ Test 24: should show all pending for fresh database (2 ms)
      ΓêÜ Test 25: should show up-to-date after all migrations (1 ms)
      ΓêÜ Test 26: should show partial progress
    Helper Functions
      ΓêÜ Test 27: should get migration by version
      ΓêÜ Test 28: should return undefined for non-existent version
      ΓêÜ Test 29: should return latest version number (1 ms)
    Migration Content Validation
      ΓêÜ Test 30: should have indexes migration (v4)
      ΓêÜ Test 31: should have parent/dependency migration (v5)
      ΓêÜ Test 32: should have reversible down migrations (4 ms)

PASS tests/cache/refresh.test.ts
  Cache Refresh
    ΓêÜ Test 1: should detect stale items based on age (4 ms)
    ΓêÜ Test 2: should return stale items from index (2 ms)
    ΓêÜ Test 3: should refresh stale items successfully (2 ms)
    ΓêÜ Test 4: should track errors when refresh fails (3 ms)
    ΓêÜ Test 5: should set up auto-refresh hook (1 ms)
    ΓêÜ Test 6: should sort items by refresh priority (1 ms)
    VSCodeOnlineDetector
      ΓêÜ Test 7: should return true for isOnline (7 ms)
      ΓêÜ Test 8: should register onOnline callbacks (1 ms)
      ΓêÜ Test 9: should call multiple onOnline callbacks
    Error handling
      ΓêÜ Test 10: should handle getStaleItems throw
      ΓêÜ Test 11: should handle refreshCallback throwing exception (1 ms)
      ΓêÜ Test 12: should return success when getStaleItems returns empty due to error (1 ms)
    Batch processing
      ΓêÜ Test 13: should process items in batches (2 ms)
      ΓêÜ Test 14: should return early when no stale items (1 ms)
    Priority calculation
      ΓêÜ Test 15: should give higher priority to more accessed items (1 ms)
      ΓêÜ Test 16: should give higher priority to smaller items (1 ms)
      ΓêÜ Test 17: should use cachedAt when lastAccessedAt is missing (3 ms)
    Staleness detection
      ΓêÜ Test 18: should mark fresh items as not stale (2 ms)
      ΓêÜ Test 19: should allow custom staleness threshold (1 ms)
    Constants
      ΓêÜ Test 20: should export DEFAULT_STALENESS_THRESHOLD as 24 hours (2 ms)
      ΓêÜ Test 21: should export MAX_CONCURRENT_REFRESHES as 3 (1 ms)
    refresh callback error message
      ΓêÜ Test 22: should use Unknown error when callback returns success false without error (1 ms)

PASS tests/services/ticketDb/concurrency.test.ts
  Version Control & Concurrency (MT-007)
    Retry Logic
      ΓêÜ Test 1: should succeed on first attempt (2 ms)
      ΓêÜ Test 2: should retry on SQLITE_BUSY (55 ms)
      ΓêÜ Test 3: should fail after max retries (48 ms)
      ΓêÜ Test 4: should not retry non-retryable errors
      ΓêÜ Test 5: should track total time (24 ms)
      ΓêÜ Test 6: should calculate exponential delay
      ΓêÜ Test 7: should cap delay at maxDelayMs (1 ms)
      ΓêÜ Test 8: should identify retryable errors
      ΓêÜ Test 9: should detect SQLITE_BUSY errors (1 ms)
      ΓêÜ Test 10: should detect SQLITE_FULL errors
      ΓêÜ Test 11: should have sensible default config
    Optimistic Locking
      ΓêÜ Test 12: should pass when versions match
      ΓêÜ Test 13: should fail when versions differ (1 ms)
      ΓêÜ Test 14: should provide resolution options
      ΓêÜ Test 15: should increment version correctly (1 ms)
      ΓêÜ Test 16: should build version check SQL
    Conflict Detection
      ΓêÜ Test 17: should detect no conflicts when fields differ (1 ms)
      ΓêÜ Test 18: should detect conflict on same field
      ΓêÜ Test 19: should not flag same value as conflict (1 ms)
      ΓêÜ Test 20: should ignore immutable fields
    Three-Way Merge
      ΓêÜ Test 21: should auto-merge non-conflicting changes (1 ms)
      ΓêÜ Test 22: should identify manual merge fields
      ΓêÜ Test 23: should handle complex merge scenarios
    Transaction Handling
      ΓêÜ Test 24: should commit on success (1 ms)
      ΓêÜ Test 25: should rollback on error (1 ms)
      ΓêÜ Test 26: should use DEFERRED mode by default
      ΓêÜ Test 27: should support EXCLUSIVE mode (1 ms)
      ΓêÜ Test 28: should have sensible default options
    Lock Ordering
      ΓêÜ Test 29: should sort resource IDs consistently (1 ms)
      ΓêÜ Test 30: should handle single resource (1 ms)
      ΓêÜ Test 31: should handle empty array
    LockManager
      ΓêÜ Test 32: should acquire lock (3 ms)
      ΓêÜ Test 33: should reject duplicate lock (1 ms)
      ΓêÜ Test 34: should release lock by holder
      ΓêÜ Test 35: should not release lock by wrong holder
      ΓêÜ Test 36: should auto-release stale locks (111 ms)
      ΓêÜ Test 37: should force-release locks (1 ms)
      ΓêÜ Test 38: should list all locks (1 ms)
      ΓêÜ Test 39: should reset for tests
    Singleton LockManager
      ΓêÜ Test 40: should return singleton instance
      ΓêÜ Test 41: should reset singleton
    Concurrent Simulation
      ΓêÜ Test 42: should handle simultaneous version checks (1 ms)
      ΓêÜ Test 43: should handle concurrent lock acquisition (1 ms)

PASS tests/agents/custom/hardlock.test.ts
  Custom Agent Hardlock
    HardlockViolationError
      ΓêÜ Test 1: should create error with correct properties (1 ms)
      ΓêÜ Test 2: should include tool and agent in message
      ΓêÜ Test 3: should provide user-friendly message (1 ms)
      ΓêÜ Test 4: should provide tool-specific suggestions (1 ms)
      ΓêÜ Test 5: should provide default suggestion for unknown blocked tools
    validateToolAccess
      ΓêÜ Test 6: should allow all permitted tools (1 ms)
      ΓêÜ Test 7: should block all blocked tools (1 ms)
      ΓêÜ Test 8: should block unknown tools (1 ms)
      ΓêÜ Test 9: should include suggestion for blocked tools
      ΓêÜ Test 10: should return reason for allowed tools (1 ms)
    assertToolAllowed
      ΓêÜ Test 11: should not throw for allowed tools
      ΓêÜ Test 12: should throw HardlockViolationError for blocked tools (25 ms)
      ΓêÜ Test 13: should throw with correct agent name (1 ms)
      ΓêÜ Test 14: should throw for unknown tools (1 ms)
    Tool Lists
      ΓêÜ Test 15: should format allowed tools list (1 ms)
      ΓêÜ Test 16: should format blocked tools list (1 ms)
      ΓêÜ Test 17: should generate complete policy description (1 ms)
    withHardlockGuard
      ΓêÜ Test 18: should execute allowed tools (1 ms)
      ΓêÜ Test 19: should block execution of blocked tools (1 ms)
      ΓêÜ Test 20: should pass through executor result
      ΓêÜ Test 21: should pass through executor errors (1 ms)
    createHardlockExecutor
      ΓêÜ Test 22: should create executor bound to agent (1 ms)
      ΓêÜ Test 23: should block tools with bound agent name in error
      ΓêÜ Test 24: should allow multiple tool calls (1 ms)
    validateToolList
      ΓêÜ Test 25: should categorize tools correctly
      ΓêÜ Test 26: should return allAllowed=true when all allowed
      ΓêÜ Test 27: should return allAllowed=false when any blocked
      ΓêÜ Test 28: should return allAllowed=false when any unknown (1 ms)
      ΓêÜ Test 29: should handle empty list
      ΓêÜ Test 30: should validate all allowed tools (1 ms)
      ΓêÜ Test 31: should identify all blocked tools
    generateEscalationDescription
      ΓêÜ Test 32: should include agent name (1 ms)
      ΓêÜ Test 33: should include tool name
      ΓêÜ Test 34: should include context
      ΓêÜ Test 35: should be markdown formatted
      ΓêÜ Test 36: should explain the restriction
    Integration Scenarios
      ΓêÜ Test 37: should handle typical read workflow
      ΓêÜ Test 38: should block write attempts in workflow (1 ms)
      ΓêÜ Test 39: should provide actionable errors (1 ms)
      ΓêÜ Test 40: should validate agent permission set

PASS tests/agents/answer/answerTeam.test.ts
  Answer Team
    CallerValidator
      Test 1: should create singleton instance
        ΓêÜ returns same instance on multiple calls (1 ms)
      Test 2: should allow Coding AI callers by default
        ΓêÜ allows coding_ai caller (1 ms)
        ΓêÜ allows copilot_coding caller
        ΓêÜ allows vscode_copilot caller
      Test 3: should reject non-Coding AI callers
        ΓêÜ rejects planning_agent caller
        ΓêÜ rejects unknown caller
        ΓêÜ rejects verification_agent caller
      Test 4: should handle pattern matching
        ΓêÜ allows caller with coding_ai in name
        ΓêÜ allows caller with copilot in name (1 ms)
      Test 5: should respect invoke_trigger setting
        ΓêÜ allows any agent when set to any_agent
        ΓêÜ rejects programmatic callers in manual_only mode (1 ms)
        ΓêÜ allows manual callers in manual_only mode
      Test 6: should track invoke_trigger in result
        ΓêÜ includes invokeTrigger in result
      Test 7: isCallerAllowed helper
        ΓêÜ returns correct result (1 ms)
      Test 8: validateCaller helper function
        ΓêÜ works correctly
      Test 9: should reset properly
        ΓêÜ creates new instance after reset (1 ms)
    CodingAIWorkflow
      Test 10: should create singleton instance
        ΓêÜ returns same instance on multiple calls
      Test 11: should register and unregister sessions
        ΓêÜ registers a session (1 ms)
        ΓêÜ unregisters a session (1 ms)
      Test 12: should track questions
        ΓêÜ records question for session
      Test 13: should deliver answers
        ΓêÜ delivers answer to correct session (1 ms)
        ΓêÜ fails to deliver to unknown question
      Test 14: should auto-resume session
        ΓêÜ resumes when confidence meets threshold (106 ms)
        ΓêÜ does not resume when confidence below threshold (1 ms)
      Test 15: should emit events
        ΓêÜ emits ANSWER_READY event (1 ms)
      Test 16: should check session waiting status
        ΓêÜ returns true when session is paused (1 ms)
        ΓêÜ returns false for unknown session (6 ms)
      Test 17: should get active sessions
        ΓêÜ returns all registered sessions (1 ms)
      Test 18: should create answer packages
        ΓêÜ creates package with all fields (2 ms)
      Test 19: should reset properly
        ΓêÜ disposes and creates new instance (1 ms)
    Integration
      Test 20: caller validation and workflow integration
        ΓêÜ validates caller before delivering answer

PASS tests/agents/answer/citations.test.ts
  Citation System
    CitationManager Constructor
      ΓêÜ Test 1: should create empty citation manager (1 ms)
    createCitation()
      ΓêÜ Test 2: should create citation with required fields (1 ms)
      ΓêÜ Test 3: should create citation with optional fields
      ΓêÜ Test 4: should use default confidence when not provided
      ΓêÜ Test 5: should generate unique IDs
    citePlan()
      ΓêÜ Test 6: should create plan citation with high confidence
      ΓêÜ Test 7: should include quote in plan citation
    citePRD()
      ΓêÜ Test 8: should create PRD citation with high confidence (1 ms)
      ΓêÜ Test 9: should include quote in PRD citation
    citeDesignSystem()
      ΓêÜ Test 10: should create design system citation (1 ms)
      ΓêÜ Test 11: should include property in reference
    citeCode()
      ΓêÜ Test 12: should create codebase citation (1 ms)
      ΓêÜ Test 13: should include line number in reference
      ΓêÜ Test 14: should include quote in code citation
    citeExternal()
      ΓêÜ Test 15: should create external citation with lower confidence (1 ms)
      ΓêÜ Test 16: should include title in reference (2 ms)
    citeLLM()
      ΓêÜ Test 17: should create LLM citation with lowest confidence (1 ms)
    storeCitations() and getCitations()
      ΓêÜ Test 18: should store and retrieve citations
      ΓêÜ Test 19: should return empty array for unknown answer
      ΓêÜ Test 20: should overwrite citations for same answer
    buildCitedAnswer()
      ΓêÜ Test 21: should build cited answer with no citations (1 ms)
      ΓêÜ Test 22: should calculate confidence from citations
      ΓêÜ Test 23: should mark as fully supported with authoritative sources (1 ms)
      ΓêÜ Test 24: should not be fully supported with only LLM citations
      ΓêÜ Test 25: should add diversity bonus for multiple source types (1 ms)
      ΓêÜ Test 26: should cap confidence at 100
    formatCitations()
      ΓêÜ Test 27: should return empty string for no citations (1 ms)
      ΓêÜ Test 28: should format plan citation
      ΓêÜ Test 29: should format PRD citation
      ΓêÜ Test 30: should format design system citation
      ΓêÜ Test 31: should format code citation with line number (1 ms)
      ΓêÜ Test 32: should format external citation (1 ms)
      ΓêÜ Test 33: should format LLM citation
      ΓêÜ Test 34: should include truncated quote (1 ms)
      ΓêÜ Test 35: should format multiple citations
    clear()
      ΓêÜ Test 36: should clear all stored citations (1 ms)
      ΓêÜ Test 37: should reset citation counter
    Singleton Functions
      ΓêÜ Test 38: should return same instance from getCitationManager
      ΓêÜ Test 39: should create new instance after reset (1 ms)
    Source Types
      ΓêÜ Test 40: should support all source types

PASS tests/agents/orchestrator/fileWatcher.test.ts
  OrchestratorFileWatcher
    constructor
      ΓêÜ Test 1: should create instance with default debounce (2 ms)
    watchFilesForTask()
      ΓêÜ Test 2: should create watchers for specified files (15 ms)
      ΓêÜ Test 3: should not duplicate watchers for same file (7 ms)
      ΓêÜ Test 4: should track task-file associations (2 ms)
      ΓêÜ Test 5: should log file watching info (2 ms)
      ΓêÜ Test 6: should not watch files after disposal (4 ms)
      ΓêÜ Test 7: should add multiple files for same task (2 ms)
    file change events
      ΓêÜ Test 8: should handle file modification events (1 ms)
      ΓêÜ Test 9: should handle file creation events (1 ms)
      ΓêÜ Test 10: should handle file deletion events (1 ms)
      ΓêÜ Test 11: should include timestamp in events (1 ms)
    debouncing
      ΓêÜ Test 12: should debounce rapid file changes (1 ms)
      ΓêÜ Test 13: should handle different files independently (1 ms)
    onFileChange()
      ΓêÜ Test 14: should register callbacks (2 ms)
      ΓêÜ Test 15: should return disposable (3 ms)
      ΓêÜ Test 16: should unregister callback on dispose (1 ms)
      ΓêÜ Test 17: should handle callback errors gracefully (2 ms)
    stopWatchingTask()
      ΓêÜ Test 18: should remove task-file tracking (1 ms)
      ΓêÜ Test 19: should dispose watchers when no other task needs the file (1 ms)
      ΓêÜ Test 20: should keep watcher if another task uses the file (1 ms)
      ΓêÜ Test 21: should handle non-existent task gracefully
      ΓêÜ Test 22: should log stop watching info (1 ms)
    getWatchedFilesForTask()
      ΓêÜ Test 23: should return empty array for unknown task (2 ms)
      ΓêÜ Test 24: should return copy of files array (5 ms)
    dispose()
      ΓêÜ Test 25: should dispose all watchers (1 ms)
      ΓêÜ Test 26: should clear debounce timers (2 ms)
      ΓêÜ Test 27: should clear all internal state (1 ms)
      ΓêÜ Test 28: should log disposal (1 ms)
    Singleton
      ΓêÜ Test 29: getOrchestratorFileWatcher() should return singleton (1 ms)
      ΓêÜ Test 30: resetOrchestratorFileWatcherForTests() should reset singleton (1 ms)
      ΓêÜ Test 31: reset should dispose existing instance (2 ms)
    error handling
      ΓêÜ Test 32: should handle watcher creation errors (1 ms)
    Edge Cases
      ΓêÜ Test 33: should handle empty file array (5 ms)
      ΓêÜ Test 34: should handle paths with special characters (1 ms)
      ΓêÜ Test 35: should handle Windows-style paths (1 ms)

PASS tests/errors/errorHandling.spec.ts
  Error Handling
    Validation Errors
      Missing Parameter
        ΓêÜ Test 1: should create error with correct code and message (2 ms)
        ΓêÜ Test 2: should throw with formatted message (25 ms)
      Invalid Type
        ΓêÜ Test 3: should create error with type details (1 ms)
        ΓêÜ Test 4: should throw with type information (1 ms)
      Out of Range
        ΓêÜ Test 5: should create error with range details (1 ms)
        ΓêÜ Test 6: should throw with range information (2 ms)
      Invalid Enum
        ΓêÜ Test 7: should create error with allowed values (1 ms)
      Require Helpers
        ΓêÜ Test 8: requireParam should return value if present
        ΓêÜ Test 9: requireParam should throw for null/undefined (2 ms)
        ΓêÜ Test 10: requireNonEmptyString should reject empty strings (2 ms)
        ΓêÜ Test 11: requireInRange should validate numeric ranges (1 ms)
    Timeout and Rate Limit Errors
      Timeout
        ΓêÜ Test 12: should create timeout error with retry suggestion (1 ms)
        ΓêÜ Test 13: should cap retry delay at 5 minutes
        ΓêÜ Test 14: should throw with retry suggestion (9 ms)
      Rate Limit
        ΓêÜ Test 15: should create rate limit error with default wait (1 ms)
        ΓêÜ Test 16: should respect custom retry delay
      LLM-Specific Timeout
        ΓêÜ Test 17: should create LLM startup timeout with context (1 ms)
        ΓêÜ Test 18: should provide different suggestions for each phase (1 ms)
      Backoff Calculation
        ΓêÜ Test 19: should calculate exponential backoff correctly
        ΓêÜ Test 20: should cap at maximum delay (1 ms)
      Error Detection
        ΓêÜ Test 21: should detect timeout errors (1 ms)
        ΓêÜ Test 22: should detect rate limit errors
        ΓêÜ Test 23: should extract retry delay from error message (1 ms)
    State Conflict Errors
      Task In Progress
        ΓêÜ Test 24: should create task in progress error with steps (1 ms)
        ΓêÜ Test 25: should throw with task ID (20 ms)
      Invalid State Transition
        ΓêÜ Test 26: should create transition error with allowed states (2 ms)
        ΓêÜ Test 27: should list allowed transitions in resolution (2 ms)
      Resource Locked
        ΓêÜ Test 28: should create locked error with holder info
        ΓêÜ Test 29: should work without lock holder (1 ms)
      Ticket Conflict
        ΓêÜ Test 30: should create conflict error with version info (4 ms)
      Ticket State Machine
        ΓêÜ Test 31: should define valid transitions
        ΓêÜ Test 32: should validate allowed transitions (1 ms)
      Error Detection
        ΓêÜ Test 33: should detect state conflict errors
    Cross-Category
      ΓêÜ Test 34: all errors should have distinct error codes
      ΓêÜ Test 35: all errors should be instances of Error when thrown (2 ms)

PASS tests/agents/orchestrator/orchestrator.test.ts
  Orchestrator Team
    CodingOnlyGuard
      Test 1: should create singleton instance
        ΓêÜ returns same instance on multiple calls (2 ms)
      Test 2: should allow coding-related requests by default
        ΓêÜ allows getNextTask (1 ms)
        ΓêÜ allows reportTaskDone (1 ms)
        ΓêÜ allows routeToCodingAI (1 ms)
      Test 3: should reject planning requests by default
        ΓêÜ rejects createPlan (1 ms)
        ΓêÜ rejects analyzeProblem (1 ms)
        ΓêÜ rejects breakdownTask (1 ms)
      Test 4: should detect planning content in request body
        ΓêÜ rejects requests with planning content (1 ms)
        ΓêÜ allows requests without planning content
      Test 5: should allow all requests when disabled
        ΓêÜ allows planning when coding_only is false (1 ms)
      Test 6: isRequestAllowed helper function
        ΓêÜ works correctly (2 ms)
      Test 7: should reset properly
        ΓêÜ creates new instance after reset (1 ms)
    PriorityHandler
      Test 8: should create singleton instance
        ΓêÜ returns same instance on multiple calls
      Test 9: should sort tasks by priority
        ΓêÜ puts P0 before P1 before P2 (1 ms)
      Test 10: should use FIFO within same priority
        ΓêÜ sorts older tasks first within same priority (1 ms)
      Test 11: should default to P2 for undefined priority
        ΓêÜ treats undefined as P2 (1 ms)
      Test 12: should calculate correct stats
        ΓêÜ counts tasks by priority
      Test 13: should filter by priority configuration
        ΓêÜ filters by maxPriority (1 ms)
        ΓêÜ filters by excludePriorities (1 ms)
      Test 14: should get highest priority task
        ΓêÜ returns P0 task when present (2 ms)
        ΓêÜ returns null for empty list (1 ms)
      Test 15: should determine preemption correctly
        ΓêÜ P0 preempts P2 (4 ms)
        ΓêÜ P0 does not preempt P1
        ΓêÜ P1 does not preempt anything
      Test 16: should provide priority labels
        ΓêÜ returns correct labels (1 ms)
      Test 17: sortTasksByPriority helper
        ΓêÜ works correctly
      Test 18: should generate summary
        ΓêÜ creates readable summary (1 ms)
    Integration
      Test 19: should work together
        ΓêÜ filters allowed requests and sorts by priority

PASS tests/agents/orchestrator/queue.test.ts
  OrchestratorQueue
    getNextReadyTask()
      ΓêÜ Test 1: should return null when no ready tasks (15 ms)
      ΓêÜ Test 2: should return highest priority ready task (1 ms)
      ΓêÜ Test 3: should enrich task with context files (1 ms)
      ΓêÜ Test 4: should check pending tasks for resolved dependencies (1 ms)
      ΓêÜ Test 5: should log task selection (1 ms)
      ΓêÜ Test 6: should use default priority when not set
    context file enrichment
      ΓêÜ Test 7: should add dependency context files (1 ms)
      ΓêÜ Test 8: should add metadata files
      ΓêÜ Test 9: should cache context files (1 ms)
    startTask()
      ΓêÜ Test 10: should call taskQueue.startTask (1 ms)
      ΓêÜ Test 11: should log task start (1 ms)
      ΓêÜ Test 12: should return false and log on error (1 ms)
    completeTask()
      ΓêÜ Test 13: should call taskQueue.completeTask (1 ms)
      ΓêÜ Test 14: should clear context cache on completion
      ΓêÜ Test 15: should return false on error (1 ms)
    failTask()
      ΓêÜ Test 16: should call taskQueue.failTask with reason (2 ms)
      ΓêÜ Test 17: should log warning on failure (1 ms)
      ΓêÜ Test 18: should return false on error (1 ms)
    getStats()
      ΓêÜ Test 19: should return queue statistics (1 ms)
      ΓêÜ Test 20: should calculate total correctly
    getTasksByStatus()
      ΓêÜ Test 21: should delegate to taskQueue (1 ms)
    clearCache()
      ΓêÜ Test 22: should clear context cache (1 ms)
    Singleton
      ΓêÜ Test 23: getOrchestratorQueue() should return singleton
      ΓêÜ Test 24: resetOrchestratorQueueForTests() should reset singleton
    Edge Cases
      ΓêÜ Test 25: should handle empty dependencies array (1 ms)
      ΓêÜ Test 25b: should skip pending tasks with unresolved dependencies
      ΓêÜ Test 26: should handle undefined metadata files (1 ms)
      ΓêÜ Test 27: should handle non-array metadata files

PASS tests/services/ticketDb/validator.test.ts
  Ticket Schema Validator (MT-005.6)
    validateTicketCreate
      ΓêÜ Test 1: should pass for valid ticket data (2 ms)
      ΓêÜ Test 2: should pass for full valid ticket data (1 ms)
      ΓêÜ Test 3: should fail for missing title (1 ms)
      ΓêÜ Test 4: should fail for empty title
      ΓêÜ Test 5: should fail for missing status (1 ms)
      ΓêÜ Test 6: should fail for invalid status (1 ms)
      ΓêÜ Test 7: should accept all valid statuses (1 ms)
      ΓêÜ Test 8: should fail for title exceeding max length
      ΓêÜ Test 9: should fail for description exceeding max length (1 ms)
      ΓêÜ Test 10: should fail for invalid type (1 ms)
      ΓêÜ Test 11: should accept all valid types
      ΓêÜ Test 12: should fail for priority out of range (1 ms)
      ΓêÜ Test 13: should accept valid priority values (1 ms)
      ΓêÜ Test 14: should fail for non-number priority
      ΓêÜ Test 15: should fail for version less than 1 (1 ms)
      ΓêÜ Test 16: should validate thread array
      ΓêÜ Test 17: should fail for invalid thread structure (1 ms)
      ΓêÜ Test 18: should fail for thread message with invalid role
      ΓêÜ Test 19: should collect multiple validation errors
    validateTicketUpdate
      ΓêÜ Test 20: should pass for valid partial update
      ΓêÜ Test 21: should fail when trying to modify id (1 ms)
      ΓêÜ Test 22: should fail when trying to modify createdAt
      ΓêÜ Test 23: should fail for empty title in update (1 ms)
      ΓêÜ Test 24: should pass for valid status update
    validateThreadMessage
      ΓêÜ Test 25: should pass for valid thread message
      ΓêÜ Test 26: should fail for missing role
      ΓêÜ Test 27: should fail for missing content
      ΓêÜ Test 28: should fail for content exceeding max length
      ΓêÜ Test 29: should validate optional status field
      ΓêÜ Test 30: should fail for invalid message status
    formatValidationErrors
      ΓêÜ Test 31: should format empty issues
      ΓêÜ Test 32: should format single issue (1 ms)
      ΓêÜ Test 33: should format multiple issues
    validateOrThrow
      ΓêÜ Test 34: should not throw for valid create data (1 ms)
      ΓêÜ Test 35: should throw for invalid create data (57 ms)
      ΓêÜ Test 36: should not throw for valid update data (1 ms)
      ΓêÜ Test 37: should throw for invalid update data (1 ms)
    Constants
      ΓêÜ Test 38: should export valid statuses
      ΓêÜ Test 39: should export valid types (1 ms)
      ΓêÜ Test 40: should export constraint values

PASS tests/services/ticketDb/idGenerator.test.ts
  Ticket ID Generator (MT-005.4 & MT-005.5)
    Format Functions
      ΓêÜ Test 1: should format ticket ID with zero-padding (1 ms)
      ΓêÜ Test 2: should format master ticket ID with zero-padding
      ΓêÜ Test 3: should format sub-ticket ID correctly (1 ms)
    Parse Functions
      ΓêÜ Test 4: should parse valid ticket ID (1 ms)
      ΓêÜ Test 5: should parse valid master ticket ID (1 ms)
      ΓêÜ Test 6: should parse valid sub-ticket ID (1 ms)
      ΓêÜ Test 7: should return null for invalid IDs (1 ms)
      ΓêÜ Test 8: should return null for legacy format IDs
    Validation Functions
      ΓêÜ Test 9: should validate ticket IDs correctly (1 ms)
      ΓêÜ Test 10: should validate master ticket IDs correctly (1 ms)
      ΓêÜ Test 11: should validate sub-ticket IDs correctly (1 ms)
      ΓêÜ Test 12: should validate any ticket ID format (1 ms)
    getMasterTicketId
      ΓêÜ Test 13: should extract master ID from sub-ticket (1 ms)
      ΓêÜ Test 14: should return null for non-sub-tickets
    TicketIdGenerator - Regular Tickets
      ΓêÜ Test 15: should generate sequential ticket IDs
      ΓêÜ Test 16: should generate 100 unique ticket IDs (1 ms)
      ΓêÜ Test 17: should start from custom number
      ΓêÜ Test 18: should track counter state (1 ms)
    TicketIdGenerator - Master Tickets
      ΓêÜ Test 19: should generate sequential master ticket IDs (1 ms)
      ΓêÜ Test 20: should support up to MT-999 (1 ms)
      ΓêÜ Test 21: should track master counter state
    TicketIdGenerator - Sub-Tickets
      ΓêÜ Test 22: should generate sequential sub-ticket IDs (1 ms)
      ΓêÜ Test 23: should track sub-tickets per master independently
      ΓêÜ Test 24: should support up to MT-XXX.999
      ΓêÜ Test 25: should throw for invalid master ticket ID (34 ms)
      ΓêÜ Test 26: should track sub-ticket counters in state
    Seed from Existing
      ΓêÜ Test 27: should seed ticket counter from existing IDs (1 ms)
      ΓêÜ Test 28: should seed master counter from existing IDs (1 ms)
      ΓêÜ Test 29: should seed sub-ticket counters from existing IDs (1 ms)
      ΓêÜ Test 30: should handle mixed ID formats (1 ms)
      ΓêÜ Test 31: should handle empty seed array
      ΓêÜ Test 32: should handle gaps gracefully (1 ms)
    Reset
      ΓêÜ Test 33: should reset all counters
    Singleton Pattern
      ΓêÜ Test 34: should initialize and retrieve singleton (1 ms)
      ΓêÜ Test 35: should throw when not initialized (1 ms)
      ΓêÜ Test 36: should seed singleton from existing IDs
      ΓêÜ Test 37: should reset singleton (1 ms)
    Constants
      ΓêÜ Test 38: should export correct prefixes (1 ms)

PASS tests/agents/custom/metrics.test.ts
  MT-030.17: Agent Performance Metrics
    Test 1: Record execution metrics
      ΓêÜ should record a successful execution (2 ms)
      ΓêÜ should record a failed execution (2 ms)
      ΓêÜ should track multiple executions (1 ms)
    Test 2: Response time metrics
      ΓêÜ should track average response time (1 ms)
      ΓêÜ should handle first metric setting min/max (1 ms)
    Test 3: Token usage metrics
      ΓêÜ should track total and average token usage (1 ms)
    Test 4: User rating tracking
      ΓêÜ should track user ratings
      ΓêÜ should handle mixed ratings with no ratings (1 ms)
    Test 5: Error tracking and frequency
      ΓêÜ should track top errors (11 ms)
    Test 6: Multiple agent comparisons
      ΓêÜ should compare metrics between agents (1 ms)
      ΓêÜ should get metrics for multiple agents (2 ms)
    Test 7: Execution history and timeline
      ΓêÜ should retrieve execution history (1 ms)
      ΓêÜ should generate metrics timeline (4 ms)
    Test 8: Metrics export
      ΓêÜ should export metrics as CSV (1 ms)
      ΓêÜ should export multiple agents as CSV
    Test 9: Metrics management
      ΓêÜ should reset metrics for single agent (1 ms)
      ΓêÜ should clear all metrics (1 ms)
    Test 10: Edge cases and large datasets
      ΓêÜ should handle 1000+ execution records (1296 ms)
      ΓêÜ should calculate success rate correctly with many invocations (20 ms)
      ΓêÜ should handle metrics with zero token usage (2 ms)

PASS tests/agents/planning/prdGenerator.test.ts
  prdGenerator
    PRDGenerator
      Test 1: constructor
        ΓêÜ should create instance with default config (2 ms)
        ΓêÜ should create instance with custom config
      Test 2: generate
        ΓêÜ should generate PRD from master plan (47 ms)
        ΓêÜ should extract features correctly (3 ms)
        ΓêÜ should extract milestones (2 ms)
        ΓêÜ should calculate statistics (2 ms)
        ΓêÜ should write JSON file (1 ms)
        ΓêÜ should write Markdown file (1 ms)
        ΓêÜ should emit prd-generated event (2 ms)
      Test 3: error handling
        ΓêÜ should return error when master plan not found
        ΓêÜ should emit prd-error event on failure (8 ms)
      Test 4: watching
        ΓêÜ should start watching when called (2 ms)
        ΓêÜ should emit watch-started event (1 ms)
        ΓêÜ should stop watching when called (1 ms)
        ΓêÜ should emit watch-stopped event (1 ms)
      Test 5: dispose
        ΓêÜ should clean up resources (1 ms)
    Test 6: singleton pattern
      ΓêÜ should initialize singleton (4 ms)
      ΓêÜ should throw if initialized twice (70 ms)
      ΓêÜ should get instance after initialization (1 ms)
      ΓêÜ should throw if getInstance before init (1 ms)
    Test 7: generatePRD utility
      ΓêÜ should generate PRD without singleton (1 ms)
    Test 8: feature extraction
      ΓêÜ should extract dependencies correctly (1 ms)
      ΓêÜ should extract priority levels (1 ms)
      ΓêÜ should handle features without dependencies (1 ms)
    Test 9: markdown generation
      ΓêÜ should include progress summary
      ΓêÜ should include milestone sections
      ΓêÜ should group features by priority (1 ms)
    Test 10: acceptance criteria extraction
      ΓêÜ should extract criteria from Tests field (1 ms)

PASS tests/ui/customAgentBuilder.enhancements.test.ts
  CustomAgentBuilderPanel Enhancements
    MT-030.4: System Prompt Editor - Autocomplete
      ΓêÜ Test 1: should include autocomplete input field in system prompt (6 ms)
      ΓêÜ Test 2: should include autocomplete dropdown container (1 ms)
      ΓêÜ Test 3: should include CSS for autocomplete dropdown (2 ms)
      ΓêÜ Test 4: should generate CSS for selected autocomplete item (1 ms)
      ΓêÜ Test 5: should include syntax highlighting styles for variables
    MT-030.5: Goal List Manager - Drag-to-Reorder
      ΓêÜ Test 6: should include drag handle element in goal items (1 ms)
      ΓêÜ Test 7: should include CSS styles for drag handles (1 ms)
      ΓêÜ Test 8: should include CSS for dragging state (1 ms)
      ΓêÜ Test 9: should add drag hint to goals section (1 ms)
      ΓêÜ Test 10: should have numeric numbering for goals (1 ms)
    MT-030.6: Checklist Manager - Checkbox UI & Templates
      ΓêÜ Test 11: should include checkbox input in checklist items (2 ms)
      ΓêÜ Test 12: should include CSS styles for checklist checkbox UI (2 ms)
      ΓêÜ Test 13: should render quick template buttons (1 ms)
      ΓêÜ Test 14: should include specific template options (1 ms)
      ΓêÜ Test 15: should include CSS for template tags (44 ms)
      ΓêÜ Test 16: should show checklist item opacity change on check (2 ms)
    Enhancements Integration
      ΓêÜ Test 17: should include all enhancement sections in HTML (1 ms)
      ΓêÜ Test 18: should have unified CSS for all enhancements (1 ms)
      ΓêÜ Test 19: should initialize all state variables in JavaScript (1 ms)
      ΓêÜ Test 20: should call setup functions for enhancements (1 ms)
    Constraint Validation for Enhancements
      ΓêÜ Test 21: should validate system prompt length with autocomplete enabled (1 ms)
      ΓêÜ Test 22: should validate goals max with reordering (1 ms)
      ΓêÜ Test 23: should validate checklist max with checkbox UI (1 ms)

ts-jest[config] (WARN) message TS151002: Using hybrid module kind (Node16/18/Next) is only supported in "isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
PASS tests/services/deduplication.test.ts
  Deduplication Service
    findDuplicates
      ΓêÜ Test 1: should find exact duplicate by title (3 ms)
      ΓêÜ Test 2: should find similar duplicate by keywords (1 ms)
      ΓêÜ Test 3: should not match tickets below threshold (14 ms)
      ΓêÜ Test 4: should not compare ticket to itself (1 ms)
      ΓêÜ Test 5: should skip done/removed tickets (3 ms)
      ΓêÜ Test 6: should skip resolved tickets
      ΓêÜ Test 7: should handle listTickets error
      ΓêÜ Test 8: should sort matches by similarity (highest first)
      ΓêÜ Test 9: should detect substring matches (1 ms)
    consolidateDuplicates
      ΓêÜ Test 10: should bump master ticket priority (1 ms)
      ΓêÜ Test 11: should not bump priority when disabled (1 ms)
      ΓêÜ Test 12: should remove duplicates when autoRemove is true (3 ms)
      ΓêÜ Test 13: should link duplicates instead of removing when autoRemove is false (1 ms)
      ΓêÜ Test 14: should handle updateTicket error (1 ms)
      ΓêÜ Test 15: should use custom maxPriority (3 ms)
      ΓêÜ Test 16: should handle multiple matches
      ΓêÜ Test 17: should handle empty matches array (1 ms)
    checkAndDeduplicateTicket
      ΓêÜ Test 18: should return isDuplicate=false when no matches (1 ms)
      ΓêÜ Test 19: should return isDuplicate=true when matches found
      ΓêÜ Test 20: should consolidate duplicates when found (1 ms)
      ΓêÜ Test 21: should pass config to findDuplicates (1 ms)
    generateDuplicationReport
      ΓêÜ Test 22: should generate "no duplicates" message when not duplicate (1 ms)
      ΓêÜ Test 23: should generate detailed report for duplicates (1 ms)
      ΓêÜ Test 24: should include errors in report
      ΓêÜ Test 25: should show removed count in report
    calculateSimilarity (via findDuplicates)
      ΓêÜ Test 26: should handle empty keyword case (1 ms)
      ΓêÜ Test 27: should respect default similarity threshold

PASS tests/ui/verificationWebview.test.ts
  VerificationWebviewPanel
    createOrShow
      ΓêÜ Test 1: should create new panel when none exists (3 ms)
      ΓêÜ Test 2: should reuse existing panel (1 ms)
      ΓêÜ Test 3: should set webview HTML content (1 ms)
    getInstance
      ΓêÜ Test 4: should return null when no panel exists (1 ms)
      ΓêÜ Test 5: should return instance after creation (1 ms)
    message handling
      ΓêÜ Test 6: should handle markPassed message (3 ms)
      ΓêÜ Test 7: should handle markFailed message (53 ms)
      ΓêÜ Test 8: should handle markSkipped message (2 ms)
      ΓêÜ Test 9: should handle refresh message (2 ms)
    server control
      ΓêÜ Test 10: should handle startServer message (1 ms)
      ΓêÜ Test 11: should handle stopServer message (1 ms)
    disposal
      ΓêÜ Test 12: should clear instance on dispose (1 ms)
      ΓêÜ Test 13: should handle dispose gracefully (1 ms)
    getChecklist
      ΓêÜ Test 14: should return checklist instance (1 ms)
    getResult
      ΓêÜ Test 15: should return checklist result (2 ms)
    HTML content
      ΓêÜ Test 16: should include CSP meta tag (11 ms)
      ΓêÜ Test 17: should include toolbar buttons (1 ms)
      ΓêÜ Test 18: should include server status section (4 ms)
      ΓêÜ Test 19: should include progress bar (1 ms)
      ΓêÜ Test 20: should include checklist container (1 ms)
      ΓêÜ Test 21: should include summary section (2 ms)
    openVerificationPanel helper
      ΓêÜ Test 22: should create panel via helper function (3 ms)
    resetVerificationWebviewForTests
      ΓêÜ Test 23: should clear instance (1 ms)
      ΓêÜ Test 24: should handle reset when no instance exists (1 ms)
    edge cases
      ΓêÜ Test 25: should handle unknown message type gracefully (1 ms)
      ΓêÜ Test 26: should handle message without itemId (1 ms)
      ΓêÜ Test 27: should include nonce in HTML for CSP (1 ms)

PASS tests/agents/answer/confidence.test.ts
  ConfidenceScorer
    Test 1-5: scoreConfidence
      ΓêÜ Test 1: should return high confidence for clear answers (3 ms)
      ΓêÜ Test 2: should return low confidence for vague answers (1 ms)
      ΓêÜ Test 3: should parse JSON response correctly
      ΓêÜ Test 4: should handle non-JSON response gracefully (1 ms)
      ΓêÜ Test 5: should return default score on LLM error (1 ms)
    Test 6-10: confidence factors
      ΓêÜ Test 6: should detect hedging language (1 ms)
      ΓêÜ Test 7: should check for answer length (1 ms)
      ΓêÜ Test 8: should detect code presence
      ΓêÜ Test 9: should check question terms in answer (1 ms)
      ΓêÜ Test 10: should have multiple factors
    Test 11-15: escalation
      ΓêÜ Test 11: should create escalation ticket on low confidence (1 ms)
      ΓêÜ Test 12: should include question in escalation ticket (1 ms)
      ΓêÜ Test 13: should skip escalation when disabled
      ΓêÜ Test 14: should handle ticket creation error
      ΓêÜ Test 15: should set correct ticket priority (1 ms)
    Test 16-20: configuration
      ΓêÜ Test 16: should use default threshold of 95
      ΓêÜ Test 17: should allow custom threshold (1 ms)
      ΓêÜ Test 18: should update threshold
      ΓêÜ Test 19: should clamp threshold to valid range (1 ms)
      ΓêÜ Test 20: should determine escalation based on threshold
      ΓêÜ Test 21: should handle ticket creation failure during escalation (1 ms)
      ΓêÜ Test 22: should handle malformed JSON in score response (1 ms)

PASS tests/ui/conversationsTreeProvider.test.ts
  ConversationsTreeDataProvider
    constructor
      ΓêÜ should subscribe to ticket changes on instantiation (1 ms)
      ΓêÜ should handle subscription errors gracefully (1 ms)
    getTreeItem
      ΓêÜ should return the element as-is
    getChildren
      ΓêÜ should return empty array when element is provided (flat list)
      ΓêÜ should return placeholder when no conversations exist (1 ms)
      ΓêÜ should create TreeItem for a valid conversation ticket (4 ms)
      ΓêÜ should skip tickets with invalid JSON and show placeholder (1 ms)
      ΓêÜ should fall back to message count when timestamps are missing (1 ms)
      ΓêÜ should ignore tickets with empty conversation arrays (1 ms)
      ΓêÜ should include answer_agent tickets even when type is set (1 ms)
      ΓêÜ should show empty answer_agent tickets as new chats (1 ms)
      ΓêÜ should skip unexpected conversation formats (1 ms)
      ΓêÜ should handle database errors gracefully (3 ms)
    auto-refresh on ticket changes
      ΓêÜ should refresh when ticket change event fires (1 ms)
    refresh
      ΓêÜ should fire onDidChangeTreeData event
      ΓêÜ should log info message when refreshing (1 ms)
    onDidChangeTreeData
      ΓêÜ should expose the event emitter
    contextValue and command integration
      ΓêÜ should set contextValue on all conversation items (1 ms)
      ΓêÜ should include command with chatId for context menu handlers (1 ms)

PASS tests/agents/custom/metadata.test.ts
  MT-030.8: Agent Metadata Fields
    Test 1: Author field validation
      ΓêÜ should allow valid author name (2 ms)
      ΓêÜ should allow empty author (1 ms)
      ΓêÜ should reject author exceeding max length (16 ms)
      ΓêÜ should allow author at max length (1 ms)
    Test 2: Version field validation (semantic versioning)
      ΓêÜ should accept valid semantic versions (1 ms)
      ΓêÜ should default to 1.0.0 if not provided (1 ms)
      ΓêÜ should reject invalid version formats (4 ms)
      ΓêÜ should validate versions with proper number ranges
    Test 3: Tags field validation
      ΓêÜ should accept valid tags (1 ms)
      ΓêÜ should default to empty tags array
      ΓêÜ should reject tags exceeding max length (5 ms)
      ΓêÜ should allow tags at max length (2 ms)
      ΓêÜ should reject more than TAGS_MAX tags (2 ms)
      ΓêÜ should allow exactly TAGS_MAX tags
      ΓêÜ should reject empty tag strings (2 ms)
    Test 4: Timestamp fields (createdAt, updatedAt)
      ΓêÜ should accept valid ISO 8601 timestamps (1 ms)
      ΓêÜ should allow timestamps to be optional
      ΓêÜ should reject invalid timestamp formats (1 ms)
    Test 5: Complete metadata object validation
      ΓêÜ should validate complete metadata with all fields (1 ms)
      ΓêÜ should validate minimal metadata (1 ms)
      ΓêÜ should validate metadata with special characters in tags (1 ms)
    Test 6: Metadata integration with full agent config
      ΓêÜ should include metadata in complete agent validation (1 ms)
      ΓêÜ should handle missing metadata in agent (1 ms)
      ΓêÜ should reject agent with invalid metadata (1 ms)
    Test 7: Metadata edge cases
      ΓêÜ should trim whitespace from author field handling
      ΓêÜ should handle tags with numbers and hyphens (1 ms)
      ΓêÜ should reject version with leading zeros
      ΓêÜ should handle metadata with only some optional fields (1 ms)
    Test 8: Metadata field UI integration
      ΓêÜ should support metadata display fields (1 ms)
      ΓêÜ should handle metadata as form input

PASS tests/services/llmService.cache.test.ts
  LLM Service Cache
    Cache Key Generation
      ΓêÜ Test 1: should generate consistent cache key for same prompt (2 ms)
      ΓêÜ Test 2: should generate different keys for different prompts (1 ms)
      ΓêÜ Test 3: should generate different keys for same prompt with different options
      ΓêÜ Test 4: should generate different keys for same prompt with different system prompts
      ΓêÜ Test 5: should handle very long prompts (1 ms)
    Cache Hit/Miss
      ΓêÜ Test 6: should return cached response on cache hit (3 ms)
      ΓêÜ Test 7: should make real request on cache miss (1 ms)
      ΓêÜ Test 8: should store response in cache after successful request (1 ms)
      ΓêÜ Test 9: should preserve usage data in cached response (2 ms)
    Cache Expiration (TTL)
      ΓêÜ Test 10: should return cached response before TTL expires (2 ms)
      ΓêÜ Test 11: should fetch fresh response after TTL expires (2 ms)
    Cache Disabled
      ΓêÜ Test 12: should not cache when cacheEnabled=false (2 ms)
      ΓêÜ Test 13: isLLMCacheEnabled should return false when disabled
    LRU Eviction
      ΓêÜ Test 14: should evict oldest entry when max entries exceeded (5 ms)
      ΓêÜ Test 15: should log eviction when max entries exceeded (1 ms)
    Cache Clear
      ΓêÜ Test 16: should clear all entries when clearLLMCache called (2 ms)
      ΓêÜ Test 17: should log when cache is cleared
    Error Handling
      ΓêÜ Test 18: should NOT cache error responses (6 ms)
      ΓêÜ Test 19: should NOT cache non-OK HTTP responses (3 ms)
    Edge Cases
      ΓêÜ Test 20: should handle empty prompt (1 ms)
      ΓêÜ Test 21: should handle prompt with special characters (2 ms)
      ΓêÜ Test 22: should handle messages array in options (11 ms)

PASS tests/conversationWebview.test.ts
  ConversationWebviewPanel
    createOrShow
      ΓêÜ should reveal an existing panel if it already exists (2 ms)
      ΓêÜ should create a new panel if none exists for the chatId (5 ms)
      ΓêÜ should handle undefined initialMessages gracefully (2 ms)
      ΓêÜ should throw an error if globalState update fails (16 ms)
      ΓêÜ should log info when a new panel is created (1 ms)
    disposeAll
      ΓêÜ should dispose all panels and clear the panels map (1 ms)
      ΓêÜ should handle empty panels map gracefully (1 ms)
      ΓêÜ should handle errors during panel disposal (21 ms)
    getOpenPanels
      ΓêÜ should return an empty array when no panels are open (1 ms)
      ΓêÜ should return all open panels (1 ms)
      ΓêÜ should handle concurrent modifications to the panels map (1 ms)
      ΓêÜ should return panels in insertion order
      ΓêÜ should not mutate the original panels map (1 ms)
    message handling
      ΓêÜ Test 1: should warn on unknown message types (3 ms)
      ΓêÜ Test 2: should ignore empty user messages (1 ms)
      ΓêÜ Test 3: should stream responses for user messages (4 ms)
    restoreLastActive
      ΓêÜ should return null if no lastActiveChatId is found (1 ms)
      ΓêÜ should return null and log a warning if getConversationHistory throws an error
      ΓêÜ should call createOrShow and return a ConversationWebviewPanel instance on success

PASS tests/ui/notificationService.test.ts
  NotificationService
    Test 1: constructor
      ΓêÜ should create instance with default config (2 ms)
      ΓêÜ should create instance with custom config (1 ms)
    Test 2: notifyTicket
      ΓêÜ should queue P1 ticket for notification (2 ms)
      ΓêÜ should queue P0 ticket for notification (1 ms)
      ΓêÜ should not notify P2 tickets by default (1 ms)
      ΓêÜ should not notify P3 tickets by default (2 ms)
      ΓêÜ should not notify when disabled (3 ms)
      ΓêÜ should not re-notify same ticket (2 ms)
    Test 3: single notification
      ΓêÜ should show notification after delay (4 ms)
      ΓêÜ should include priority label in notification (1 ms)
    Test 4: batch notifications
      ΓêÜ should batch multiple tickets (3 ms)
      ΓêÜ should show Critical count in batch (4 ms)
      ΓêÜ should show immediately when batch is full (1 ms)
    Test 5: notification actions
      ΓêÜ should open ticket on Open action (2 ms)
      ΓêÜ should focus tickets view on View All action (1 ms)
    Test 6: snooze
      ΓêÜ should not notify snoozed tickets (5 ms)
      ΓêÜ should allow notification after snooze expires (1 ms)
    Test 7: configuration
      ΓêÜ should update minPriority (1 ms)
      ΓêÜ should enable/disable notifications (1 ms)
    Test 8: events
      ΓêÜ should emit notification-shown event (1 ms)
      ΓêÜ should emit batch-shown event (1 ms)
      ΓêÜ should emit notification-action event (1 ms)
    Test 9: reset
      ΓêÜ should clear all state (5 ms)
    Test 10: singleton pattern
      ΓêÜ should initialize singleton (3 ms)
      ΓêÜ should throw if initialized twice (71 ms)
      ΓêÜ should get instance after initialization (1 ms)
      ΓêÜ should throw if getInstance before init (2 ms)

PASS tests/getErrors.spec/handleGetErrors.test.ts
  handleGetErrors
    ΓêÜ Test 1: should return lightweight-scan diagnostics when pre-generated file does not exist (11 ms)
    ΓêÜ Test 2: should return pre-generated diagnostics successfully when file exists with valid data (1 ms)
    ΓêÜ Test 3: should gracefully fall back to scanning when JSON is invalid (1 ms)
    ΓêÜ Test 4: should gracefully fall back to scanning when required fields are missing (1 ms)
    ΓêÜ Test 5: should handle file read errors and fall back to scanning (1 ms)
    ΓêÜ Test 6: should use pre-generated diagnostics when file exists and is valid (1 ms)
    ΓêÜ Test 7: should handle params being undefined (1 ms)
    ΓêÜ Test 8: should handle params being empty object (1 ms)
    ΓêÜ Test 9: should scan for skipped tests and find skip patterns (1 ms)
    ΓêÜ Test 10: should handle unreadable directory in findTestFiles (1 ms)
    ΓêÜ Test 11: should handle error reading individual test file (1 ms)
    ΓêÜ Test 12: should trigger outer catch block for unexpected error during scanning
    ΓêÜ Test 13: should handle non-Error thrown in outer catch

PASS tests/planning/planning.integration.test.ts
  Planning System Integration Tests
    Test 1: Plan Creation
      ΓêÜ should create empty plan with correct structure (4 ms)
      ΓêÜ should create feature blocks with unique IDs (1 ms)
      ΓêÜ should create block links with correct structure (1 ms)
    Test 2: Plan Validation
      ΓêÜ should validate a complete plan successfully (3 ms)
      ΓêÜ should reject plan without name (10 ms)
      ΓêÜ should accept plan with empty features (6 ms)
    Test 3: Error Handler
      ΓêÜ should detect validation errors (2 ms)
      ΓêÜ should detect duplicate IDs (1 ms)
      ΓêÜ should detect orphan references (1 ms)
    Test 4: Orchestrator Integration
      ΓêÜ should submit plan and create execution plan (8 ms)
      ΓêÜ should create tasks for all features (1 ms)
      ΓêÜ should respect dependency order (1 ms)
      ΓêÜ should mark tasks as ready when auto-started (1 ms)
    Test 5: Documentation Generation
      ΓêÜ should generate all documentation files (46 ms)
      ΓêÜ should generate plan overview (1 ms)
      ΓêÜ should generate features doc (1 ms)
      ΓêÜ should include mermaid dependency graph (1 ms)
    Test 6: Drift Detection
      ΓêÜ should detect missing features (2 ms)
      ΓêÜ should detect unplanned features (2 ms)
      ΓêÜ should calculate health score (1 ms)
    Test 7: End-to-End Flow
      ΓêÜ should complete full planning workflow (4 ms)

PASS tests/agents/answer/cache.test.ts
  Answer Cache System
    AnswerCache Constructor
      ΓêÜ Test 1: should create cache with default config (2 ms)
      ΓêÜ Test 2: should create cache with custom config
      ΓêÜ Test 3: should merge partial config with defaults (1 ms)
    store()
      ΓêÜ Test 4: should store an answer with high confidence (1 ms)
      ΓêÜ Test 5: should not store low confidence answers (1 ms)
      ΓêÜ Test 6: should store answer at exactly minimum confidence (1 ms)
      ΓêÜ Test 7: should store answer with context
      ΓêÜ Test 8: should evict LRU entries when max is reached (1 ms)
      ΓêÜ Test 9: should update existing entry when same question is stored (1 ms)
    lookup()
      ΓêÜ Test 10: should find exact match (1 ms)
      ΓêÜ Test 11: should return miss for unknown question (1 ms)
      ΓêÜ Test 12: should find fuzzy match with similar wording (3 ms)
      ΓêÜ Test 13: should not match when below similarity threshold (1 ms)
      ΓêÜ Test 14: should increment hit count on match (1 ms)
      ΓêÜ Test 15: should not return expired entries (1 ms)
      ΓêÜ Test 16: should handle empty question
      ΓêÜ Test 17: should normalize questions for matching (1 ms)
    getStats()
      ΓêÜ Test 18: should return empty stats for empty cache (1 ms)
      ΓêÜ Test 19: should calculate correct stats
      ΓêÜ Test 20: should exclude expired entries from stats
    cleanExpired()
      ΓêÜ Test 21: should remove expired entries (1 ms)
      ΓêÜ Test 22: should keep non-expired entries
      ΓêÜ Test 23: should return 0 for empty cache (1 ms)
    clear()
      ΓêÜ Test 24: should remove all entries
      ΓêÜ Test 25: should be safe to call on empty cache
    Singleton Functions
      ΓêÜ Test 26: should return same instance from getAnswerCache
      ΓêÜ Test 27: should create new instance after reset
    Edge Cases
      ΓêÜ Test 28: should handle very long questions (1 ms)
      ΓêÜ Test 29: should handle special characters in questions
      ΓêÜ Test 30: should handle unicode in answers

PASS tests/agents/answer/timeout.test.ts
  TimeoutHandler
    Test 1-5: withTimeout
      ΓêÜ Test 1: should return result for fast operations (4 ms)
      ΓêÜ Test 2: should timeout for slow operations (5 ms)
      ΓêÜ Test 3: should track elapsed time (2 ms)
      ΓêÜ Test 4: should handle errors in operation (1 ms)
      ΓêÜ Test 5: should pass abort signal to operation (2 ms)
    Test 6-10: ticket creation
      ΓêÜ Test 6: should create ticket on timeout when enabled (2 ms)
      ΓêÜ Test 7: should not create ticket when disabled (2 ms)
      ΓêÜ Test 8: should include question in ticket (1 ms)
      ΓêÜ Test 9: should handle ticket creation failure (4 ms)
      ΓêÜ Test 10: should use configured priority (2 ms)
    Test 11-15: cancellation
      ΓêÜ Test 11: should cancel active request (2 ms)
      ΓêÜ Test 12: should return false for non-existent request
      ΓêÜ Test 13: should track active request count (1 ms)
      ΓêÜ Test 14: should cancel all requests (1 ms)
      ΓêÜ Test 15: should get/set timeout seconds (1 ms)
    Test 16-20: configuration and utilities
      ΓêÜ Test 16: should get timeout message (1 ms)
      ΓêÜ Test 17: should clamp timeout to valid range (1 ms)
      ΓêÜ Test 18: should use custom timeout message (1 ms)
      ΓêÜ Test 19: withSimpleTimeout should resolve fast operations (3 ms)
      ΓêÜ Test 20: withSimpleTimeout should reject on timeout (25 ms)

PASS tests/ui.spec/planningWizard.spec.ts
  MT-033: Planning Wizard Tests
    Wizard Framework (MT-033.1)
      ΓêÜ Test 1: should initialize wizard with default state (2 ms)
      ΓêÜ Test 2: should have all 7 pages (1 ms)
      ΓêÜ Test 3: should navigate to next page (1 ms)
      ΓêÜ Test 4: should navigate to previous page (1 ms)
      ΓêÜ Test 5: should prevent navigation without validation (1 ms)
      ΓêÜ Test 6: should track progress through wizard (1 ms)
      ΓêÜ Test 7: should auto-save draft every 30 seconds
      ΓêÜ Test 8: should recover from crashes
      ΓêÜ Test 9: should clear draft after save (1 ms)
      ΓêÜ Test 10: should close without save if user discards draft (1 ms)
    Page 1: Project Overview (MT-033.2)
      ΓêÜ Test 11: should validate project name required (4 ms)
      ΓêÜ Test 12: should validate project name min length (1 ms)
      ΓêÜ Test 13: should validate project name max length (1 ms)
      ΓêÜ Test 14: should validate description length (6 ms)
      ΓêÜ Test 15: should accept valid project overview (7 ms)
      ΓêÜ Test 16: should validate goal count max (1 ms)
      ΓêÜ Test 17: should validate individual goal length (2 ms)
      ΓêÜ Test 18: should show character counters in real-time (2 ms)
      ΓêÜ Test 19: should allow editing goals after adding (2 ms)
      ΓêÜ Test 20: should require at least project name for next page (1 ms)
      ΓêÜ Test 21: should preserve goals order (1 ms)
      ΓêÜ Test 22: should trim whitespace from goal text (4 ms)
      ΓêÜ Test 23: should validate no duplicate goal names (optional) (1 ms)
      ΓêÜ Test 24: should allow empty description (1 ms)
      ΓêÜ Test 25: should allow empty goals array (2 ms)
    Feature Blocks & Linking (MT-033.3-4)
      ΓêÜ Test 26: should allow adding feature blocks (1 ms)
      ΓêÜ Test 27: should require feature name
      ΓêÜ Test 28: should allow dragging to reorder features
      ΓêÜ Test 29: should create links between blocks (1 ms)
      ΓêÜ Test 30: should detect circular dependencies (2 ms)
    Plan Validation (MT-033.13)
      ΓêÜ Test 31: should validate complete plan (3 ms)
      ΓêÜ Test 32: should report validation errors (5 ms)
      ΓêÜ Test 33: should validate missing feature blocks (3 ms)
      ΓêÜ Test 34: should validate no circular dependencies (1 ms)
      ΓêÜ Test 35: should validate all stories linked to features (1 ms)
    Export Functionality (MT-033.11)
      ΓêÜ Test 36: should export to JSON (1 ms)
      ΓêÜ Test 37: should export to Markdown (1 ms)
      ΓêÜ Test 38: should export to YAML (1 ms)
      ΓêÜ Test 39: should export to PDF (3 ms)
      ΓêÜ Test 40: should preserve formatting in exports (2 ms)
    Full Wizard Workflow
      ΓêÜ Test 41: should complete full wizard workflow (1 ms)
      ΓêÜ Test 42: should save plan after completion (1 ms)
      ΓêÜ Test 43: should generate tasks for orchestrator (2 ms)
      ΓêÜ Test 44: should handle large plans gracefully (1 ms)
      ΓêÜ Test 45: should support undo/redo (1 ms)

PASS tests/services/ticketDb/init.test.ts
  Database Initialization (MT-005.7)
    ensureDbDirectory
      ΓêÜ Test 1: should return true when directory already exists (1 ms)
      ΓêÜ Test 2: should create directory when it does not exist
      ΓêÜ Test 3: should return false when creation fails
    dbFileExists
      ΓêÜ Test 4: should return true when file exists (1 ms)
      ΓêÜ Test 5: should return false when file does not exist
    isDbWritable
      ΓêÜ Test 6: should return true for writable existing file (1 ms)
      ΓêÜ Test 7: should return false for non-writable file
      ΓêÜ Test 8: should check directory writability when file does not exist
    loadRecoveryData
      ΓêÜ Test 9: should return null when recovery file does not exist (1 ms)
      ΓêÜ Test 10: should load valid recovery data (1 ms)
      ΓêÜ Test 11: should return null for invalid recovery data
      ΓêÜ Test 12: should return null for corrupted file
    saveRecoveryData
      ΓêÜ Test 13: should save recovery data successfully (1 ms)
      ΓêÜ Test 14: should create directory if needed (1 ms)
      ΓêÜ Test 15: should return false on write failure
    determineDatabaseMode
      ΓêÜ Test 16: should use primary path when available (2 ms)
      ΓêÜ Test 17: should fall back to alternate path (1 ms)
      ΓêÜ Test 18: should fall back to in-memory when no path available (1 ms)
    Helper Functions
      ΓêÜ Test 19: should generate default DB path (1 ms)
      ΓêÜ Test 20: should generate alternate paths (2 ms)
    cleanupRecoveryFiles
      ΓêÜ Test 21: should clean up old backup files (1 ms)
      ΓêÜ Test 22: should not clean up recent backup files
      ΓêÜ Test 23: should handle missing backup file (1 ms)

PASS tests/services/ticketDb/history.test.ts
  Ticket History Module (MT-006.10)
    createChangeRecord
      ΓêÜ Test 1: should create a status change record (2 ms)
      ΓêÜ Test 2: should create an assignment change record (1 ms)
      ΓêÜ Test 3: should create a priority change record (1 ms)
      ΓêÜ Test 4: should create a generic update record
      ΓêÜ Test 5: should include optional note
    createCreatedRecord
      ΓêÜ Test 6: should create a creation record (1 ms)
    detectChanges
      ΓêÜ Test 7: should detect field changes (1 ms)
      ΓêÜ Test 8: should detect multiple changes (1 ms)
      ΓêÜ Test 9: should ignore specified fields
      ΓêÜ Test 10: should return empty when no changes (1 ms)
      ΓêÜ Test 11: should handle null/undefined value changes
    parseTicketHistory
      ΓêÜ Test 12: should parse valid history (1 ms)
      ΓêÜ Test 13: should handle empty/null history
      ΓêÜ Test 14: should count reopens (1 ms)
      ΓêÜ Test 15: should handle corrupted JSON
    serializeTicketHistory
      ΓêÜ Test 16: should round-trip serialize/parse
    appendToHistory
      ΓêÜ Test 17: should append to existing history (1 ms)
      ΓêÜ Test 18: should append to null history
    filterHistory
      ΓêÜ Test 19: should filter by action (1 ms)
      ΓêÜ Test 20: should filter by changedBy
      ΓêÜ Test 21: should filter by since date (1 ms)
      ΓêÜ Test 22: should filter by field
    formatHistorySummary
      ΓêÜ Test 23: should format empty history
      ΓêÜ Test 24: should format history with changes
      ΓêÜ Test 25: should include reopen count

PASS tests/services/taskQueue/persistence.test.ts
  persistence
    save
      ΓêÜ Test 1: should save tasks to file (2 ms)
      ΓêÜ Test 2: should include running tasks in snapshot (1 ms)
      ΓêÜ Test 3: should throw on write error (14 ms)
    load
      ΓêÜ Test 4: should return undefined when file does not exist
      ΓêÜ Test 5: should load snapshot from file (1 ms)
      ΓêÜ Test 6: should handle malformed JSON (1 ms)
    clear
      ΓêÜ Test 7: should delete saved state file (1 ms)
      ΓêÜ Test 8: should not error when file does not exist
    deserializeTask
      ΓêÜ Test 9: should deserialize basic task (1 ms)
      ΓêÜ Test 10: should deserialize task with all fields (1 ms)
    deserializeTasks
      ΓêÜ Test 11: should deserialize all tasks from snapshot (2 ms)
    getDefaultPersistencePath
      ΓêÜ Test 12: should return path under .coe (1 ms)
    autoSave
      ΓêÜ Test 13: should start and stop auto-save timer (1 ms)
      ΓêÜ Test 14: should increment tasks processed (1 ms)

PASS tests/llmService.test.ts (7.355 s)
  LLM Service
    initializeLLMService
      ΓêÜ should throw error if fetch is not available (Node <18) (106 ms)
      ΓêÜ should use config from centralized config system (1 ms)
      ΓêÜ should read LLM config from centralized config system (1 ms)
      ΓêÜ should use validated config values from centralized config (validation handled by Zod) (5 ms)
      ΓêÜ should use maxTokens from centralized config (validation handled by Zod) (2 ms)
      ΓêÜ should initialize successfully with centralized config (1 ms)
    completeLLM
      ΓêÜ should make successful LLM request (4 ms)
      ΓêÜ should include system prompt if provided (1 ms)
      ΓêÜ should handle network errors and create blocked ticket (2 ms)
      ΓêÜ should handle HTTP error responses (2 ms)
      ΓêÜ should handle timeout with AbortError (2 ms)
      ΓêÜ should handle ECONNREFUSED error specifically (5 ms)
    streamLLM
      ΓêÜ should stream chunks and accumulate response (4 ms)
      ΓêÜ should skip malformed SSE lines gracefully (1 ms)
      ΓêÜ should abort on inactivity timeout (2072 ms)
      ΓêÜ should handle streaming network errors (5 ms)
      ΓêÜ should handle HTTP error in streaming (1 ms)
      ΓêÜ should abort on startup timeout (621 ms)
      ΓêÜ should abort on inactivity timeout after first chunk (2109 ms)
      ΓêÜ should not double-abort if startup and inactivity timeouts overlap (2038 ms)
    token management
      token estimation
        ΓêÜ should estimate tokens for empty string as 0 (2 ms)
        ΓêÜ should estimate tokens with reasonable accuracy (2 ms)
        ΓêÜ should estimate longer text with ┬▒20% variance tolerance
      message trimming
        ΓêÜ should not trim messages under 80% of maxTokens (5 ms)
        ΓêÜ should trim oldest messages when over 80% of maxTokens (4 ms)
        ΓêÜ should preserve system message even if it exceeds limit (19 ms)
        ΓêÜ should keep system message + last 3 exchanges minimum (1 ms)
      integration with completeLLM
        ΓêÜ should apply trimming before calling LLM (6 ms)
        ΓêÜ should work with legacy mode (prompt + systemPrompt) (2 ms)
      integration with streamLLM
        ΓêÜ should apply trimming before streaming (1 ms)
    validateConnection
      ΓêÜ should return success when endpoint responds with ok (1 ms)
      ΓêÜ should return failure when endpoint returns error status (1 ms)
      ΓêÜ should return failure when endpoint is unreachable (2 ms)
      ΓêÜ should return failure on timeout (1 ms)
    temperature configuration
      ΓêÜ should use config temperature by default (1 ms)
      ΓêÜ should allow temperature override in options (3 ms)

PASS tests/agents/researchAgent.test.ts
  ResearchAgent
    runResearch()
      ΓêÜ should generate a markdown report with query, timestamp, and content (4 ms)
      ΓêÜ should call completeLLM with correct system prompt and temperature (3 ms)
      ΓêÜ should simulate 10-minute delay before calling LLM (2 ms)
      ΓêÜ should handle LLM errors gracefully and return error MD report (3 ms)
      ΓêÜ should handle non-Error thrown values (2 ms)
      ΓêÜ should truncate long queries in logs to prevent overflow (1 ms)
      ΓêÜ should log completion with content length (2 ms)
      ΓêÜ should include helpful troubleshooting tips in error reports (2 ms)
    createTicket()
      ΓêÜ should create a ticket with default fields (17 ms)
      ΓêÜ should create a ticket with custom fields (12 ms)

PASS tests/cache/indexAdditional.test.ts
  Cache Index Additional Coverage
    ΓêÜ Test 1: should return empty index when read fails (10 ms)
    ΓêÜ Test 2: should return false when save fails (1 ms)
    ΓêÜ Test 3: should return false when removing missing item (1 ms)
    ΓêÜ Test 4: should update existing index entries (1 ms)
    ΓêÜ Test 5: should update last accessed timestamp (1 ms)
    ΓêÜ Test 6: should find items by hash and search filters (2 ms)
    ΓêÜ Test 7: should return empty stats on errors (3 ms)
    ΓêÜ Test 8: should filter search results by metadata (2 ms)
    ΓêÜ Test 9: should compute cache stats for normal index (1 ms)

PASS tests/services/autoModeState.test.ts
  AutoModeState
    Auto Mode Toggle
      ΓêÜ Test 1: should return setting value when no override is set (4 ms)
      ΓêÜ Test 2: should return override value when override is set (2 ms)
      ΓêÜ Test 3: should override setting regardless of setting value (1 ms)
      ΓêÜ Test 4: should revert to setting after reset (1 ms)
      ΓêÜ Test 5: should use default true when mock returns true (3 ms)
    Processed Tickets Tracking
      ΓêÜ Test 6: should return false for unprocessed tickets (3 ms)
      ΓêÜ Test 7: should return true for processed tickets (1 ms)
      ΓêÜ Test 8: should track multiple processed tickets (2 ms)
      ΓêÜ Test 9: should clear processed tickets on reset (1 ms)
      ΓêÜ Test 10: should handle duplicate marks idempotently (1 ms)
    Debounce Timer
      ΓêÜ Test 11: should initially have no debounce timer (1 ms)
      ΓêÜ Test 12: should set and get debounce timer (1 ms)
      ΓêÜ Test 13: should clear debounce timer (1 ms)
      ΓêÜ Test 14: should clear timer on reset (1 ms)
      ΓêÜ Test 15: should handle clearDebounceTimer when no timer set (3 ms)
      ΓêÜ Test 16: should export correct debounce constant (2 ms)
    Session Override Scenarios
      ΓêÜ Test 17: should simulate quick toggle use case (1 ms)
      ΓêÜ Test 18: should simulate extension restart resets override (15 ms)
      ΓêÜ Test 19: should track processed tickets during session (2 ms)
    Reset Function
      ΓêÜ Test 20: should reset all state components (1 ms)

PASS tests/config/watcher.test.ts
  Config Watcher
    ΓêÜ Test 1: should start watcher and mark active (4 ms)
    ΓêÜ Test 2: should reload config after debounce (9 ms)
    ΓêÜ Test 3: should stop watcher successfully (2 ms)
    ΓêÜ Test 4: should stop watcher on ENOENT error (2 ms)
    ΓêÜ Test 5: should reset watcher for tests (2 ms)
    ΓêÜ Test 6: should handle EPERM error (3 ms)
    ΓêÜ Test 7: should handle unknown error (3 ms)
    ΓêÜ Test 8: should return false when stopping non-existent watcher (2 ms)
    ΓêÜ Test 9: should clear debounce timer when stopping (1 ms)
    ΓêÜ Test 10: should handle config reload error (6 ms)
    ΓêÜ Test 11: should ignore non-change events (2 ms)
    ΓêÜ Test 12: should stop existing watcher before starting new one (3 ms)
    ΓêÜ Test 13: should handle watch creation error (2 ms)
    ΓêÜ Test 14: should handle watch creation with non-ENOENT error (3 ms)
    ΓêÜ Test 15: should debounce multiple rapid changes (4 ms)
    ΓêÜ Test 16: should handle change without filename (2 ms)
    ΓêÜ Test 17: should handle close() throwing error (2 ms)

PASS tests/integration.spec/llmService.live.test.ts
  LLM Service - LIVE Integration Tests
    Connection & Model Discovery
      Γùï skipped Test 1: should connect to OpenAI-compatible server
      Γùï skipped Test 2: should list available models
      Γùï skipped Test 3: should find test model in available models
    Chat Completions - Non-Streaming
      Γùï skipped Test 4: should get a response from basic prompt
      Γùï skipped Test 5: should handle response for nonexistent model
    Chat Completions - Streaming
      Γùï skipped Test 6: should stream response chunks
    Error Handling
      Γùï skipped Test 7: should timeout on very short timeout
      Γùï skipped Test 8: should handle unreachable endpoint gracefully
  LLM Service - Mock Sanity Check
    ΓêÜ Test 0: should have fetch available (Node 18+) (1 ms)

PASS tests/config/loader.test.ts
  Config Loader Tests
    File I/O (Happy Path)
      ΓêÜ Test 1: should load valid config file successfully (13 ms)
      ΓêÜ Test 2: should handle missing config file gracefully (1 ms)
      ΓêÜ Test 2b: should handle no workspace folder gracefully (1 ms)
      ΓêÜ Test 2c: should prompt for LLM endpoint when creating new config (2 ms)
      ΓêÜ Test 3: should merge partial config with defaults (1 ms)
    File I/O (Error Handling)
      ΓêÜ Test 4: should handle malformed JSON gracefully (3 ms)
      ΓêÜ Test 5: should handle file read errors (1 ms)
      ΓêÜ Test 6: should handle validation error with partial valid data (3 ms)
    Config Access Patterns
      ΓêÜ Test 7: should return config with readonly typing (13 ms)
      ΓêÜ Test 8: should preserve offline LLM endpoint with custom IP (1 ms)
    Coverage for All Config Sections
      ΓêÜ Test 9: should validate and merge all config sections (6 ms)

PASS tests/errors/LLMErrors.test.ts
  LLMErrors
    LLMError base class
      ΓêÜ Test 1: should create base error with correct properties (2 ms)
      ΓêÜ Test 2: should serialize to JSON (12 ms)
    LLMTimeoutError
      ΓêÜ Test 3: should create timeout error with phase-specific message (1 ms)
      ΓêÜ Test 4: should provide phase-specific retry suggestions
      ΓêÜ Test 5: should calculate retry delay based on phase (1 ms)
      ΓêÜ Test 6: should serialize with extended properties (1 ms)
    LLMOfflineError
      ΓêÜ Test 7: should create offline error with endpoint info (1 ms)
      ΓêÜ Test 8: should preserve original error (1 ms)
      ΓêÜ Test 9: should serialize with endpoint and fallback (1 ms)
    LLMResponseError
      ΓêÜ Test 10: should create response error with status code (1 ms)
      ΓêÜ Test 11: should detect rate limit errors (1 ms)
      ΓêÜ Test 12: should detect error types
    Type guards
      ΓêÜ Test 13: should correctly identify LLMError instances (2 ms)
      ΓêÜ Test 14: should correctly identify specific error types (1 ms)
    getLLMErrorMessage
      ΓêÜ Test 15: should extract user-friendly message from timeout error (1 ms)
      ΓêÜ Test 16: should extract fallback message from offline error
      ΓêÜ Test 17: should provide friendly message for rate limit
      ΓêÜ Test 18: should handle regular errors gracefully
      ΓêÜ Test 19: should handle non-error values

PASS tests/agents/answer/planContext.test.ts
  PlanContextExtractor
    Test 1-5: extractContext
      ΓêÜ Test 1: should return empty when plan not found (1 ms)
      ΓêÜ Test 2: should parse plan.json successfully (4 ms)
      ΓêÜ Test 3: should find relevant sections by keyword
      ΓêÜ Test 4: should handle invalid JSON gracefully
      ΓêÜ Test 5: should limit tokens in response (3 ms)
    Test 6-10: keyword extraction
      ΓêÜ Test 6: should extract meaningful keywords (1 ms)
      ΓêÜ Test 7: should handle empty question (1 ms)
      ΓêÜ Test 8: should score by keyword matches
      ΓêÜ Test 9: should filter short words (1 ms)
      ΓêÜ Test 10: should limit keywords to 10 (1 ms)
    Test 11-15: caching
      ΓêÜ Test 11: should cache plan between calls (1 ms)
      ΓêÜ Test 12: should clear cache on request (1 ms)
      ΓêÜ Test 13: should update path and clear cache
      ΓêÜ Test 14: should handle file read errors (1 ms)
      ΓêÜ Test 15: should estimate token count

PASS tests/llm/polling.test.ts
  TokenPoller
    MT-010.3: Token polling configuration
      ΓêÜ Test 1: should initialize with default poll interval of 30s (2 ms)
      ΓêÜ Test 2: should accept custom poll interval (1 ms)
      ΓêÜ Test 3: should validate poll interval on setPollingInterval (28 ms)
      ΓêÜ Test 4: should reject interval greater than 120s (1 ms)
      ΓêÜ Test 5: should accept valid poll interval (1 ms)
    Polling lifecycle
      ΓêÜ Test 6: should create session on startPolling (3 ms)
      ΓêÜ Test 7: should poll immediately on start (2 ms)
      ΓêÜ Test 8: should schedule subsequent polls (2 ms)
      ΓêÜ Test 9: should stop polling on stopPolling (2 ms)
    Token retrieval
      ΓêÜ Test 10: should emit tokens event when tokens received (3 ms)
      ΓêÜ Test 11: should emit complete event when stream completes (2 ms)
      ΓêÜ Test 12: should emit error event on poll failure (2 ms)
      ΓêÜ Test 13: should enforce maximum polls configuration (1 ms)
    Session management
      ΓêÜ Test 14: should track session status (1 ms)
      ΓêÜ Test 15: should return all active sessions (1 ms)
      ΓêÜ Test 16: should cleanup all sessions (2 ms)

PASS tests/services/llmService.streaming.test.ts
  LLM Service Queue/Backpressure (MT-009.6)
    ΓêÜ Test 1: should track active requests in queue stats (3 ms)
    ΓêÜ Test 2: should enforce maxConcurrentRequests limit (187 ms)
    ΓêÜ Test 3: should process requests concurrently up to limit (114 ms)
    ΓêÜ Test 4: should release slot after successful completion (1 ms)
    ΓêÜ Test 5: should release slot after error (12 ms)
    ΓêÜ Test 6: cache hit should bypass queue (not acquire slot) (2 ms)
    ΓêÜ Test 7: clearLLMQueue should drop pending requests (206 ms)
    ΓêÜ Test 8: should report correct max in queue stats (1 ms)

PASS tests/cache/changeDetection.test.ts
  Cache Change Detection
    ΓêÜ Test 1: should return null when hashing fails (4 ms)
    ΓêÜ Test 2: should create new registry when missing (1 ms)
    ΓêÜ Test 3: should register file hashes (2 ms)
    ΓêÜ Test 4: should invalidate cache when files change (2 ms)
    ΓêÜ Test 5: should schedule change detection (2 ms)
    ΓêÜ Test 6: should return tracked files from registry (1 ms)
    ΓêÜ Test 7: should untrack files and save registry (1 ms)
    ΓêÜ Test 8: should return false when untracking missing files (1 ms)

PASS tests/services/ticketDb/resolve.test.ts
  Ticket Resolution & Reopening (MT-006.8/006.9)
    createResolution
      ΓêÜ Test 1: should resolve from open status (1 ms)
      ΓêÜ Test 2: should resolve from all valid statuses (1 ms)
      ΓêÜ Test 3: should reject resolution from done status (1 ms)
      ΓêÜ Test 4: should reject resolution from resolved status (1 ms)
      ΓêÜ Test 5: should require resolution text
      ΓêÜ Test 6: should reject overly long resolution
      ΓêÜ Test 7: should include history entry with details (1 ms)
    createReopen
      ΓêÜ Test 8: should reopen from resolved status (1 ms)
      ΓêÜ Test 9: should reopen from all valid statuses (1 ms)
      ΓêÜ Test 10: should reject reopen from open status
      ΓêÜ Test 11: should require reason (1 ms)
      ΓêÜ Test 12: should track reopen count
    History Parsing
      ΓêÜ Test 13: should parse empty history (1 ms)
      ΓêÜ Test 14: should parse null history (1 ms)
      ΓêÜ Test 15: should parse history with changes
      ΓêÜ Test 16: should handle corrupted JSON (1 ms)
    History Serialization
      ΓêÜ Test 17: should round-trip serialize/parse
      ΓêÜ Test 18: should append to existing history (1 ms)
      ΓêÜ Test 19: should append to null history

PASS tests/services/taskQueue/readiness.test.ts
  readiness
    ReadinessCalculator
      ΓêÜ Test 1: should mark task with no dependencies as ready (2 ms)
      ΓêÜ Test 2: should mark task with incomplete deps as waiting (1 ms)
      ΓêÜ Test 3: should handle task completion and update dependents (1 ms)
      ΓêÜ Test 4: should handle task failure and block dependents (2 ms)
      ΓêÜ Test 5: should track running tasks
      ΓêÜ Test 6: should get all ready tasks (1 ms)
      ΓêÜ Test 7: should get summary of all states
      ΓêÜ Test 8: should get critical path to a task
      ΓêÜ Test 9: should estimate ready time (4 ms)
      ΓêÜ Test 10: should reset state (1 ms)
      ΓêÜ Test 11: should initialize from external state (1 ms)
    utility functions
      ΓêÜ Test 12: isTaskReady should return true when all deps complete (1 ms)
      ΓêÜ Test 13: isTaskReady should return false when deps incomplete (1 ms)
      ΓêÜ Test 14: getReadyTasks should return all ready tasks
      ΓêÜ Test 15: calculateOverallProgress should return percentage (1 ms)
      ΓêÜ Test 16: calculateOverallProgress should return 100 for empty graph

PASS tests/services/ticketDb/generateSchemaDoc.test.ts
  Schema Documentation Generator (MT-005.9)
    Schema Definition
      ΓêÜ Test 1: should define all expected fields (2 ms)
      ΓêÜ Test 2: should have descriptions for all fields (5 ms)
      ΓêÜ Test 3: should have types for all fields (1 ms)
      ΓêÜ Test 4: should have examples for most fields (1 ms)
      ΓêÜ Test 5: should track migration versions for all fields (2 ms)
    Index Definitions
      ΓêÜ Test 6: should define 4 performance indexes
      ΓêÜ Test 7: should include status_type composite index
      ΓêÜ Test 8: should have descriptions for all indexes
    generateSchemaMarkdown
      ΓêÜ Test 9: should generate non-empty markdown (1 ms)
      ΓêÜ Test 10: should include title
      ΓêÜ Test 11: should include fields summary table
      ΓêÜ Test 12: should include field details section (1 ms)
      ΓêÜ Test 13: should include indexes section
      ΓêÜ Test 14: should include status values (1 ms)
      ΓêÜ Test 15: should include type values
      ΓêÜ Test 16: should include state transitions (1 ms)
      ΓêÜ Test 17: should include all field names in summary table (2 ms)
    getSchemaField
      ΓêÜ Test 18: should find field by name
      ΓêÜ Test 19: should return undefined for unknown field
    getRequiredFields
      ΓêÜ Test 20: should return required fields
      ΓêÜ Test 21: should not include optional fields
    getFieldsByVersion
      ΓêÜ Test 22: should return fields from version 1 (1 ms)
      ΓêÜ Test 23: should return fields from version 2
      ΓêÜ Test 24: should return empty for non-existent version (1 ms)

PASS tests/services/context/contextBuilder.test.ts
  ContextBuilder
    Test 1: constructor
      ΓêÜ should create instance with default config (2 ms)
      ΓêÜ should create instance with custom config (2 ms)
    Test 2: setSection
      ΓêÜ should add a section (1 ms)
      ΓêÜ should update existing section (11 ms)
    Test 3: getSection
      ΓêÜ should get section by ID (1 ms)
      ΓêÜ should return undefined for non-existent section
    Test 4: removeSection
      ΓêÜ should remove a section (1 ms)
      ΓêÜ should return false for non-existent section (1 ms)
    Test 5: getSections
      ΓêÜ should return sections in order (3 ms)
    Test 6: getSectionsByType
      ΓêÜ should filter sections by type (4 ms)
    Test 7: build
      ΓêÜ should build context string
      ΓêÜ should include headers when configured
    Test 8: has
      ΓêÜ should check if section exists (2 ms)
    Test 9: clear
      ΓêÜ should clear all sections (1 ms)
    Test 10: clone
      ΓêÜ should create a copy (1 ms)
    Test 11: merge
      ΓêÜ should merge sections from another builder (3 ms)
      ΓêÜ should not overwrite existing sections by default (1 ms)
      ΓêÜ should overwrite when specified (2 ms)
    Test 12: getSummary
      ΓêÜ should return summary string (1 ms)

PASS tests/getErrors.spec/getErrors.active-scan.test.ts
  handleGetErrors - Active Scanning
    ΓêÜ Test 1: should scan for TypeScript errors when codebase has no errors (2 ms)
    ΓêÜ Test 2: should scan for skipped tests in test files
    ΓêÜ Test 3: should scan for under-coverage files from coverage report (1 ms)
    ΓêÜ Test 4: should return diagnostics with lightweight-scan source (1 ms)
    ΓêÜ Test 5: should include timestamp in diagnostics
    ΓêÜ Test 6: should handle errors and fall back to scanning gracefully (2 ms)
    ΓêÜ Test 7: should return all diagnostic arrays even if empty (1 ms)
    ΓêÜ Test 8: should handle skipped tests with various patterns
    ΓêÜ Test 9: should include file paths in under-coverage entries (1 ms)
    ΓêÜ Test 10: should log information during diagnostic scan (1 ms)
    ΓêÜ Test 11: should handle undefined params
    ΓêÜ Test 12: should handle empty object params (1 ms)
    ΓêÜ Test 13: should include all required fields in success response
    ΓêÜ Test 14: should not include error field in success response
    ΓêÜ Test 15: should provide error details on failure

PASS tests/services/ticketDb/pool.test.ts
  Connection Pool (MT-005.8)
    Configuration
      ΓêÜ Test 1: should have sensible default config (2 ms)
    Acquire
      ΓêÜ Test 2: should create first connection on acquire (1 ms)
      ΓêÜ Test 3: should create multiple connections (1 ms)
      ΓêÜ Test 4: should reuse released connections (1 ms)
      ΓêÜ Test 5: should not exceed max connections (1 ms)
      ΓêÜ Test 6: should timeout when all connections are busy (541 ms)
      ΓêÜ Test 7: should throw when pool is closed (6 ms)
    Release
      ΓêÜ Test 8: should mark connection as not in use
      ΓêÜ Test 9: should handle releasing unknown connection (1 ms)
    Close
      ΓêÜ Test 10: should close all connections (1 ms)
      ΓêÜ Test 11: should handle close errors gracefully
    Stats
      ΓêÜ Test 12: should report correct initial stats (1 ms)
      ΓêÜ Test 13: should track active and idle correctly (1 ms)
    hasAvailable
      ΓêÜ Test 14: should return true when pool has room
      ΓêÜ Test 15: should return true when idle connections exist (6 ms)
      ΓêÜ Test 16: should return false when all busy and at max
      ΓêÜ Test 17: should return false when pool is closed (1 ms)
    Concurrent Usage
      ΓêÜ Test 18: should handle acquire-release-acquire pattern (1 ms)
      ΓêÜ Test 19: should handle waiting for released connection (128 ms)
      ΓêÜ Test 20: should update lastUsedAt on acquire (19 ms)

PASS tests/services/ticketDb/reply.test.ts
  Ticket Reply Module (MT-006.11)
    createReply
      ΓêÜ Test 1: should create reply with valid data (3 ms)
      ΓêÜ Test 2: should generate sequential reply IDs (1 ms)
      ΓêÜ Test 3: should append to existing thread (1 ms)
      ΓêÜ Test 4: should include author when provided (2 ms)
      ΓêÜ Test 5: should include status when provided (1 ms)
      ΓêÜ Test 6: should reject empty content (1 ms)
      ΓêÜ Test 7: should reject content exceeding max length (2 ms)
      ΓêÜ Test 8: should reject invalid role (1 ms)
      ΓêÜ Test 9: should reject invalid status (1 ms)
    parseThread
      ΓêÜ Test 10: should parse valid thread JSON (1 ms)
      ΓêÜ Test 11: should return empty for null/undefined (1 ms)
      ΓêÜ Test 12: should handle corrupted JSON
      ΓêÜ Test 13: should handle non-array JSON
    serializeThread
      ΓêÜ Test 14: should round-trip serialize/parse (1 ms)
    getReplyCount
      ΓêÜ Test 15: should count replies in array
      ΓêÜ Test 16: should count from JSON string
      ΓêÜ Test 17: should return 0 for null (2 ms)
    getLatestReply
      ΓêÜ Test 18: should return last reply
      ΓêÜ Test 19: should return null for empty thread
    getRepliesByRole
      ΓêÜ Test 20: should filter by role

PASS tests/services/taskQueue/validation.test.ts
  validation
    isValidTaskId
      ΓêÜ Test 1: should accept valid task IDs (12 ms)
      ΓêÜ Test 2: should reject invalid task IDs (1 ms)
    validateDependsOn
      ΓêÜ Test 3: should pass for task with valid dependencies (1 ms)
      ΓêÜ Test 4: should fail for self-dependency
      ΓêÜ Test 5: should fail for missing dependency (2 ms)
      ΓêÜ Test 6: should warn for duplicate dependencies (1 ms)
      ΓêÜ Test 7: should fail for invalid task ID format (1 ms)
    validateTaskGraph
      ΓêÜ Test 8: should pass for valid task graph (1 ms)
      ΓêÜ Test 9: should fail for circular dependencies (2 ms)
      ΓêÜ Test 10: should warn for orphan tasks
    validateNewDependency
      ΓêÜ Test 11: should allow valid new dependency (1 ms)
      ΓêÜ Test 12: should reject self-dependency
      ΓêÜ Test 13: should reject missing dependency
      ΓêÜ Test 14: should reject cycle-creating dependency (1 ms)
    formatValidationErrors
      ΓêÜ Test 15: should format success message
      ΓêÜ Test 16: should format error messages (1 ms)

PASS tests/services/taskQueue/index.test.ts
  TaskQueue
    Test 1: constructor
      ΓêÜ should create instance with default config (1 ms)
      ΓêÜ should create instance with custom config
    Test 2: addTask
      ΓêÜ should add a task to the queue (2 ms)
      ΓêÜ should throw if task already exists (67 ms)
      ΓêÜ should set status to pending if dependencies exist (3 ms)
    Test 3: addTasks
      ΓêÜ should add multiple tasks (1 ms)
    Test 4: getNextTask
      ΓêÜ should return highest priority ready task (1 ms)
      ΓêÜ should return null if max concurrent reached (1 ms)
    Test 5: startTask
      ΓêÜ should mark task as running (4 ms)
      ΓêÜ should throw if task not ready (2 ms)
    Test 6: completeTask
      ΓêÜ should mark task as completed (1 ms)
      ΓêÜ should make dependent tasks ready (1 ms)
    Test 7: failTask
      ΓêÜ should mark task as failed (1 ms)
      ΓêÜ should block dependent tasks (1 ms)
    Test 8: getStats
      ΓêÜ should return correct statistics (2 ms)
    Test 9: getExecutionOrder
      ΓêÜ should return tasks in dependency order (1 ms)
    Test 10: circular dependency detection
      ΓêÜ should detect and reject circular dependencies (1 ms)
    Test 11: singleton pattern
      ΓêÜ should throw if initialized twice (1 ms)
      ΓêÜ should throw if getInstance called before init (2 ms)
      ΓêÜ should return instance after initialization (5 ms)

PASS tests/config/onboarding.test.ts
  Config Onboarding
    ΓêÜ Test 1: should detect first run when config missing (1 ms)
    ΓêÜ Test 2: should detect non-first run when config exists (1 ms)
    ΓêÜ Test 3: should run onboarding without opening config (1 ms)
    ΓêÜ Test 4: should open config when user selects Open Config (2 ms)
    ΓêÜ Test 5: should create example config file (1 ms)
    ΓêÜ Test 6: should validate config setup when files exist (2 ms)
    ΓêÜ Test 7: should report invalid config setup when directory missing (1 ms)
    ΓêÜ Test 8: should show onboarding tips
    ΓêÜ Test 9: should report invalid config setup when config file missing
    ΓêÜ Test 10: promptForOnboarding should return true when user selects Yes (1 ms)
    ΓêÜ Test 11: promptForOnboarding should return false when user selects Not Now
    ΓêÜ Test 12: promptForOnboarding should return false when user dismisses dialog (1 ms)
    ΓêÜ Test 13: createExampleConfig should return null when write fails
    ΓêÜ Test 14: createExampleConfig should return null when non-Error thrown
    ΓêÜ Test 15: runOnboarding should handle createDefaultConfigFile failure (1 ms)
    ΓêÜ Test 16: runOnboarding should handle exception during execution (6 ms)
    ΓêÜ Test 17: runOnboarding should handle non-Error exception (1 ms)

PASS tests/mcpServer/tools/getNextTask.spec.ts
  getNextTask Tool
    Parameter Validation
      ΓêÜ Test 1: should accept undefined parameters (4 ms)
      ΓêÜ Test 2: should accept null parameters (9 ms)
      ΓêÜ Test 3: should accept empty object (1 ms)
      ΓêÜ Test 4: should accept valid filter: ready (2 ms)
      ΓêÜ Test 5: should accept valid filter: blocked (1 ms)
      ΓêÜ Test 6: should accept valid filter: all (1 ms)
      ΓêÜ Test 7: should reject invalid filter (1 ms)
      ΓêÜ Test 8: should accept boolean includeContext
      ΓêÜ Test 9: should reject non-boolean includeContext (1 ms)
      ΓêÜ Test 10: should reject non-object parameters
    Task Retrieval
      ΓêÜ Test 11: should return task when queue has items (2 ms)
      ΓêÜ Test 12: should return null task when queue is empty (1 ms)
      ΓêÜ Test 13: should include full context by default (1 ms)
      ΓêÜ Test 14: should exclude context when includeContext is false
    Filter Handling
      ΓêÜ Test 15: should handle "ready" filter (default behavior)
      ΓêÜ Test 16: should return empty for "blocked" filter (1 ms)
      ΓêÜ Test 17: should reject invalid filter (1 ms)
    Error Handling
      ΓêÜ Test 18: should handle orchestrator not initialized error (2 ms)
      ΓêÜ Test 19: should handle generic orchestrator errors (1 ms)
      ΓêÜ Test 20: should handle non-Error exceptions (1 ms)
    Edge Cases
      ΓêÜ Test 21: should handle all blocked tasks scenario (1 ms)
      ΓêÜ Test 22: should work with default parameters (no params provided) (1 ms)
      ΓêÜ Test 23: should handle task with minimal fields (2 ms)

PASS tests/config/schema.test.ts
  Config Schema Tests
    Schema Validation (Happy Path)
      ΓêÜ Test 1: should parse valid config with all fields (2 ms)
      ΓêÜ Test 2: should apply defaults for missing optional fields (1 ms)
      ΓêÜ Test 3: should use defaults for completely empty config object (2 ms)
    Schema Validation (Edge Cases)
      ΓêÜ Test 4: should reject invalid enum value for logLevel (23 ms)
      ΓêÜ Test 5: should reject negative timeoutSeconds (1 ms)
      ΓêÜ Test 6: should reject zero for positive-only fields (1 ms)
      ΓêÜ Test 7: should reject string for numeric field (2 ms)
      ΓêÜ Test 8: should reject tokenPollIntervalSeconds below min (10) (1 ms)
      ΓêÜ Test 9: should reject tokenPollIntervalSeconds above max (120) (1 ms)
      ΓêÜ Test 10: should reject invalid URL for endpoint (2 ms)
      ΓêÜ Test 11: should accept valid URL with custom IP (1 ms)
      ΓêÜ Test 12: should accept boolean true for auditLog.enabled
      ΓêÜ Test 13: should reject non-boolean for auditLog.enabled (2 ms)
      ΓêÜ Test 14: should handle deep partial config merge (1 ms)
      ΓêÜ Test 15: should accept min boundary for tokenPollIntervalSeconds (10) (1 ms)
      ΓêÜ Test 16: should accept max boundary for tokenPollIntervalSeconds (120) (1 ms)
    Config Immutability
      ΓêÜ Test 17: returned config should be readonly (TypeScript type level) (1 ms)
    DEFAULT_CONFIG constant
      ΓêÜ Test 18: DEFAULT_CONFIG should match schema defaults (1 ms)
      ΓêÜ Test 19: DEFAULT_CONFIG should have all required sections (1 ms)

PASS tests/config/index.test.ts
  Config Singleton Service Tests
    Initialization
      ΓêÜ Test 1: should initialize config on first call (2 ms)
      ΓêÜ Test 2: should prevent re-initialization (singleton contract) (8 ms)
      ΓêÜ Test 3: should propagate loader errors (4 ms)
    Access & Retrieval
      ΓêÜ Test 4: should throw if getConfigInstance called before init (2 ms)
      ΓêÜ Test 5: should return config instance after init
      ΓêÜ Test 6: should return same instance on multiple calls (singleton)
    Test Reset for Isolation
      ΓêÜ Test 7: should allow re-initialization after reset (1 ms)

PASS tests/agents/orchestrator/status.test.ts
  TaskStatusManager
    initializeTask
      ΓêÜ Test 1: should initialize task as blocked when has dependencies (3 ms)
      ΓêÜ Test 2: should initialize task as ready when no dependencies (7 ms)
    transition
      ΓêÜ Test 3: should allow valid transition from ready to in-progress (3 ms)
      ΓêÜ Test 4: should allow transition from in-progress to verification (7 ms)
      ΓêÜ Test 5: should allow transition from verification to done (1 ms)
      ΓêÜ Test 6: should allow transition from verification to needs-revision (4 ms)
      ΓêÜ Test 7: should reject invalid transitions (5 ms)
      ΓêÜ Test 8: should return null for non-existent task (1 ms)
    canTransition
      ΓêÜ Test 9: should return true for valid transitions (1 ms)
      ΓêÜ Test 10: should return false for invalid transitions (1 ms)
    getValidTriggers
      ΓêÜ Test 11: should return valid triggers for ready state (3 ms)
      ΓêÜ Test 12: should return empty array for non-existent task (1 ms)
    forceStatus
      ΓêÜ Test 13: should force status regardless of current state (1 ms)
      ΓêÜ Test 14: should record force transition in history (4 ms)
    getSummary
      ΓêÜ Test 15: should return status counts (8 ms)
    getTasksByStatus
      ΓêÜ Test 16: should return all tasks with given status (2 ms)
    getHistory
      ΓêÜ Test 17: should track all transitions (1 ms)

PASS tests/agents/verification/investigation.test.ts
  InvestigationManager
    Test 1: constructor
      ΓêÜ should create instance (2 ms)
    Test 2: createInvestigationTicket
      ΓêÜ should create investigation ticket for failure (1 ms)
      ΓêÜ should include failure analysis (1 ms)
      ΓêÜ should return null on error (1 ms)
    Test 3: createFixTask
      ΓêÜ should create fix task for failure (1 ms)
      ΓêÜ should include retry number in title
      ΓêÜ should return null on error
    Test 4: failure analysis
      ΓêÜ should categorize test failures (1 ms)
      ΓêÜ should categorize incomplete implementation
      ΓêÜ should extract error messages (1 ms)
    Test 5: priority calculation
      ΓêÜ should set high priority for many failures (1 ms)
      ΓêÜ should set normal priority for few failures

PASS tests/services/taskQueue/circularDetection.test.ts
  circularDetection
    analyzeCircularDependencies
      ΓêÜ Test 1: should detect no cycles in empty graph (1 ms)
      ΓêÜ Test 2: should detect no cycles in linear chain AΓåÆBΓåÆC
      ΓêÜ Test 3: should detect simple cycle AΓåÆBΓåÆA (1 ms)
      ΓêÜ Test 4: should detect three-way cycle AΓåÆBΓåÆCΓåÆA (1 ms)
      ΓêÜ Test 5: should identify safe tasks outside cycles
      ΓêÜ Test 6: should provide suggestions for resolution (1 ms)
    wouldCreateCycle
      ΓêÜ Test 7: should return false for valid new dependency (1 ms)
      ΓêÜ Test 8: should return true for cycle-creating dependency
      ΓêÜ Test 9: should return true for self-dependency (1 ms)
    findMinimumCycleBreakers
      ΓêÜ Test 10: should return empty array for acyclic graph
      ΓêÜ Test 11: should suggest breaking simple cycle (1 ms)
    formatCycleReport
      ΓêÜ Test 12: should format positive report for no cycles (1 ms)
      ΓêÜ Test 13: should format detailed report for cycles (1 ms)

PASS tests/llm/queueWarning.test.ts
  QueueWarningManager
    MT-010.5: Queue warning ticket creation
      ΓêÜ Test 1: should not create ticket immediately when queue becomes full (3 ms)
      ΓêÜ Test 2: should create ticket after queue full for 60 seconds (2 ms)
      ΓêÜ Test 3: should cancel warning timer if queue drains before 60s (1 ms)
      ΓêÜ Test 4: should configure custom warning delay (1 ms)
      ΓêÜ Test 5: should throttle ticket creation (1 hour cooldown) (2 ms)
      ΓêÜ Test 6: should disable warning system (1 ms)
      ΓêÜ Test 7: should enable after disable (2 ms)
      ΓêÜ Test 8: should return state with getState() (6 ms)
      ΓêÜ Test 9: should create ticket with required fields (3 ms)
      ΓêÜ Test 10: should reset manager state (2 ms)

PASS tests/services/ticketDb/search.test.ts
  Ticket Search (MT-006.6)
    searchTickets
      ΓêÜ Test 1: should find tickets by title keyword (3 ms)
      ΓêÜ Test 2: should return empty for empty query (1 ms)
      ΓêÜ Test 3: should be case-insensitive by default
      ΓêÜ Test 4: should find tickets by description keyword (1 ms)
      ΓêÜ Test 5: should rank title matches higher (1 ms)
      ΓêÜ Test 6: should support multi-word queries
      ΓêÜ Test 7: should respect limit option
      ΓêÜ Test 8: should return empty when no matches (1 ms)
      ΓêÜ Test 9: should track matched fields
      ΓêÜ Test 10: should handle special characters in query (1 ms)
    buildSearchSQL
      ΓêÜ Test 11: should build LIKE clause for single term (1 ms)
      ΓêÜ Test 12: should build clause for multiple terms
      ΓêÜ Test 13: should handle empty query (1 ms)
      ΓêÜ Test 14: should support custom search fields
    highlightMatches
      ΓêÜ Test 15: should highlight matching terms (1 ms)
      ΓêÜ Test 16: should highlight multiple terms (2 ms)
      ΓêÜ Test 17: should be case-insensitive (1 ms)
      ΓêÜ Test 18: should handle empty inputs
      ΓêÜ Test 19: should support custom markers

PASS tests/services/context/index.test.ts
  ContextManager
    Test 1: constructor
      ΓêÜ should create instance with default config (1 ms)
      ΓêÜ should create instance with custom config
    Test 2: setSystemPrompt
      ΓêÜ should add system prompt (5 ms)
    Test 3: addConversationHistory
      ΓêÜ should add conversation history (2 ms)
    Test 4: addTaskContext
      ΓêÜ should add task context (3 ms)
    Test 5: addFileContext
      ΓêÜ should add file context (1 ms)
    Test 6: addDocumentation
      ΓêÜ should add documentation context (1 ms)
    Test 7: removeSection
      ΓêÜ should remove a section
    Test 8: getStats
      ΓêÜ should return correct statistics (1 ms)
    Test 9: buildContext with truncation
      ΓêÜ should truncate when over limit (1 ms)
      ΓêÜ should emit context-truncated event (2 ms)
    Test 10: estimateTokens
      ΓêÜ should estimate tokens for text
    Test 11: clear
      ΓêÜ should clear all context
    Test 12: singleton pattern
      ΓêÜ should throw if initialized twice (63 ms)
      ΓêÜ should throw if getInstance called before init (2 ms)
      ΓêÜ should return instance after initialization (1 ms)

PASS tests/services/taskQueue/blocking.test.ts
  blocking
    BlockingManager
      ΓêÜ Test 1: should block a task and cascade to dependents (2 ms)
      ΓêÜ Test 2: should not re-block already blocked tasks
      ΓêÜ Test 3: should track blocking chain (1 ms)
      ΓêÜ Test 4: should unblock when dependencies complete (1 ms)
      ΓêÜ Test 5: should keep manual holds even when deps complete
      ΓêÜ Test 6: should remove manual hold explicitly
      ΓêÜ Test 7: should get block info
      ΓêÜ Test 8: should list all blocked tasks
      ΓêÜ Test 9: should clear all blocks (1 ms)
    getTasksBlockedBy
      ΓêÜ Test 10: should get all tasks blocked by a failure (1 ms)
    calculateBlastRadius
      ΓêÜ Test 11: should calculate blast radius for leaf task
      ΓêÜ Test 12: should calculate blast radius for root task (1 ms)

PASS tests/agents/orchestrator/reportTaskDone.test.ts
  reportTaskDone handler
    ΓêÜ Test 1: should reject report without task ID (2 ms)
    ΓêÜ Test 2: should reject report without modified files when required (1 ms)
    ΓêÜ Test 3: should reject report with short summary
    ΓêÜ Test 4: should accept valid report for running task (2 ms)
    ΓêÜ Test 5: should auto-pass with high confidence (1 ms)
    ΓêÜ Test 6: should reject report for non-running task (1 ms)
    ΓêÜ Test 7: should reject report for non-existent task (1 ms)
    validateReportTaskDoneRequest
      ΓêÜ Test 8: should return null for invalid params
      ΓêÜ Test 9: should parse valid params

PASS tests/mcpServer/tools/reportTaskDone.spec.ts
  reportTaskDone Tool
    Parameter Validation
      ΓêÜ Test 1: should reject non-object params (6 ms)
      ΓêÜ Test 2: should require taskId (6 ms)
      ΓêÜ Test 3: should require valid status (2 ms)
      ΓêÜ Test 4: should accept valid params (4 ms)
    Task Reporting
      ΓêÜ Test 5: should return error when task not found (1 ms)
      ΓêÜ Test 6: should update ticket to done
      ΓêÜ Test 7: should append notes to description
      ΓêÜ Test 8: should map failed to blocked
    Verification Trigger
      ΓêÜ Test 9: should trigger verification when done with codeDiff
      ΓêÜ Test 10: should mark blocked if verification fails (1 ms)
    Error Handling
      ΓêÜ Test 11: should return internal error on exception (2 ms)

PASS tests/services/taskQueue/visualization.test.ts
  visualization
    generateMermaidDiagram
      ΓêÜ Test 1: should generate valid Mermaid syntax (2 ms)
      ΓêÜ Test 2: should show dependency arrows (1 ms)
      ΓêÜ Test 3: should include task metadata when provided (2 ms)
      ΓêÜ Test 4: should include style definitions when requested (3 ms)
      ΓêÜ Test 5: should handle empty graph (1 ms)
      ΓêÜ Test 6: should support dark theme (1 ms)
    generateDependencyMap
      ΓêÜ Test 7: should generate markdown document (9 ms)
      ΓêÜ Test 8: should include summary statistics (6 ms)
      ΓêÜ Test 9: should include Mermaid diagram (3 ms)
      ΓêÜ Test 10: should include critical path section (1 ms)
      ΓêÜ Test 11: should include parallelization levels (1 ms)
      ΓêÜ Test 12: should include task details table (1 ms)
      ΓêÜ Test 13: should include dependency details (1 ms)
      ΓêÜ Test 14: should show status emojis (1 ms)
    getMermaidSvgUrl
      ΓêÜ Test 15: should generate mermaid.live URL (2 ms)

PASS tests/agents/verification/decision.test.ts
  VerificationDecision
    Test 1: constructor
      ΓêÜ should create instance with default config (2 ms)
      ΓêÜ should create instance with custom config (1 ms)
    Test 2: decide - passing scenarios
      ΓêÜ should pass when tests pass and AC matches (1 ms)
      ΓêÜ should include details in result (1 ms)
    Test 3: decide - failing scenarios
      ΓêÜ should fail when tests fail (1 ms)
      ΓêÜ should fail when AC match score too low
    Test 4: testsPassing helper
      ΓêÜ should return true for passing tests
      ΓêÜ should return false for failing tests
    Test 5: acMatching helper
      ΓêÜ should return true for high match score (1 ms)
      ΓêÜ should return false for low match score
    Test 6: generateSummary
      ΓêÜ should generate passing summary (1 ms)
      ΓêÜ should generate failing summary with recommendations

PASS tests/services/taskQueue/priorityQueue.test.ts
  PriorityQueue
    Test 1: constructor
      ΓêÜ should create empty queue (3 ms)
    Test 2: enqueue
      ΓêÜ should add items to queue (1 ms)
    Test 3: dequeue
      ΓêÜ should return items in priority order (min-heap) (1 ms)
      ΓêÜ should return items in priority order (max-heap) (1 ms)
      ΓêÜ should return undefined for empty queue
    Test 4: peek
      ΓêÜ should return highest priority item without removing (1 ms)
    Test 5: custom comparator
      ΓêÜ should work with objects and custom compare (1 ms)
    Test 6: remove
      ΓêÜ should remove specific item
      ΓêÜ should return undefined if not found (1 ms)
    Test 7: update
      ΓêÜ should update item priority
    Test 8: find and has
      ΓêÜ should find item (1 ms)
      ΓêÜ should check if item exists
    Test 9: clear and toArray
      ΓêÜ should clear queue (1 ms)
      ΓêÜ should convert to sorted array

PASS tests/cache/retention.test.ts
  Cache Retention
    ΓêÜ Test 1: should return expired item hashes (2 ms)
    ΓêÜ Test 2: should handle errors when getting expired items (1 ms)
    ΓêÜ Test 3: should apply retention policy and delete expired items (2 ms)
    ΓêÜ Test 4: should report errors when deletion fails (1 ms)
    ΓêÜ Test 5: should schedule retention cleanup (2 ms)
    ΓêÜ Test 6: should format cache item ages (1 ms)
    ΓêÜ Test 7: should calculate cache item age (2 ms)

PASS tests/services/taskQueue/topologicalSort.test.ts
  TopologicalSort
    Test 1: topologicalSort
      ΓêÜ should sort nodes in dependency order (2 ms)
      ΓêÜ should handle empty graph (1 ms)
      ΓêÜ should handle independent nodes
    Test 2: detectCircularDependencies
      ΓêÜ should detect simple cycle (1 ms)
      ΓêÜ should detect longer cycles
      ΓêÜ should return empty for acyclic graph
    Test 3: hasCircularDependencies
      ΓêÜ should return true for cyclic graph
      ΓêÜ should return false for acyclic graph (1 ms)
    Test 4: getCriticalPath
      ΓêÜ should find longest path
      ΓêÜ should return single node for single-node graph
    Test 5: getParallelLevels
      ΓêÜ should group tasks that can run in parallel (1 ms)

PASS tests/services/context/priorityTruncation.test.ts
  PriorityTruncator
    Test 1: constructor
      ΓêÜ should create instance with default config (1 ms)
      ΓêÜ should create instance with custom config
    Test 2: truncate - fits within limit
      ΓêÜ should keep all content when it fits
    Test 3: truncate - removes low priority first
      ΓêÜ should remove low priority content first (1 ms)
    Test 4: truncate - preserves critical content
      ΓêÜ should always include critical content (1 ms)
    Test 5: fitsWithinLimit
      ΓêÜ should return true when content fits (1 ms)
      ΓêÜ should return false when content exceeds limit
    Test 6: calculateRemoval
      ΓêÜ should calculate removal statistics (1 ms)
    Test 7: comparePriority
      ΓêÜ should compare priorities correctly
    Test 8: meetsMinimumPriority
      ΓêÜ should check if priority meets minimum

PASS tests/agents/verification/testRunner.test.ts
  TestRunner
    Test 1: constructor
      ΓêÜ should create instance with default config (1 ms)
      ΓêÜ should create instance with custom config (1 ms)
    Test 2: runTests - success
      ΓêÜ should return passed result for successful tests (2 ms)
      ΓêÜ should parse coverage from output (2 ms)
    Test 3: runTests - failure
      ΓêÜ should return failed result for test failures (1 ms)
      ΓêÜ should handle exec errors (1 ms)
    Test 4: isTestRunning
      ΓêÜ should return false when not running (1 ms)
    Test 5: cancel
      ΓêÜ should cancel running tests (1 ms)
    Test 6: test file targeting
      ΓêÜ should build command with target files (5 ms)

PASS tests/logger.test.ts
  Logger
    initializeLogger
      ΓêÜ should initialize without throwing errors when config file does not exist (2 ms)
      ΓêÜ should initialize with default log level when config file is missing (1 ms)
      ΓêÜ should read log level from config file when it exists (3 ms)
      ΓêÜ should handle invalid JSON in config file gracefully (1 ms)
    logInfo
      ΓêÜ should log info messages (1 ms)
    logWarn
      ΓêÜ should log warning messages (1 ms)
    logError
      ΓêÜ should log error messages as strings (1 ms)
      ΓêÜ should log Error objects (1 ms)

PASS tests/services/taskQueue/dependencyGraph.test.ts
  DependencyGraph
    Test 1: constructor
      ΓêÜ should create empty graph (2 ms)
    Test 2: addNode
      ΓêÜ should add nodes (1 ms)
      ΓêÜ should not duplicate nodes (2 ms)
    Test 3: addDependency
      ΓêÜ should add dependency relationship
      ΓêÜ should auto-create nodes
    Test 4: removeDependency
      ΓêÜ should remove dependency (1 ms)
    Test 5: removeNode
      ΓêÜ should remove node and relationships (1 ms)
    Test 6: getAllDependencies
      ΓêÜ should get transitive dependencies
    Test 7: getAllDependents
      ΓêÜ should get transitive dependents (1 ms)
    Test 8: getRoots and getLeaves
      ΓêÜ should identify roots (no dependencies) (1 ms)
      ΓêÜ should identify leaves (no dependents)
    Test 9: clear
      ΓêÜ should clear all nodes (1 ms)

PASS tests/services/context/tokenCounter.test.ts
  TokenCounter
    Test 1: constructor
      ΓêÜ should create instance with default config (3 ms)
      ΓêÜ should create instance with custom config (1 ms)
    Test 2: count
      ΓêÜ should return 0 for empty string (1 ms)
      ΓêÜ should estimate tokens for text
      ΓêÜ should count more tokens for longer text
    Test 3: code detection
      ΓêÜ should detect code and apply multiplier (1 ms)
    Test 4: countMany
      ΓêÜ should count tokens for multiple strings (1 ms)
    Test 5: fitsWithin
      ΓêÜ should return true if text fits
      ΓêÜ should return false if text exceeds limit (1 ms)
    Test 6: getMaxLength
      ΓêÜ should calculate max character length for token limit (1 ms)
    Test 7: truncateToFit
      ΓêÜ should not truncate if text fits
      ΓêÜ should truncate long text (1 ms)
    Test 8: utility functions
      ΓêÜ estimateTokens should work
      ΓêÜ fitsWithinLimit should work

PASS tests/agents/verification/stabilityTimer.test.ts
  StabilityTimer
    Test 1: constructor
      ΓêÜ should create instance with default config (2 ms)
      ΓêÜ should create instance with custom config (1 ms)
    Test 2: waitForStability
      ΓêÜ should resolve after delay when no changes (10 ms)
      ΓêÜ should emit stable event when complete (4 ms)
    Test 3: reportFileChange
      ΓêÜ should reset timer when file changes (3 ms)
      ΓêÜ should ignore changes for unrelated files (1 ms)
    Test 4: cancelAll
      ΓêÜ should cancel active sessions (16 ms)
    Test 5: maxWait timeout
      ΓêÜ should resolve after maxWait even with changes (2 ms)
    Test 6: getActiveSessionCount
      ΓêÜ should track multiple sessions (4 ms)

PASS tests/cache/storage.test.ts
  Cache Storage
    ΓêÜ Test 1: should skip saving when payload already cached (1 ms)
    ΓêÜ Test 2: should return error when save fails (1 ms)
    ΓêÜ Test 3: should return error when payload is missing (1 ms)
    ΓêÜ Test 4: should load payload when present (3 ms)
    ΓêÜ Test 5: should return false when deleting missing payload
    ΓêÜ Test 6: should handle delete errors (1 ms)
    ΓêÜ Test 7: should report payload existence (1 ms)
    ΓêÜ Test 8: should return payload size when file exists (1 ms)
    ΓêÜ Test 9: should return -1 when payload size is unavailable (1 ms)
    ΓêÜ Test 10: should list cached payload hashes (1 ms)

PASS tests/agents/verification/matching.test.ts
  AcceptanceCriteriaMatcher
    Test 1: constructor
      ΓêÜ should create instance with default config (2 ms)
      ΓêÜ should create instance with custom config (1 ms)
    Test 2: matchCriteria
      ΓêÜ should return perfect score when all criteria matched (2 ms)
      ΓêÜ should return zero score for no matches (1 ms)
      ΓêÜ should return score of 1.0 for empty criteria (1 ms)
    Test 3: generateUnmatchedSummary
      ΓêÜ should return success message when all matched
      ΓêÜ should list unmatched criteria (1 ms)

PASS tests/agents/verification/index.test.ts
  VerificationTeam
    Test 1: constructor
      ΓêÜ should create instance with default config (1 ms)
      ΓêÜ should create instance with custom config (1 ms)
    Test 2: initialize
      ΓêÜ should initialize all components (1 ms)
      ΓêÜ should emit initialized event
    Test 3: getStatus
      ΓêÜ should return verification status for task (1 ms)
    Test 4: resetRetryCount
      ΓêÜ should reset retry count for task
    Test 5: shutdown
      ΓêÜ should clean up resources on shutdown (1 ms)
    Test 6: singleton pattern
      ΓêÜ should throw if initialized twice (43 ms)
      ΓêÜ should throw if getInstance called before init (1 ms)
      ΓêÜ should return instance after initialization (1 ms)

PASS tests/agents/orchestrator/getNextTask.test.ts
  getNextTask handler
    ΓêÜ Test 1: should return hasTask=false when queue is empty (3 ms)
    ΓêÜ Test 2: should return next ready task from queue (2 ms)
    ΓêÜ Test 3: should respect maxPriority filter (1 ms)
    ΓêÜ Test 4: should include queue status in response (1 ms)
    ΓêÜ Test 5: validateGetNextTaskRequest always returns true
    ΓêÜ Test 6: should mark task as running after retrieving (1 ms)

PASS tests/mcpServer/serverMessages.test.ts
  MCPServer message handling
    ΓêÜ Test 1: should respond to getNextTask requests (48 ms)
    ΓêÜ Test 2: should send error for invalid parameters (3 ms)
    ΓêÜ Test 3: should send method not found error for unknown methods (18 ms)

PASS tests/mcpServer/jsonrpc.spec.ts
  JSON-RPC Helpers
    ΓêÜ Test 1: should parse a valid single request (1 ms)
    ΓêÜ Test 2: should return parse error on invalid JSON
    ΓêÜ Test 3: should reject invalid request objects (1 ms)
    ΓêÜ Test 4: should handle batch requests (9 ms)
    ΓêÜ Test 5: should report invalid request inside batch (1 ms)
    ΓêÜ Test 6: should reject empty batch (10 ms)
    ΓêÜ Test 7: should build error response (1 ms)

PASS tests/cache/structureAdditional.test.ts
  Cache Structure Additional Coverage
    ΓêÜ Test 1: should return false when cache directories are not writable (2 ms)
    ΓêÜ Test 2: should clean up stale temp files (1 ms)
    ΓêÜ Test 3: should handle cleanup errors gracefully (1 ms)
    ΓêÜ Test 4: should report initialization errors (1 ms)

PASS tests/ui/orchestratorStatusTreeProvider.test.ts
  OrchestratorStatusTreeDataProvider
    ΓêÜ Test 1: should return three status items with correct labels (2 ms)
    ΓêÜ Test 2: should show Idle when no last picked task (1 ms)
    ΓêÜ Test 3: should refresh when queue change event fires (1 ms)
    ΓêÜ Test 4: should assign click command for details (1 ms)

PASS tests/getErrors.spec/validateGetErrorsParams.test.ts
  validateGetErrorsParams
    ΓêÜ Test 1: should validate undefined params as valid (1 ms)
    ΓêÜ Test 2: should validate null params as valid (1 ms)
    ΓêÜ Test 3: should validate empty object as valid (1 ms)
    ΓêÜ Test 4: should validate object with properties as valid
    ΓêÜ Test 5: should reject non-object params (string) (1 ms)
    ΓêÜ Test 6: should reject non-object params (number)
    ΓêÜ Test 7: should reject non-object params (boolean)
    ΓêÜ Test 8: should reject non-object params (array)

PASS tests/ui/llmStatusBar.test.ts
  LlmStatusBarManager
    ΓêÜ shows spinner on first start and hides after debounce (3 ms)
    ΓêÜ keeps spinner for concurrent calls (1 ms)
    ΓêÜ cancels pending hide when a new call starts (4 ms)

PASS tests/integration.spec/getRegisteredTools.test.ts
  getRegisteredTools
    ΓêÜ should return a copy of the registered tools array (2 ms)
    ΓêÜ should not allow modifications to the original registered tools (1 ms)

PASS tests/errors/errorCodes.spec.ts
  ErrorCode Enum
    ΓêÜ Test 1: should define key error codes (2 ms)
    ΓêÜ Test 2: should include drift-related error codes (1 ms)
    ΓêÜ Test 3: should have unique values

PASS tests/integration.spec/initializeMCPServer.web.spec.ts
  MCP Tool Registration
    ΓêÜ Test 1: should register at least three MCP tools (2 ms)
    ΓêÜ Test 2: should include required tool names (1 ms)

PASS tests/integration.spec/logRegisteredTools.test.ts
  logRegisteredTools
    ΓêÜ should log the names of all registered tools (1 ms)

PASS tests/example.test.ts
  ΓêÜ hello world! (2 ms)

PASS tests/mcpServer/tools/askQuestion.spec.ts
  askQuestion Tool
    Parameter Validation
      ΓêÜ Test 1: should reject non-object params (2 ms)
      ΓêÜ Test 2: should require non-empty question (1 ms)
      ΓêÜ Test 3: should reject non-string chatId (1 ms)
      ΓêÜ Test 4: should accept valid parameters
    Answer Handling
      ΓêÜ Test 5: should return answer on success (1 ms)
      ΓêÜ Test 6: should create ticket on timeout (2 ms)
      ΓêÜ Test 7: should return internal error on failure (2 ms)

PASS tests/index.test.ts
  getMCPServerInstance
    ΓêÜ should return null if the MCP server is not initialized (1 ms)
    ΓêÜ should return the MCP server instance after initialization (1 ms)
    ΓêÜ should return the same instance if called multiple times after initialization
    ΓêÜ should return null after the MCP server is reset (1 ms)
    ΓêÜ should not initialize a new MCP server if one already exists (1 ms)
    ΓêÜ should log appropriate messages during initialization (1 ms)
  initializeMCPServer
    ΓêÜ should initialize and start the MCP server if not already initialized (8 ms)
    ΓêÜ should not initialize a new MCP server if one already exists (2 ms)
    ΓêÜ should handle resetting the MCP server for tests (1 ms)
    ΓêÜ should handle multiple calls to resetMCPServerForTests gracefully (1 ms)
    ΓêÜ should return null if MCP server is not initialized
    ΓêÜ should return the MCP server instance if initialized (1 ms)
    ΓêÜ should log appropriate messages when MCP server is initialized in standalone mode
  resetMCPServerForTests
    ΓêÜ should stop and reset the MCP server instance if it exists (1 ms)
    ΓêÜ should do nothing if no MCP server instance exists

PASS tests/answerAgent.spec/AnswerAgent.clearHistory.web.spec.ts
  AnswerAgent - clearHistory
    ΓêÜ should delete the conversation history for the given chatId and log the action (2 ms)
    ΓêÜ should not log anything if the chatId does not exist in the conversation history

ts-jest[config] (WARN) message TS151002: Using hybrid module kind (Node16/18/Next) is only supported in "isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
PASS tests/mcpServer.test.ts
  MCP Server
    Server Lifecycle
      ΓêÜ should start the server successfully (10 ms)
      ΓêÜ should stop the server successfully
      ΓêÜ should not start the server twice (1 ms)
    JSON-RPC Request Handling
      ΓêÜ should handle valid getNextTask request (69 ms)
      ΓêÜ should handle invalid JSON with parse error (61 ms)
      ΓêÜ should handle unknown method with method not found error (54 ms)
      ΓêÜ should handle invalid JSON-RPC version (65 ms)
      ΓêÜ should handle orchestrator error gracefully (65 ms)
    Edge Cases
      ΓêÜ should handle request without id (59 ms)
      ΓêÜ should handle empty response from orchestrator (64 ms)
    COE Agent Tool
      ΓêÜ should route "plan" command to planning agent (59 ms)
      ΓêÜ should route "verify" command and format result as PASS/FAIL (58 ms)
      ΓêÜ should format FAIL verification result correctly (62 ms)
      ΓêÜ should route "ask" command to answer agent (63 ms)
      ΓêÜ should return error for invalid command (67 ms)
      ΓêÜ should return error for missing task arg in plan command (69 ms)
      ΓêÜ should return error for missing code arg in verify command (61 ms)
      ΓêÜ should return error for missing question arg in ask command (61 ms)
      ΓêÜ should return error for missing args object (63 ms)
      ΓêÜ should handle orchestrator errors gracefully (63 ms)
      ΓêÜ should use default task description for verify when not provided (61 ms)
    reportTaskDone Tool
      ΓêÜ should handle valid reportTaskDone request (62 ms)
      ΓêÜ should return error for invalid reportTaskDone params (63 ms)
      ΓêÜ should return error when reportTaskDone fails (62 ms)
    askQuestion Tool
      ΓêÜ should handle valid askQuestion request (62 ms)
      ΓêÜ should return error for invalid askQuestion params (62 ms)
      ΓêÜ should return error when askQuestion fails (63 ms)
    getErrors Tool
      ΓêÜ should handle valid getErrors request (64 ms)
      ΓêÜ should handle getErrors request without params (61 ms)
      ΓêÜ should return error for invalid getErrors params (61 ms)
      ΓêÜ should return error when getErrors fails (62 ms)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File                                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                                                                                                                                                                                                                                 
------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
All files                           |   60.63 |    47.36 |   54.71 |   61.82 |                                                                                                                                                                                                                                                                                                                                                                   
 src                                |   61.95 |    41.55 |   53.84 |   62.06 |                                                                                                                                                                                                                                                                                                                                                                   
  extension.ts                      |   59.69 |    36.86 |   49.15 |   59.78 | 97,102-103,120-129,138-151,166-170,180-187,293-302,377-378,382-389,396-448,480-482,493-494,548-550,572,577-579,599-601,615-616,687-688,695-697,716-718,731-773,857-889,895-913,926-943,955-957,993-995,1043-1045,1080-1120,1137-1139,1150,1184-1186,1193-1208,1223-1246,1255-1296,1307-1322,1329-1330,1360,1371-1403,1417-1424,1438-1445,1459-1466,1547,1563-1564 
  logger.ts                         |     100 |    85.71 |     100 |     100 | 45,58-80                                                                                                                                                                                                                                                                                                                                                          
 src/agents                         |   99.31 |    85.71 |     100 |   99.31 |                                                                                                                                                                                                                                                                                                                                                                   
  answerAgent.ts                    |    99.2 |    84.21 |     100 |   99.19 | 268                                                                                                                                                                                                                                                                                                                                                               
  researchAgent.ts                  |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
 src/agents/answer                  |   68.61 |    58.06 |   77.71 |   68.27 |                                                                                                                                                                                                                                                                                                                                                                   
  cache.ts                          |   93.81 |    91.42 |     100 |   93.18 | 111-112,117-119,183                                                                                                                                                                                                                                                                                                                                               
  callerValidation.ts               |    73.8 |    65.11 |   71.42 |    73.8 | 86-118,234-247,287-289                                                                                                                                                                                                                                                                                                                                            
  citations.ts                      |     100 |     92.1 |     100 |     100 | 205-211                                                                                                                                                                                                                                                                                                                                                           
  codingAIWorkflow.ts               |   76.72 |    54.54 |   84.21 |   76.72 | 139-141,159,177-179,215-218,228-229,233-234,246-247,262-264,279,321-325,345                                                                                                                                                                                                                                                                                       
  confidence.ts                     |     100 |    78.57 |     100 |     100 | 125,155-170,186-187                                                                                                                                                                                                                                                                                                                                               
  designSystem.ts                   |       0 |        0 |       0 |       0 | 11-478                                                                                                                                                                                                                                                                                                                                                            
  index.ts                          |       0 |        0 |       0 |       0 | 13-398                                                                                                                                                                                                                                                                                                                                                            
  planContext.ts                    |   92.52 |    76.19 |      95 |      95 | 218,248,267,296,316                                                                                                                                                                                                                                                                                                                                               
  prdContext.ts                     |   99.04 |    93.33 |     100 |   99.01 | 295                                                                                                                                                                                                                                                                                                                                                               
  timeout.ts                        |     100 |    83.33 |     100 |     100 | 111,175                                                                                                                                                                                                                                                                                                                                                           
  validation.ts                     |   98.71 |       94 |     100 |     100 | 188,226                                                                                                                                                                                                                                                                                                                                                           
 src/agents/answer/handlers         |   95.78 |    88.63 |     100 |   95.74 |                                                                                                                                                                                                                                                                                                                                                                   
  askQuestion.ts                    |    96.8 |    88.63 |     100 |   96.77 | 181-182,292                                                                                                                                                                                                                                                                                                                                                       
  index.ts                          |       0 |      100 |     100 |       0 | 9                                                                                                                                                                                                                                                                                                                                                                 
 src/agents/clarity                 |   68.96 |    52.97 |   67.04 |   68.99 |                                                                                                                                                                                                                                                                                                                                                                   
  followUp.ts                       |   65.62 |    45.09 |   56.52 |   65.85 | 242-244,255,260,265-266,280,283,314-319,337,363-375,402-405,429-486,498,505-508                                                                                                                                                                                                                                                                                   
  index.ts                          |   69.31 |    46.42 |      65 |   70.23 | 102-104,113,118-123,129-131,145-149,176,194-195,254-259,266-269,277                                                                                                                                                                                                                                                                                               
  scoring.ts                        |   92.63 |    82.92 |   94.44 |   92.39 | 265-267,457,464-467                                                                                                                                                                                                                                                                                                                                               
  trigger.ts                        |   54.03 |    39.58 |   59.25 |   52.99 | 94-111,125-154,179-183,197,205,216-240,267,290-301,332,361,373,380-383                                                                                                                                                                                                                                                                                            
 src/agents/custom                  |   91.33 |     79.6 |   87.75 |   91.89 |                                                                                                                                                                                                                                                                                                                                                                   
  executor.ts                       |   99.11 |    90.19 |   97.72 |   99.09 | 412-413                                                                                                                                                                                                                                                                                                                                                           
  hardlock.ts                       |     100 |    93.75 |     100 |     100 | 122                                                                                                                                                                                                                                                                                                                                                               
  metrics.ts                        |   88.72 |       72 |   96.55 |   88.18 | 25,36-37,48-49,60,135,155,266,349,386-391                                                                                                                                                                                                                                                                                                                         
  preview.ts                        |      99 |    95.83 |     100 |   98.98 | 321                                                                                                                                                                                                                                                                                                                                                               
  routing.ts                        |   96.47 |    92.85 |   96.96 |   98.13 | 459,475,504                                                                                                                                                                                                                                                                                                                                                       
  schema.ts                         |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  storage.ts                        |   96.61 |    80.76 |     100 |   96.61 | 162-163,414-415,666,678-679                                                                                                                                                                                                                                                                                                                                       
  templates.ts                      |       0 |        0 |       0 |       0 | 56-425                                                                                                                                                                                                                                                                                                                                                            
  variables.ts                      |       0 |        0 |       0 |       0 | 31-190                                                                                                                                                                                                                                                                                                                                                            
 src/agents/orchestrator            |   93.66 |    81.11 |   94.17 |   93.77 |                                                                                                                                                                                                                                                                                                                                                                   
  boss.ts                           |   92.63 |    85.29 |   96.15 |   92.63 | 114,162,184-189                                                                                                                                                                                                                                                                                                                                                   
  codingOnlyGuard.ts                |   85.45 |       75 |   85.71 |    84.9 | 129-136,269-276                                                                                                                                                                                                                                                                                                                                                   
  deadlock.ts                       |   98.01 |    88.63 |   94.11 |   98.96 | 246                                                                                                                                                                                                                                                                                                                                                               
  fileWatcher.ts                    |     100 |    88.46 |     100 |     100 | 114,154,193                                                                                                                                                                                                                                                                                                                                                       
  index.ts                          |       0 |      100 |       0 |       0 | 11-44                                                                                                                                                                                                                                                                                                                                                             
  loop.ts                           |     100 |    81.81 |     100 |     100 | 154,165,215-220,261-265,299-314                                                                                                                                                                                                                                                                                                                                   
  priorityHandler.ts                |   83.33 |    61.66 |    92.3 |   82.35 | 158,163,197-215                                                                                                                                                                                                                                                                                                                                                   
  queue.ts                          |    98.7 |    82.14 |     100 |   98.66 | 93                                                                                                                                                                                                                                                                                                                                                                
  recovery.ts                       |     100 |    96.66 |     100 |     100 | 208                                                                                                                                                                                                                                                                                                                                                               
  state.ts                          |     100 |    81.63 |     100 |     100 | 93,127,150-179,240,308-314                                                                                                                                                                                                                                                                                                                                        
  status.ts                         |   83.09 |    84.61 |   89.47 |   84.28 | 163,215-216,268-288                                                                                                                                                                                                                                                                                                                                               
 src/agents/orchestrator/handlers   |   91.04 |    76.27 |     100 |   91.04 |                                                                                                                                                                                                                                                                                                                                                                   
  getNextTask.ts                    |    92.3 |    70.58 |     100 |    92.3 | 133-134                                                                                                                                                                                                                                                                                                                                                           
  index.ts                          |       0 |      100 |     100 |       0 | 9-10                                                                                                                                                                                                                                                                                                                                                              
  reportTaskDone.ts                 |   94.87 |    78.57 |     100 |   94.87 | 141-142                                                                                                                                                                                                                                                                                                                                                           
 src/agents/orchestrator/routing    |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                   
  codingAI.ts                       |       0 |        0 |       0 |       0 | 10-313                                                                                                                                                                                                                                                                                                                                                            
  index.ts                          |       0 |      100 |     100 |       0 | 9-10                                                                                                                                                                                                                                                                                                                                                              
  verification.ts                   |       0 |        0 |       0 |       0 | 10-381                                                                                                                                                                                                                                                                                                                                                            
 src/agents/planning                |    38.1 |    22.39 |   33.15 |   39.76 |                                                                                                                                                                                                                                                                                                                                                                   
  acceptanceCriteria.ts             |    4.43 |        0 |       0 |    5.14 | 99-528,540-543,550                                                                                                                                                                                                                                                                                                                                                
  analysis.ts                       |   98.59 |    92.85 |     100 |   98.55 | 149                                                                                                                                                                                                                                                                                                                                                               
  context.ts                        |    3.57 |        0 |       0 |    4.12 | 113-569,580-583,590                                                                                                                                                                                                                                                                                                                                               
  decomposer.ts                     |   83.03 |    59.25 |   88.46 |   85.06 | 170,419-457                                                                                                                                                                                                                                                                                                                                                       
  estimation.ts                     |    4.69 |        0 |       0 |    5.93 | 134-439,454-457,464                                                                                                                                                                                                                                                                                                                                               
  handoff.ts                        |   83.57 |     56.6 |   86.36 |   84.84 | 178-179,199-201,239,242-243,280,307-316,343,372,386                                                                                                                                                                                                                                                                                                               
  index.ts                          |   86.01 |    59.45 |      60 |   84.37 | 108-109,181-182,200,216-218,235-236,297-298,312,328-330,392,407-408,433                                                                                                                                                                                                                                                                                           
  patterns.ts                       |   10.71 |        0 |       0 |   11.32 | 346-478,489-492,499                                                                                                                                                                                                                                                                                                                                               
  planValidator.ts                  |    5.63 |        0 |       0 |    5.79 | 155-566,577-580,587                                                                                                                                                                                                                                                                                                                                               
  prdGenerator.ts                   |   92.35 |    71.64 |    86.2 |   93.24 | 438,447-448,476-491                                                                                                                                                                                                                                                                                                                                               
  prdParser.ts                      |   56.25 |    40.26 |      75 |   57.25 | 189-191,202,208,214,216,218,220,226,272,291,302,304,327-343,366-369,381-410,447-470,487                                                                                                                                                                                                                                                                           
  priority.ts                       |    4.51 |        0 |       0 |     5.3 | 102-418,429-432,439                                                                                                                                                                                                                                                                                                                                               
  prompts.ts                        |   12.72 |        0 |       0 |   13.72 | 299-428,443-446,453,460                                                                                                                                                                                                                                                                                                                                           
  tasksync.ts                       |       5 |        0 |       0 |    5.35 | 119-443,454-457,464                                                                                                                                                                                                                                                                                                                                               
  vagueness.ts                      |    59.8 |       40 |   59.09 |    60.2 | 226,249,257-258,279-281,338-411,434-435,462-463,485-499                                                                                                                                                                                                                                                                                                           
  zenTasks.ts                       |    6.79 |        0 |       0 |    7.07 | 135-414,425-428,435                                                                                                                                                                                                                                                                                                                                               
 src/agents/verification            |   40.43 |    31.14 |   33.43 |   41.46 |                                                                                                                                                                                                                                                                                                                                                                   
  checklist.ts                      |    4.08 |        0 |       0 |     4.7 | 151-359,371                                                                                                                                                                                                                                                                                                                                                       
  coverage.ts                       |    9.58 |        0 |       0 |   10.14 | 89-259,270-271,278-281,288                                                                                                                                                                                                                                                                                                                                        
  decision.ts                       |   88.13 |    77.19 |     100 |   88.13 | 94-97,155-156,174                                                                                                                                                                                                                                                                                                                                                 
  devServer.ts                      |    7.27 |        0 |       0 |     7.4 | 75-297,308-311,318-321                                                                                                                                                                                                                                                                                                                                            
  escalation.ts                     |   10.66 |        0 |       0 |   11.26 | 49-247,258-261,268-271                                                                                                                                                                                                                                                                                                                                            
  followUp.ts                       |    6.97 |        0 |       0 |    7.14 | 75-360,371-374,381                                                                                                                                                                                                                                                                                                                                                
  index.ts                          |   61.53 |    25.92 |   57.14 |   61.53 | 130-284                                                                                                                                                                                                                                                                                                                                                           
  investigation.ts                  |    92.3 |    57.57 |     100 |   93.54 | 186-187,192-193                                                                                                                                                                                                                                                                                                                                                   
  logging.ts                        |    7.92 |        0 |       0 |    8.42 | 66-248,259-262,269-272                                                                                                                                                                                                                                                                                                                                            
  matchReport.ts                    |     4.5 |        0 |       0 |    4.71 | 71-311,322-325,332                                                                                                                                                                                                                                                                                                                                                
  matching.ts                       |   86.88 |    69.76 |   91.66 |   87.93 | 174,192-201,220                                                                                                                                                                                                                                                                                                                                                   
  reVerify.ts                       |    7.77 |        0 |       0 |    8.04 | 85-277,288-289,296-299,306                                                                                                                                                                                                                                                                                                                                        
  reporting.ts                      |    5.26 |        0 |       0 |    5.74 | 111-342,353-356,363                                                                                                                                                                                                                                                                                                                                               
  retryLimit.ts                     |    6.09 |        0 |       0 |    6.49 | 90-306,317-320,327                                                                                                                                                                                                                                                                                                                                                
  stabilityTimer.ts                 |    93.1 |    73.91 |   91.66 |   94.54 | 85-87                                                                                                                                                                                                                                                                                                                                                             
  taskBlocking.ts                   |   73.48 |       56 |      75 |   73.64 | 133-175,184,189,220,248-249,266,312,327,343-360                                                                                                                                                                                                                                                                                                                   
  testParsers.ts                    |   95.83 |    82.29 |     100 |   95.77 | 453-458                                                                                                                                                                                                                                                                                                                                                           
  testRunner.ts                     |   85.39 |     65.3 |     100 |   85.39 | 85-86,127-134,199,230,256-261                                                                                                                                                                                                                                                                                                                                     
  visualDetection.ts                |   18.91 |        0 |       0 |   18.91 | 83-205,216-217,224-227,234                                                                                                                                                                                                                                                                                                                                        
  watcher.ts                        |   48.87 |    22.72 |   52.17 |      50 | 130-131,161,194-195,205-352,391,397,442-444                                                                                                                                                                                                                                                                                                                       
 src/config                         |   95.21 |    71.02 |   95.45 |   95.21 |                                                                                                                                                                                                                                                                                                                                                                   
  index.ts                          |     100 |    83.33 |     100 |     100 | 35                                                                                                                                                                                                                                                                                                                                                                
  loader.ts                         |   82.53 |    59.25 |      75 |   82.53 | 51-58,65-66,97-99                                                                                                                                                                                                                                                                                                                                                 
  onboarding.ts                     |     100 |    83.33 |     100 |     100 | 61-83,169                                                                                                                                                                                                                                                                                                                                                         
  schema.ts                         |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  watcher.ts                        |     100 |    82.75 |     100 |     100 | 54,95,128,164-175                                                                                                                                                                                                                                                                                                                                                 
 src/errors                         |   90.72 |    80.89 |   89.79 |   90.72 |                                                                                                                                                                                                                                                                                                                                                                   
  LLMErrors.ts                      |   88.15 |    67.56 |   88.88 |   88.15 | 168-175,204-205,230,298-301                                                                                                                                                                                                                                                                                                                                       
  errorCodes.ts                     |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  stateErrors.ts                    |   83.33 |    88.88 |      80 |   83.33 | 158-159,205-206,258                                                                                                                                                                                                                                                                                                                                               
  timeoutErrors.ts                  |   96.96 |     90.9 |     100 |   96.96 | 199                                                                                                                                                                                                                                                                                                                                                               
  validationErrors.ts               |   91.42 |       90 |    90.9 |   91.42 | 184-185,219                                                                                                                                                                                                                                                                                                                                                       
 src/generators                     |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                   
  dependencyScripts.ts              |       0 |        0 |       0 |       0 | 12-957                                                                                                                                                                                                                                                                                                                                                            
  featureStubs.ts                   |       0 |        0 |       0 |       0 | 58-749                                                                                                                                                                                                                                                                                                                                                            
  planScaffold.ts                   |       0 |        0 |       0 |       0 | 63-1176                                                                                                                                                                                                                                                                                                                                                           
 src/llm                            |   88.37 |    78.87 |   79.34 |   88.57 |                                                                                                                                                                                                                                                                                                                                                                   
  index.ts                          |       0 |      100 |       0 |       0 | 12-44                                                                                                                                                                                                                                                                                                                                                             
  polling.ts                        |   84.26 |    63.63 |   84.61 |   84.09 | 151,172,180-183,218-221,296-299,307                                                                                                                                                                                                                                                                                                                               
  queue.ts                          |   92.34 |    79.22 |      90 |   92.73 | 221,273,375-391                                                                                                                                                                                                                                                                                                                                                   
  queueWarning.ts                   |   84.28 |    65.71 |    87.5 |   85.07 | 143-144,202-203,257-266,274                                                                                                                                                                                                                                                                                                                                       
  streaming.ts                      |   97.87 |    92.64 |     100 |   97.85 | 330,377,418                                                                                                                                                                                                                                                                                                                                                       
 src/mcpServer                      |   88.15 |     73.8 |   83.87 |   88.05 |                                                                                                                                                                                                                                                                                                                                                                   
  index.ts                          |   58.82 |    83.33 |      50 |   57.57 | 64-83                                                                                                                                                                                                                                                                                                                                                             
  integration.ts                    |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  jsonrpc.ts                        |   96.66 |    81.25 |     100 |   96.66 | 115                                                                                                                                                                                                                                                                                                                                                               
  server.ts                         |    92.3 |    71.53 |   88.88 |    92.3 | 42-43,46-47,66,97,111,124,347-348,369,387                                                                                                                                                                                                                                                                                                                         
 src/mcpServer/tools                |   93.85 |    81.41 |     100 |   94.35 |                                                                                                                                                                                                                                                                                                                                                                   
  askQuestion.ts                    |     100 |    86.95 |     100 |     100 | 87-92,104                                                                                                                                                                                                                                                                                                                                                         
  getErrors.ts                      |   98.93 |    83.67 |     100 |     100 | 69,108-115,143,148-156,215                                                                                                                                                                                                                                                                                                                                        
  getNextTask.ts                    |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  reportTaskDone.ts                 |   93.02 |       80 |     100 |   93.02 | 57,61,65                                                                                                                                                                                                                                                                                                                                                          
  scanCodeBase.ts                   |   87.67 |    73.25 |     100 |   88.27 | 197-201,206,257,346,430-437,462,474,560-564                                                                                                                                                                                                                                                                                                                       
 src/planning                       |   67.59 |    45.22 |   47.39 |   69.17 |                                                                                                                                                                                                                                                                                                                                                                   
  commands.ts                       |   16.03 |        0 |    6.66 |   17.21 | 54-55,62-86,93-108,118-148,156-184,192-232,242-275,282-291,298-313,325                                                                                                                                                                                                                                                                                            
  documentationSync.ts              |   88.95 |    62.22 |   74.28 |   88.82 | 191-192,274-276,323,342-347,386-387,429-430,436-437,440,547,599-624,703-732                                                                                                                                                                                                                                                                                       
  driftDetection.ts                 |   81.03 |    62.71 |   72.22 |   81.48 | 257-263,425-523,530,702-703,711-724                                                                                                                                                                                                                                                                                                                               
  errorHandler.ts                   |   42.61 |     26.4 |   35.55 |   44.51 | 153-154,176-229,272-301,317-391,407,415,443,451,468,478,508-510,544-605,622,756-768,795                                                                                                                                                                                                                                                                           
  index.ts                          |   98.27 |      100 |   30.23 |   98.27 | 260                                                                                                                                                                                                                                                                                                                                                               
  orchestratorIntegration.ts        |   67.01 |    53.19 |   41.66 |   71.17 | 186-188,281,297,426,453-454,488-490,497,504-505,512-515,527-544,551-553,563-573,603-613,629                                                                                                                                                                                                                                                                       
  schema.ts                         |     100 |       70 |     100 |     100 | 183-184,235                                                                                                                                                                                                                                                                                                                                                       
  types.ts                          |       0 |        0 |       0 |       0 | 155-158                                                                                                                                                                                                                                                                                                                                                           
 src/services                       |   69.43 |    56.15 |   64.09 |   69.49 |                                                                                                                                                                                                                                                                                                                                                                   
  autoModeState.ts                  |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  deduplication.ts                  |     100 |    94.44 |     100 |     100 | 90,142,210                                                                                                                                                                                                                                                                                                                                                        
  llmService.ts                     |   85.26 |    65.53 |      80 |   86.41 | 106,162,386,486-487,502-528,547-574,647-648,753,793,801,821,872-873,898-900,974                                                                                                                                                                                                                                                                                   
  orchestrator.ts                   |   68.73 |    45.33 |   55.73 |   68.68 | 195-197,223,247,252,267-394,407-530,550-551,567-568,588,594,600-601,644-646,831,1058,1083-1118,1180,1192-1195,1209,1221-1224,1250-1253                                                                                                                                                                                                                            
  planningService.ts                |    5.26 |        0 |       0 |    5.31 | 32-36,43-46,53-438                                                                                                                                                                                                                                                                                                                                                
  streamBuffer.ts                   |    57.5 |    34.78 |      60 |   56.41 | 73-87,104-106,112,123-124,133-143                                                                                                                                                                                                                                                                                                                                 
  ticketCleanup.ts                  |      50 |    29.54 |   23.52 |   50.56 | 44,54,73-85,95,123,128-134,143-156,161,185-198,219,226-229,243                                                                                                                                                                                                                                                                                                    
  ticketDb.ts                       |   88.76 |    76.82 |     100 |   88.59 | 71-74,90-94,112,426-427,443,529-530,533-534,540-541,544-545,571,582-585,640,648,656,664,672                                                                                                                                                                                                                                                                       
 src/services/cache                 |   88.88 |    65.61 |   95.94 |   88.83 |                                                                                                                                                                                                                                                                                                                                                                   
  changeDetection.ts                |   77.58 |    39.39 |    90.9 |   77.39 | 115-117,143-145,168,175,186,193-195,243-244,259-260,278-279,288-291,341,368-370                                                                                                                                                                                                                                                                                   
  index.ts                          |   82.64 |       68 |      95 |   82.45 | 108-117,217-219,241-242,247-249,302-304,323,348-350,400-402                                                                                                                                                                                                                                                                                                       
  pruning.ts                        |     100 |    76.08 |     100 |     100 | 54,87-88,133,150-171,205-230,247,288-289                                                                                                                                                                                                                                                                                                                          
  refresh.ts                        |    94.8 |    78.26 |     100 |   94.59 | 207-210                                                                                                                                                                                                                                                                                                                                                           
  retention.ts                      |   89.85 |    65.38 |     100 |   89.85 | 93-95,110-113                                                                                                                                                                                                                                                                                                                                                     
  storage.ts                        |   89.18 |    63.63 |     100 |   89.18 | 187-189,279,300,308-310                                                                                                                                                                                                                                                                                                                                           
  structure.ts                      |   95.31 |    66.66 |      75 |   95.31 | 148,175,193                                                                                                                                                                                                                                                                                                                                                       
 src/services/context               |   91.35 |    85.71 |    97.1 |   90.64 |                                                                                                                                                                                                                                                                                                                                                                   
  contextBuilder.ts                 |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  index.ts                          |   98.36 |    95.65 |   95.65 |   98.24 | 163                                                                                                                                                                                                                                                                                                                                                               
  priorityTruncation.ts             |   72.54 |       64 |   93.33 |   70.83 | 85-87,91-94,109-123                                                                                                                                                                                                                                                                                                                                               
  tokenCounter.ts                   |   96.87 |    93.33 |     100 |   96.42 | 97                                                                                                                                                                                                                                                                                                                                                                
 src/services/taskQueue             |      90 |    73.63 |   90.21 |   91.16 |                                                                                                                                                                                                                                                                                                                                                                   
  blocking.ts                       |    80.2 |       56 |   89.47 |   80.85 | 175-181,204,218-219,231,241-252,265,377-380                                                                                                                                                                                                                                                                                                                       
  circularDetection.ts              |      95 |    72.72 |    92.3 |    96.1 | 115,144,149                                                                                                                                                                                                                                                                                                                                                       
  dependencyGraph.ts                |   91.42 |    56.66 |   95.45 |   98.41 | 232                                                                                                                                                                                                                                                                                                                                                               
  index.ts                          |   89.86 |    81.03 |   76.47 |   91.54 | 187,211,214,250,286,332-333,365-369                                                                                                                                                                                                                                                                                                                               
  persistence.ts                    |      72 |    52.63 |   88.23 |   73.97 | 108,172,238-246,256-275,349                                                                                                                                                                                                                                                                                                                                       
  priorityQueue.ts                  |   98.36 |     90.9 |     100 |   98.18 | 164                                                                                                                                                                                                                                                                                                                                                               
  readiness.ts                      |   93.54 |    79.24 |   94.11 |   96.61 | 100,116,223,297                                                                                                                                                                                                                                                                                                                                                   
  topologicalSort.ts                |   96.62 |    76.47 |     100 |   96.51 | 62,196-197                                                                                                                                                                                                                                                                                                                                                        
  validation.ts                     |   94.91 |    84.31 |     100 |   94.64 | 107,326,395-398                                                                                                                                                                                                                                                                                                                                                   
  visualization.ts                  |   88.05 |    73.86 |      85 |   87.58 | 134,154,305,343-345,347,363-384                                                                                                                                                                                                                                                                                                                                   
 src/services/ticketDb              |   92.73 |    82.91 |   96.55 |   92.97 |                                                                                                                                                                                                                                                                                                                                                                   
  conflict.ts                       |   93.61 |    75.86 |     100 |   97.67 | 263                                                                                                                                                                                                                                                                                                                                                               
  errorTickets.ts                   |   96.49 |    92.59 |     100 |   96.49 | 113,248                                                                                                                                                                                                                                                                                                                                                           
  fallback.ts                       |   98.21 |    90.24 |     100 |   98.11 | 306                                                                                                                                                                                                                                                                                                                                                               
  history.ts                        |    96.1 |    84.31 |     100 |    98.5 | 284                                                                                                                                                                                                                                                                                                                                                               
  idGenerator.ts                    |   94.54 |    97.29 |     100 |   94.54 | 98-99,126-127,169-170                                                                                                                                                                                                                                                                                                                                             
  index.ts                          |       0 |      100 |     100 |       0 | 10-26                                                                                                                                                                                                                                                                                                                                                             
  init.ts                           |   98.86 |       80 |     100 |   98.86 | 106                                                                                                                                                                                                                                                                                                                                                               
  migrations.ts                     |     100 |    76.19 |     100 |     100 | 261,298,364-428                                                                                                                                                                                                                                                                                                                                                   
  pool.ts                           |   81.91 |    68.75 |   83.33 |    81.6 | 86,237-238,266-285                                                                                                                                                                                                                                                                                                                                                
  recovery.ts                       |   92.95 |    88.23 |    87.5 |   92.95 | 95-99,111-112                                                                                                                                                                                                                                                                                                                                                     
  reply.ts                          |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  resolve.ts                        |     100 |       96 |     100 |     100 | 214                                                                                                                                                                                                                                                                                                                                                               
  restore.ts                        |   95.94 |    67.56 |   91.66 |   95.89 | 243,293-294                                                                                                                                                                                                                                                                                                                                                       
  retry.ts                          |   97.82 |    88.88 |     100 |   97.67 | 140                                                                                                                                                                                                                                                                                                                                                               
  search.ts                         |    92.2 |    71.42 |     100 |   92.75 | 82,98-100,189                                                                                                                                                                                                                                                                                                                                                     
  status.ts                         |   93.18 |       70 |   93.75 |   93.02 | 149,250,278                                                                                                                                                                                                                                                                                                                                                       
  transaction.ts                    |   94.11 |    76.19 |     100 |   94.11 | 120-121,202,239                                                                                                                                                                                                                                                                                                                                                   
  validator.ts                      |   86.66 |    83.07 |     100 |   86.44 | 155-157,215,224-226,231,235,245,256,362,386,470,506-511                                                                                                                                                                                                                                                                                                           
 src/ui                             |   23.92 |    15.68 |   18.83 |   25.46 |                                                                                                                                                                                                                                                                                                                                                                   
  agentGallery.ts                   |   13.79 |        0 |       0 |   14.81 | 109-581                                                                                                                                                                                                                                                                                                                                                           
  agentStatusTracker.ts             |     100 |       90 |     100 |     100 | 42                                                                                                                                                                                                                                                                                                                                                                
  agentsTreeProvider.ts             |    98.9 |      100 |   88.88 |    98.9 | 35                                                                                                                                                                                                                                                                                                                                                                
  aiSuggestions.ts                  |       0 |        0 |       0 |       0 | 71-953                                                                                                                                                                                                                                                                                                                                                            
  blockCanvas.ts                    |       0 |        0 |       0 |       0 | 110-1045                                                                                                                                                                                                                                                                                                                                                          
  blockPropertyPanel.ts             |       0 |        0 |       0 |       0 | 10-784                                                                                                                                                                                                                                                                                                                                                            
  canvasToPlan.ts                   |       0 |        0 |       0 |       0 | 11-571                                                                                                                                                                                                                                                                                                                                                            
  conversationWebview.ts            |   81.01 |    68.75 |   68.75 |   82.89 | 149,162-166,207-209,223,526-533,560-564                                                                                                                                                                                                                                                                                                                           
  conversationsTreeProvider.ts      |   85.29 |    70.51 |      80 |   85.18 | 89,112-114,147-152,159,218,244-245,261,271,286,319,326,340-344                                                                                                                                                                                                                                                                                                    
  customAgentBuilder.ts             |   83.58 |    61.62 |   94.59 |   83.51 | 140,286-289,299-301,324-333,343-349,447-487,554,597-599                                                                                                                                                                                                                                                                                                           
  dependencyGraph.ts                |       0 |        0 |       0 |       0 | 57-617                                                                                                                                                                                                                                                                                                                                                            
  detailedTextBox.ts                |       0 |        0 |       0 |       0 | 59-568                                                                                                                                                                                                                                                                                                                                                            
  dragDropHandlers.ts               |       0 |        0 |       0 |       0 | 93-740                                                                                                                                                                                                                                                                                                                                                            
  llmStatusBar.ts                   |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                   
  notificationService.ts            |   87.61 |       82 |    87.5 |   87.38 | 156,231,235,250-251,268-269,382-395                                                                                                                                                                                                                                                                                                                               
  orchestratorStatusTreeProvider.ts |   70.45 |    41.66 |   71.42 |   70.45 | 35-36,42-56,67,103-109                                                                                                                                                                                                                                                                                                                                            
  planAnalytics.ts                  |       0 |        0 |       0 |       0 | 12-1101                                                                                                                                                                                                                                                                                                                                                           
  planCollaboration.ts              |       0 |        0 |       0 |       0 | 11-741                                                                                                                                                                                                                                                                                                                                                            
  planExport.ts                     |    2.74 |        0 |       0 |    2.83 | 59-404,427-458,470,500,573-650                                                                                                                                                                                                                                                                                                                                    
  planHealth.ts                     |       0 |        0 |       0 |       0 | 12-712                                                                                                                                                                                                                                                                                                                                                            
  planTemplates.ts                  |       0 |        0 |       0 |       0 | 11-918                                                                                                                                                                                                                                                                                                                                                            
  planValidator.ts                  |       0 |        0 |       0 |       0 | 12-917                                                                                                                                                                                                                                                                                                                                                            
  planVersioning.ts                 |       0 |        0 |       0 |       0 | 11-834                                                                                                                                                                                                                                                                                                                                                            
  planningWizard.ts                 |    8.69 |        0 |       0 |    9.41 | 18-179                                                                                                                                                                                                                                                                                                                                                            
  planningWizardIntegration.ts      |       0 |        0 |       0 |       0 | 11-546                                                                                                                                                                                                                                                                                                                                                            
  ticketsTreeProvider.ts            |   92.85 |      100 |     100 |   92.75 | 87-91                                                                                                                                                                                                                                                                                                                                                             
  verificationWebview.ts            |   63.11 |    52.77 |   77.27 |    62.5 | 162,169-170,213-291,656-658                                                                                                                                                                                                                                                                                                                                       
  wizardHtml.ts                     |    6.66 |        0 |       0 |    6.66 | 20-743                                                                                                                                                                                                                                                                                                                                                            
  wizardPages.ts                    |   16.27 |        0 |       0 |   16.66 | 18-89,112-199,219-294,323-413,432-457,531-644                                                                                                                                                                                                                                                                                                                     
------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Test Suites: 125 passed, 125 total
Tests:       8 skipped, 3106 passed, 3114 total
Snapshots:   0 total
Time:        35.493 s
